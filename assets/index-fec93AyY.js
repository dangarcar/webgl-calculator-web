var ou=Object.defineProperty;var lu=(r,t,s)=>t in r?ou(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s;var Ft=(r,t,s)=>(lu(r,typeof t!="symbol"?t+"":t,s),s),us=(r,t,s)=>{if(!t.has(r))throw TypeError("Cannot "+s)};var Fn=(r,t,s)=>(us(r,t,"read from private field"),s?s.call(r):t.get(r)),ki=(r,t,s)=>{if(t.has(r))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(r):t.set(r,s)},Ha=(r,t,s,i)=>(us(r,t,"write to private field"),i?i.call(r,s):t.set(r,s),s);var cs=(r,t,s)=>(us(r,t,"access private method"),s);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const e of a.addedNodes)e.tagName==="LINK"&&e.rel==="modulepreload"&&i(e)}).observe(document,{childList:!0,subtree:!0});function s(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(n){if(n.ep)return;n.ep=!0;const a=s(n);fetch(n.href,a)}})();(function(){function r(){}function t(l){var m=l.length-1;return function(){var o=Z.call(arguments,0,m),c=Z.call(arguments,m);return l.apply(this,o.concat([c]))}}function s(l){return t(function(m,o){typeof m!="function"&&(m=$e(m));var c=function(d){return m.apply(d,[d].concat(o))};return l.call(this,c)})}function i(l){var m=Z.call(arguments,1);return function(){return l.apply(this,m)}}function n(l,m){if(!m)throw new Error("prayer failed: "+l)}function a(l){n("a direction was passed",l===M||l===j)}function e(l,m,o){n("a parent is always present",l),n("leftward is properly set up",function(){return m?m[j]===o&&m.parent===l:l.ends[M]===o}()),n("rightward is properly set up",function(){return o?o[M]===m&&o.parent===l:l.ends[j]===m}())}function p(){window.console&&console.warn(`You are using the MathQuill API without specifying an interface version, which will fail in v1.0.0. Easiest fix is to do the following before doing anything else:

    MathQuill = MathQuill.getInterface(1);
    // now MathQuill.MathField() works like it used to

See also the "\`dev\` branch (2014–2015) → v0.10.0 Migration Guide" at
  https://github.com/mathquill/mathquill/wiki/%60dev%60-branch-(2014%E2%80%932015)-%E2%86%92-v0.10.0-Migration-Guide`)}function b(l){return p(),Y(l)}function v(l){function m(N){var y,u;return N&&N.nodeType?(y=Se(N).children(".mq-root-block").attr(Ee),u=y&&ke.byId[y].controller,u?c[u.KIND_OF_MQ](u):null):null}function o(N,y){var u,F,fe;y&&y.handlers&&(y.handlers={fns:y.handlers,APIClasses:c});for(u in y)y.hasOwnProperty(u)&&(F=y[u],fe=Ie[u],N[u]=fe?fe(F):F)}var c,d,I;if(!(Xr<=l&&l<=kr))throw"Only interface versions between "+Xr+" and "+kr+" supported. You specified: "+l;c={},m.L=M,m.R=j,m.saneKeyboardEvents=X,m.config=function(N){return o(gr.p,N),this},m.registerEmbed=function(N,y){if(!/^[a-z][a-z0-9]*$/i.test(N))throw"Embed name must start with letter and be only letters and digits";Lr[N]=y},d=c.AbstractMathQuill=le(Er,function(N){N.init=function(y){this.__controller=y,this.__options=y.options,this.id=y.id,this.data=y.data},N.__mathquillify=function(y){var u,F=this.__controller,fe=F.root,_e=F.container;F.createTextarea(),u=_e.addClass(y).contents().detach(),fe.jQ=Se('<span class="mq-root-block"/>').attr(Ee,fe.id).appendTo(_e),this.latex(u.text()),this.revert=function(){return _e.empty().unbind(".mathquill").removeClass("mq-editable-field mq-math-mode mq-text-mode").append(u)}},N.config=function(y){return o(this.__options,y),this},N.el=function(){return this.__controller.container[0]},N.text=function(){return this.__controller.exportText()},N.latex=function(y){return arguments.length>0?(this.__controller.renderLatexMath(y),this.__controller.blurred&&this.__controller.cursor.hide().parent.blur(),this):this.__controller.exportLatex()},N.html=function(){return this.__controller.root.jQ.html().replace(/ mathquill-(?:command|block)-id="?\d+"?/g,"").replace(/<span class="?mq-cursor( mq-blink)?"?>.?<\/span>/i,"").replace(/ mq-hasCursor|mq-hasCursor ?/,"").replace(/ class=(""|(?= |>))/g,"")},N.reflow=function(){return this.__controller.root.postOrder("reflow"),this}}),m.prototype=d.prototype,c.EditableField=le(d,function(N,y){N.__mathquillify=function(){return y.__mathquillify.apply(this,arguments),this.__controller.editable=!0,this.__controller.delegateMouseEvents(),this.__controller.editablesTextareaEvents(),this},N.focus=function(){return this.__controller.textarea.focus(),this},N.blur=function(){return this.__controller.textarea.blur(),this},N.write=function(u){return this.__controller.writeLatex(u),this.__controller.scrollHoriz(),this.__controller.blurred&&this.__controller.cursor.hide().parent.blur(),this},N.cmd=function(u){var F,fe=this.__controller.notify(),_e=fe.cursor;return/^\\[a-z]+$/i.test(u)?(u=u.slice(1),F=g[u],F&&(u=F(u),_e.selection&&u.replaces(_e.replaceSelection()),u.createLeftOf(_e.show()),this.__controller.scrollHoriz())):_e.parent.write(_e,u),fe.blurred&&_e.hide().parent.blur(),this},N.select=function(){var u=this.__controller;for(u.notify("move").cursor.insAtRightEnd(u.root);u.cursor[M];)u.selectLeft();return this},N.clearSelection=function(){return this.__controller.cursor.clearSelection(),this},N.moveToDirEnd=function(u){return this.__controller.notify("move").cursor.insAtDirEnd(u,this.__controller.root),this},N.moveToLeftEnd=function(){return this.moveToDirEnd(M)},N.moveToRightEnd=function(){return this.moveToDirEnd(j)},N.keystroke=function(u){var F;for(u=u.replace(/^\s+|\s+$/g,"").split(/\s+/),F=0;F<u.length;F+=1)this.__controller.keystroke(u[F],{preventDefault:r});return this},N.typedText=function(u){for(var F=0;F<u.length;F+=1)this.__controller.typedText(u.charAt(F));return this},N.dropEmbedded=function(u,F,fe){var _e,ee=u-Se(window).scrollLeft(),Ye=F-Se(window).scrollTop(),Xe=document.elementFromPoint(ee,Ye);this.__controller.seek(Se(Xe),u,F),_e=_r().setOptions(fe),_e.createLeftOf(this.__controller.cursor)},N.clickAt=function(u,F,fe){fe=fe||document.elementFromPoint(u,F);var _e=this.__controller,ee=_e.root;return Be.contains(ee.jQ[0],fe)||(fe=ee.jQ[0]),_e.seek(Se(fe),u+pageXOffset,F+pageYOffset),_e.blurred&&this.focus(),this},N.ignoreNextMousedown=function(u){return this.__controller.cursor.options.ignoreNextMousedown=u,this}}),m.EditableField=function(){throw"wtf don't call me, I'm 'abstract'"},m.EditableField.prototype=c.EditableField.prototype;for(I in Dr)(function(N,y){var u=c[N]=y(c);m[N]=function(F,fe){var _e,ee=m(F);return ee instanceof u||!F||!F.nodeType?ee:(_e=me(u.RootBlock(),Se(F),gr()),_e.KIND_OF_MQ=N,u(_e).__mathquillify(fe,l))},m[N].prototype=u.prototype})(I,Dr[I]);return m}function $(l){var m,o="moveOutOf deleteOutOf selectOutOf upOutOf downOutOf".split(" ");for(m=0;m<o.length;m+=1)(function(c){l[c]=function(d){this.controller.handle(c,d)}})(o[m]);l.reflow=function(){this.controller.handle("reflow"),this.controller.handle("edited"),this.controller.handle("edit")}}function L(l,m,o){return le(Zr,{ctrlSeq:l,htmlTemplate:"<"+m+" "+o+">&0</"+m+">"})}function R(l){var m=this.parent,o=l;do{if(o[j])return l.insLeftOf(m);o=o.parent.parent}while(o!==m);l.insRightOf(m)}function A(l,m){l.jQadd=function(){m.jQadd.apply(this,arguments),this.delimjQs=this.jQ.children(":first").add(this.jQ.children(":last")),this.contentjQ=this.jQ.children(":eq(1)")},l.reflow=function(){var o=this.contentjQ.outerHeight()/parseFloat(this.contentjQ.css("fontSize"));We(this.delimjQs,Rr(1+.2*(o-1),1.2),1.2*o)}}function E(l,o){var o=o||l,c=yr[l],d=yr[o];Qe[l]=i(ar,M,l,c,o,d),Qe[c]=i(ar,j,l,c,o,d)}var O,Z,$e,le,M,j,Se,Ce,ke,Pe,g,Qe,$r,Cr,me,Dr,gr,Ie,Er,Lr,Xr,kr,xe,ve,X,Fr,Br,nr,tr,ie,Ke,Pr,rt,Zr,wr,it,tt,ne,de,be,Ze,dr,he,Jr,Qr,J,K,W,xr,se,He,hr,We,ye,st,Mr,ht,Or,q,D,H,te,ce,ze,br,ir,mr,ar,yr,pr,_r,Y,ue,Be=window.jQuery,er="mathquill-command-id",Ee="mathquill-block-id",Rr=Math.min,cr=Math.max;if(!Be)throw"MathQuill requires jQuery 1.5.2+ to be loaded first";Z=[].slice,$e=t(function(l,m){return t(function(o,c){if(l in o)return o[l].apply(o,m.concat(c))})}),le=function(l,m,o){function c(N){return typeof N=="object"}function d(N){return typeof N=="function"}function I(){}return function N(y,u){function F(){var Xe=new fe;return d(Xe.init)&&Xe.init.apply(Xe,arguments),Xe}function fe(){}var _e,ee,Ye;return u===o&&(u=y,y=Object),F.Bare=fe,_e=I[l]=y[l],ee=fe[l]=F[l]=F.p=new I,ee.constructor=F,F.extend=function(Xe){return N(F,Xe)},(F.open=function(Xe){if(Ye={},d(Xe)?Ye=Xe.call(F,ee,_e,F,y):c(Xe)&&(Ye=Xe),c(Ye))for(var jr in Ye)m.call(Ye,jr)&&(ee[jr]=Ye[jr]);return d(ee.init)||(ee.init=y),F})(u)}}("prototype",{}.hasOwnProperty),M=-1,j=1,Se=le(Be,function(l){l.insDirOf=function(m,o){return m===M?this.insertBefore(o.first()):this.insertAfter(o.last())},l.insAtDirEnd=function(m,o){return m===M?this.prependTo(o):this.appendTo(o)}}),Ce=le(function(l){l.parent=0,l[M]=0,l[j]=0,l.init=function(m,o,c){this.parent=m,this[M]=o,this[j]=c},this.copy=function(m){return Ce(m.parent,m[M],m[j])}}),ke=le(function(l){function m(){return o+=1}l[M]=0,l[j]=0,l.parent=0;var o=0;this.byId={},l.init=function(){this.id=m(),ke.byId[this.id]=this,this.ends={},this.ends[M]=0,this.ends[j]=0},l.dispose=function(){delete ke.byId[this.id]},l.toString=function(){return"{{ MathQuill Node #"+this.id+" }}"},l.jQ=Se(),l.jQadd=function(c){return this.jQ=this.jQ.add(c)},l.jQize=function(c){function d(N){var y,u;for(N.getAttribute&&(y=N.getAttribute("mathquill-command-id"),u=N.getAttribute("mathquill-block-id"),y&&ke.byId[y].jQadd(N),u&&ke.byId[u].jQadd(N)),N=N.firstChild;N;N=N.nextSibling)d(N)}var I;for(c=Se(c||this.html()),I=0;I<c.length;I+=1)d(c[I]);return c},l.createDir=function(c,d){a(c);var I=this;return I.jQize(),I.jQ.insDirOf(c,d.jQ),d[c]=I.adopt(d.parent,d[M],d[j]),I},l.createLeftOf=function(c){return this.createDir(M,c)},l.selectChildren=function(c,d){return Cr(c,d)},l.bubble=s(function(c){var d,I;for(d=this;d&&(I=c(d),I!==!1);d=d.parent);return this}),l.postOrder=s(function(c){return function d(I){I.eachChild(d),c(I)}(this),this}),l.isEmpty=function(){return this.ends[M]===0&&this.ends[j]===0},l.isStyleBlock=function(){return!1},l.children=function(){return Pe(this.ends[M],this.ends[j])},l.eachChild=function(){var c=this.children();return c.each.apply(c,arguments),this},l.foldChildren=function(c,d){return this.children().fold(c,d)},l.withDirAdopt=function(c,d,I,N){return Pe(this,this).withDirAdopt(c,d,I,N),this},l.adopt=function(c,d,I){return Pe(this,this).adopt(c,d,I),this},l.disown=function(){return Pe(this,this).disown(),this},l.remove=function(){return this.jQ.remove(),this.postOrder("dispose"),this.disown()}}),Pe=le(function(l){l.init=function(m,o,c){if(c===O&&(c=M),a(c),n("no half-empty fragments",!m==!o),this.ends={},m){n("withDir is passed to Fragment",m instanceof ke),n("oppDir is passed to Fragment",o instanceof ke),n("withDir and oppDir have the same parent",m.parent===o.parent),this.ends[c]=m,this.ends[-c]=o;var d=this.fold([],function(I,N){return I.push.apply(I,N.jQ.get()),I});this.jQ=this.jQ.add(d)}},l.jQ=Se(),l.withDirAdopt=function(m,o,c,d){return m===M?this.adopt(o,c,d):this.adopt(o,d,c)},l.adopt=function(m,o,c){var d,I,N;return e(m,o,c),d=this,d.disowned=!1,(I=d.ends[M])?(N=d.ends[j],o||(m.ends[M]=I),c?c[M]=N:m.ends[j]=N,d.ends[j][j]=c,d.each(function(y){y[M]=o,y.parent=m,o&&(o[j]=y),o=y}),d):this},l.disown=function(){var m,o,c=this,d=c.ends[M];return!d||c.disowned||(c.disowned=!0,m=c.ends[j],o=d.parent,e(o,d[M],d),e(o,m,m[j]),d[M]?d[M][j]=m[j]:o.ends[M]=m[j],m[j]?m[j][M]=d[M]:o.ends[j]=d[M]),c},l.remove=function(){return this.jQ.remove(),this.each("postOrder","dispose"),this.disown()},l.each=s(function(m){var o,c=this,d=c.ends[M];if(!d)return c;for(;d!==c.ends[j][j]&&(o=m(d),o!==!1);d=d[j]);return c}),l.fold=function(m,o){return this.each(function(c){m=o.call(this,m,c)}),m}}),g={},Qe={},$r=le(Ce,function(l){l.init=function(m,o){this.parent=m,this.options=o;var c=this.jQ=this._jQ=Se('<span class="mq-cursor">&#8203;</span>');this.blink=function(){c.toggleClass("mq-blink")},this.upDownCache={}},l.show=function(){return this.jQ=this._jQ.removeClass("mq-blink"),"intervalId"in this?clearInterval(this.intervalId):(this[j]?this.selection&&this.selection.ends[M][M]===this[M]?this.jQ.insertBefore(this.selection.jQ):this.jQ.insertBefore(this[j].jQ.first()):this.jQ.appendTo(this.parent.jQ),this.parent.focus()),this.intervalId=setInterval(this.blink,500),this},l.hide=function(){return"intervalId"in this&&clearInterval(this.intervalId),delete this.intervalId,this.jQ.detach(),this.jQ=Se(),this},l.withDirInsertAt=function(m,o,c,d){var I=this.parent;this.parent=o,this[m]=c,this[-m]=d,I!==o&&I.blur&&I.blur(this)},l.insDirOf=function(m,o){return a(m),this.jQ.insDirOf(m,o.jQ),this.withDirInsertAt(m,o.parent,o[m],o),this.parent.jQ.addClass("mq-hasCursor"),this},l.insLeftOf=function(m){return this.insDirOf(M,m)},l.insRightOf=function(m){return this.insDirOf(j,m)},l.insAtDirEnd=function(m,o){return a(m),this.jQ.insAtDirEnd(m,o.jQ),this.withDirInsertAt(m,o,0,o.ends[m]),o.focus(),this},l.insAtLeftEnd=function(m){return this.insAtDirEnd(M,m)},l.insAtRightEnd=function(m){return this.insAtDirEnd(j,m)},l.jumpUpDown=function(m,o){var c,d,I=this;I.upDownCache[m.id]=Ce.copy(I),c=I.upDownCache[o.id],c?c[j]?I.insLeftOf(c[j]):I.insAtRightEnd(c.parent):(d=I.offset().left,o.seek(d,I))},l.offset=function(){var m=this,o=m.jQ.removeClass("mq-cursor").offset();return m.jQ.addClass("mq-cursor"),o},l.unwrapGramp=function(){var m=this.parent.parent,o=m.parent,c=m[j],d=this,I=m[M];if(m.disown().eachChild(function(N){N.isEmpty()||(N.children().adopt(o,I,c).each(function(y){y.jQ.insertBefore(m.jQ.first())}),I=N.ends[j])}),!this[j])if(this[M])this[j]=this[M][j];else for(;!this[j];){if(this.parent=this.parent[j],!this.parent){this[j]=m[j],this.parent=o;break}this[j]=this.parent.ends[M]}this[j]?this.insLeftOf(this[j]):this.insAtRightEnd(o),m.jQ.remove(),m[M].siblingDeleted&&m[M].siblingDeleted(d.options,j),m[j].siblingDeleted&&m[j].siblingDeleted(d.options,M)},l.startSelection=function(){var m,o=this.anticursor=Ce.copy(this),c=o.ancestors={};for(m=o;m.parent;m=m.parent)c[m.parent.id]=m},l.endSelection=function(){delete this.anticursor},l.select=function(){var m,o,c,d,I,N,y,u=this.anticursor;if(this[M]===u[M]&&this.parent===u.parent)return!1;for(m=this;m.parent;m=m.parent)if(m.parent.id in u.ancestors){o=m.parent;break}if(n("cursor and anticursor in the same tree",o),c=u.ancestors[o.id],N=j,m[M]!==c){for(y=m;y;y=y[j])if(y[j]===c[j]){N=M,d=m,I=c;break}}return N===j&&(d=c,I=m),d instanceof Ce&&(d=d[j]),I instanceof Ce&&(I=I[M]),this.hide().selection=o.selectChildren(d,I),this.insDirOf(N,this.selection.ends[N]),this.selectionChanged(),!0},l.clearSelection=function(){return this.selection&&(this.selection.clear(),delete this.selection,this.selectionChanged()),this},l.deleteSelection=function(){this.selection&&(this[M]=this.selection.ends[M][M],this[j]=this.selection.ends[j][j],this.selection.remove(),this.selectionChanged(),delete this.selection)},l.replaceSelection=function(){var m=this.selection;return m&&(this[M]=m.ends[M][M],this[j]=m.ends[j][j],delete this.selection),m}}),Cr=le(Pe,function(l,m){l.init=function(){m.init.apply(this,arguments),this.jQ=this.jQ.wrapAll('<span class="mq-selection"></span>').parent()},l.adopt=function(){return this.jQ.replaceWith(this.jQ=this.jQ.children()),m.adopt.apply(this,arguments)},l.clear=function(){return this.jQ.replaceWith(this.jQ[0].childNodes),this},l.join=function(o){return this.fold("",function(c,d){return c+d[o]()})}}),me=le(function(l){l.init=function(o,c,d){this.id=o.id,this.data={},this.root=o,this.container=c,this.options=d,o.controller=this,this.cursor=o.cursor=$r(o,d)},l.handle=function(o,c){var d,I=this.options.handlers;I&&I.fns[o]&&(d=I.APIClasses[this.KIND_OF_MQ](this),c===M||c===j?I.fns[o](c,d):I.fns[o](d))};var m=[];this.onNotify=function(o){m.push(o)},l.notify=function(){for(var o=0;o<m.length;o+=1)m[o].apply(this.cursor,arguments);return this}}),Dr={},gr=le(),Ie={},Er=le(),Lr={},b.prototype=Er.p,b.VERSION="v0.10.1",b.interfaceVersion=function(l){if(l!==1)throw"Only interface version 1 supported. You specified: "+l;return p=function(){window.console&&console.warn(`You called MathQuill.interfaceVersion(1); to specify the interface version, which will fail in v1.0.0. You can fix this easily by doing this before doing anything else:

    MathQuill = MathQuill.getInterface(1);
    // now MathQuill.MathField() works like it used to

See also the "\`dev\` branch (2014–2015) → v0.10.0 Migration Guide" at
  https://github.com/mathquill/mathquill/wiki/%60dev%60-branch-(2014%E2%80%932015)-%E2%86%92-v0.10.0-Migration-Guide`)},p(),b},b.getInterface=v,Xr=v.MIN=1,kr=v.MAX=2,b.noConflict=function(){return window.MathQuill=xe,b},xe=window.MathQuill,window.MathQuill=b,ve=le(function(l,m,o){function c(y,u){throw y=y?"'"+y+"'":"EOF","Parse Error: "+u+" at "+y}var d,I,N;l.init=function(y){this._=y},l.parse=function(y){function u(F,fe){return fe}return this.skip(N)._(""+y,u,c)},l.or=function(y){n("or is passed a parser",y instanceof o);var u=this;return o(function(F,fe,_e){function ee(Ye){return y._(F,fe,_e)}return u._(F,fe,ee)})},l.then=function(y){var u=this;return o(function(F,fe,_e){function ee(Ye,Xe){var jr=y instanceof o?y:y(Xe);return n("a parser is returned",jr instanceof o),jr._(Ye,fe,_e)}return u._(F,ee,_e)})},l.many=function(){var y=this;return o(function(u,F,fe){function _e(Xe,jr){return u=Xe,Ye.push(jr),!0}function ee(){return!1}for(var Ye=[];y._(u,_e,ee););return F(u,Ye)})},l.times=function(y,u){arguments.length<2&&(u=y);var F=this;return o(function(fe,_e,ee){function Ye(Nr,Te){return ur.push(Te),fe=Nr,!0}function Xe(Nr,Te){return at=Te,fe=Nr,!1}function jr(Nr,Te){return!1}var at,Kr,ur=[],Ur=!0;for(Kr=0;Kr<y;Kr+=1)if(Ur=F._(fe,Ye,Xe),!Ur)return ee(fe,at);for(;Kr<u&&Ur;Kr+=1)Ur=F._(fe,Ye,jr);return _e(fe,ur)})},l.result=function(y){return this.then(I(y))},l.atMost=function(y){return this.times(0,y)},l.atLeast=function(y){var u=this;return u.times(y).then(function(F){return u.many().map(function(fe){return F.concat(fe)})})},l.map=function(y){return this.then(function(u){return I(y(u))})},l.skip=function(y){return this.then(function(u){return y.result(u)})},this.string=function(y){var u=y.length,F="expected '"+y+"'";return o(function(fe,_e,ee){var Ye=fe.slice(0,u);return Ye===y?_e(fe.slice(u),Ye):ee(fe,F)})},d=this.regex=function(y){n("regexp parser is anchored",y.toString().charAt(1)==="^");var u="expected "+y;return o(function(F,fe,_e){var ee,Ye=y.exec(F);return Ye?(ee=Ye[0],fe(F.slice(ee.length),ee)):_e(F,u)})},I=o.succeed=function(y){return o(function(u,F){return F(u,y)})},o.fail=function(y){return o(function(u,F,fe){return fe(u,y)})},o.letter=d(/^[a-z]/i),o.letters=d(/^[a-z]*/i),o.digit=d(/^[0-9]/),o.digits=d(/^[0-9]*/),o.whitespace=d(/^\s+/),o.optWhitespace=d(/^\s*/),o.any=o(function(y,u,F){return y?u(y.slice(1),y.charAt(0)):F(y,"expected any character")}),o.all=o(function(y,u,F){return u("",y)}),N=o.eof=o(function(y,u,F){return y?F(y,"expected EOF"):u(y,y)})}),X=function(){function l(o){var c,d=o.which||o.keyCode,I=m[d],N=[];return o.ctrlKey&&N.push("Ctrl"),o.originalEvent&&o.originalEvent.metaKey&&N.push("Meta"),o.altKey&&N.push("Alt"),o.shiftKey&&N.push("Shift"),c=I||String.fromCharCode(d),N.length||I?(N.push(c),N.join("-")):c}var m={8:"Backspace",9:"Tab",10:"Enter",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Esc",32:"Spacebar",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Del",144:"NumLock"};return function(o,c){function d(Tr){St=Tr,clearTimeout(at),at=setTimeout(Tr)}function I(Tr){d(function(vt){St=r,clearTimeout(at),Tr(vt)})}function N(Tr){St(),St=r,clearTimeout(at),Nr.val(Tr),Tr&&Nr[0].select&&Nr[0].select(),Kr=!!Tr}function y(){var Tr=Nr[0];return"selectionStart"in Tr&&Tr.selectionStart!==Tr.selectionEnd}function u(){c.keystroke(l(ur),ur)}function F(Tr){ur=Tr,Ur=null,Kr&&I(function(vt){vt&&vt.type==="focusout"||!Nr[0].select||Nr[0].select()}),u()}function fe(Tr){ur&&Ur&&u(),Ur=Tr,d(ee)}function _e(Tr){ur&&!Ur&&d(ee)}function ee(){if(!y()){var Tr=Nr.val();Tr.length===1?(Nr.val(""),c.typedText(Tr)):Tr&&Nr[0].select&&Nr[0].select()}}function Ye(){ur=Ur=null}function Xe(Tr){Nr.focus(),d(jr)}function jr(){var Tr=Nr.val();Nr.val(""),Tr&&c.paste(Tr)}var at,Kr,ur=null,Ur=null,Nr=Be(o),Te=Be(c.container||Nr),St=r;return Te.bind("keydown keypress input keyup focusout paste",function(Tr){St(Tr)}),Kr=!1,Te.bind({keydown:F,keypress:fe,keyup:_e,focusout:Ye,cut:function(){I(function(){c.cut()})},copy:function(){I(function(){c.copy()})},paste:Xe}),{select:N}}}(),me.open(function(l,m){l.exportText=function(){return this.root.foldChildren("",function(o,c){return o+c.text()})}}),me.open(function(l){l.focusBlurEvents=function(){function m(){clearTimeout(c),N.selection&&N.selection.jQ.addClass("mq-blur"),o()}function o(){N.hide().parent.blur(),d.container.removeClass("mq-focused"),Se(window).unbind("blur",m)}var c,d=this,I=d.root,N=d.cursor;d.textarea.focus(function(){d.blurred=!1,clearTimeout(c),d.container.addClass("mq-focused"),N.parent||N.insAtRightEnd(I),N.selection?(N.selection.jQ.removeClass("mq-blur"),d.selectionChanged()):N.show()}).blur(function(){d.blurred=!0,c=setTimeout(function(){I.postOrder("intentionalBlur"),N.clearSelection().endSelection(),o()}),Se(window).bind("blur",m)}),d.blurred=!0,N.hide().parent.blur()}}),me.open(function(l){l.keystroke=function(m,o){this.cursor.parent.keystroke(m,o,this)}}),ke.open(function(l){l.keystroke=function(m,o,c){var d=c.cursor;switch(m){case"Ctrl-Shift-Backspace":case"Ctrl-Backspace":c.ctrlDeleteDir(M);break;case"Shift-Backspace":case"Backspace":c.backspace();break;case"Esc":case"Tab":return void c.escapeDir(j,m,o);case"Shift-Tab":case"Shift-Esc":return void c.escapeDir(M,m,o);case"End":c.notify("move").cursor.insAtRightEnd(d.parent);break;case"Ctrl-End":c.notify("move").cursor.insAtRightEnd(c.root);break;case"Shift-End":for(;d[j];)c.selectRight();break;case"Ctrl-Shift-End":for(;d[j]||d.parent!==c.root;)c.selectRight();break;case"Home":c.notify("move").cursor.insAtLeftEnd(d.parent);break;case"Ctrl-Home":c.notify("move").cursor.insAtLeftEnd(c.root);break;case"Shift-Home":for(;d[M];)c.selectLeft();break;case"Ctrl-Shift-Home":for(;d[M]||d.parent!==c.root;)c.selectLeft();break;case"Left":c.moveLeft();break;case"Shift-Left":c.selectLeft();break;case"Ctrl-Left":break;case"Right":c.moveRight();break;case"Shift-Right":c.selectRight();break;case"Ctrl-Right":break;case"Up":c.moveUp();break;case"Down":c.moveDown();break;case"Shift-Up":if(d[M])for(;d[M];)c.selectLeft();else c.selectLeft();case"Shift-Down":if(d[j])for(;d[j];)c.selectRight();else c.selectRight();case"Ctrl-Up":break;case"Ctrl-Down":break;case"Ctrl-Shift-Del":case"Ctrl-Del":c.ctrlDeleteDir(j);break;case"Shift-Del":case"Del":c.deleteForward();break;case"Meta-A":case"Ctrl-A":for(c.notify("move").cursor.insAtRightEnd(c.root);d[M];)c.selectLeft();break;default:return}o.preventDefault(),c.scrollHoriz()},l.moveOutOf=l.moveTowards=l.deleteOutOf=l.deleteTowards=l.unselectInto=l.selectOutOf=l.selectTowards=function(){n("overridden or never called on this node")}}),me.open(function(l){function m(o,c){var d=o.notify("upDown").cursor,I=c+"Into",N=c+"OutOf";return d[j][I]?d.insAtLeftEnd(d[j][I]):d[M][I]?d.insAtRightEnd(d[M][I]):d.parent.bubble(function(y){var u=y[N];if(u&&(typeof u=="function"&&(u=y[N](d)),u instanceof ke&&d.jumpUpDown(y,u),u!==!0))return!1}),o}this.onNotify(function(o){o!=="move"&&o!=="upDown"||this.show().clearSelection()}),l.escapeDir=function(o,c,d){a(o);var I=this.cursor;if(I.parent!==this.root&&d.preventDefault(),I.parent!==this.root)return I.parent.moveOutOf(o,I),this.notify("move")},Ie.leftRightIntoCmdGoes=function(o){if(o&&o!=="up"&&o!=="down")throw'"up" or "down" required for leftRightIntoCmdGoes option, got "'+o+'"';return o},l.moveDir=function(o){a(o);var c=this.cursor,d=c.options.leftRightIntoCmdGoes;return c.selection?c.insDirOf(o,c.selection.ends[o]):c[o]?c[o].moveTowards(o,c,d):c.parent.moveOutOf(o,c,d),this.notify("move")},l.moveLeft=function(){return this.moveDir(M)},l.moveRight=function(){return this.moveDir(j)},l.moveUp=function(){return m(this,"up")},l.moveDown=function(){return m(this,"down")},this.onNotify(function(o){o!=="upDown"&&(this.upDownCache={})}),this.onNotify(function(o){o==="edit"&&this.show().deleteSelection()}),l.deleteDir=function(o){var c,d;return a(o),c=this.cursor,d=c.selection,this.notify("edit"),d||(c[o]?c[o].deleteTowards(o,c):c.parent.deleteOutOf(o,c)),c[M].siblingDeleted&&c[M].siblingDeleted(c.options,j),c[j].siblingDeleted&&c[j].siblingDeleted(c.options,M),c.parent.bubble("reflow"),this},l.ctrlDeleteDir=function(o){a(o);var c=this.cursor;return!c[M]||c.selection?this.deleteDir():(this.notify("edit"),Pe(c.parent.ends[M],c[M]).remove(),c.insAtDirEnd(M,c.parent),c[M].siblingDeleted&&c[M].siblingDeleted(c.options,j),c[j].siblingDeleted&&c[j].siblingDeleted(c.options,M),c.parent.bubble("reflow"),this)},l.backspace=function(){return this.deleteDir(M)},l.deleteForward=function(){return this.deleteDir(j)},this.onNotify(function(o){o!=="select"&&this.endSelection()}),l.selectDir=function(o){var c,d=this.notify("select").cursor,I=d.selection;a(o),d.anticursor||d.startSelection(),c=d[o],c?I&&I.ends[o]===c&&d.anticursor[-o]!==c?c.unselectInto(o,d):c.selectTowards(o,d):d.parent.selectOutOf(o,d),d.clearSelection(),d.select()||d.show()},l.selectLeft=function(){return this.selectDir(M)},l.selectRight=function(){return this.selectDir(j)}}),Fr=function(){function l(ur){var Ur=Pr();return ur.adopt(Ur,0,0),Ur}function m(ur){var Ur,Nr=ur[0]||Pr();for(Ur=1;Ur<ur.length;Ur+=1)ur[Ur].children().adopt(Nr,Nr.ends[j],0);return Nr}var o=ve.string,c=ve.regex,d=ve.letter,I=ve.any,N=ve.optWhitespace,y=ve.succeed,u=ve.fail,F=d.map(function(ur){return be(ur)}),fe=c(/^[^${}\\_^]/).map(function(ur){return ie(ur)}),_e=c(/^[^\\a-eg-zA-Z]/).or(o("\\").then(c(/^[a-z]+/i).or(c(/^\s+/).result(" ")).or(I))).then(function(ur){var Ur=g[ur];return Ur?Ur(ur).parser():u("unknown command: \\"+ur)}),ee=_e.or(F).or(fe),Ye=o("{").then(function(){return jr}).skip(o("}")),Xe=N.then(Ye.or(ee.map(l))),jr=Xe.many().map(m).skip(N),at=o("[").then(Xe.then(function(ur){return ur.join("latex")!=="]"?y(ur):u()}).many().map(m).skip(N)).skip(o("]")),Kr=jr;return Kr.block=Xe,Kr.optBlock=at,Kr}(),me.open(function(l,m){l.exportLatex=function(){return this.root.latex().replace(/(\\[a-z]+) (?![a-z])/gi,"$1")},l.writeLatex=function(o){var c,d=this.notify("edit").cursor,I=ve.all,N=ve.eof,y=Fr.skip(N).or(I.result(!1)).parse(o);return y&&!y.isEmpty()&&(y.children().adopt(d.parent,d[M],d[j]),c=y.jQize(),c.insertBefore(d.jQ),d[M]=y.ends[j],y.finalizeInsert(d.options,d),y.ends[j][j].siblingCreated&&y.ends[j][j].siblingCreated(d.options,M),y.ends[M][M].siblingCreated&&y.ends[M][M].siblingCreated(d.options,j),d.parent.bubble("reflow")),this},l.renderLatexMath=function(o){var c,d,I=this.root,N=this.cursor,y=ve.all,u=ve.eof,F=Fr.skip(u).or(y.result(!1)).parse(o);I.eachChild("postOrder","dispose"),I.ends[M]=I.ends[j]=0,F&&F.children().adopt(I,0,0),c=I.jQ,F?(d=F.join("html"),c.html(d),I.jQize(c.children()),I.finalizeInsert(N.options)):c.empty(),delete N.selection,N.insAtRightEnd(I)},l.renderLatexText=function(o){var c,d,I,N,y,u,F,fe,_e,ee,Ye=this.root,Xe=this.cursor;if(Ye.jQ.children().slice(1).remove(),Ye.eachChild("postOrder","dispose"),Ye.ends[M]=Ye.ends[j]=0,delete Xe.selection,Xe.show().insAtRightEnd(Ye),c=ve.regex,d=ve.string,I=ve.eof,N=ve.all,y=d("$").then(Fr).skip(d("$").or(I)).map(function(jr){var at,Kr=it(Xe);return Kr.createBlocks(),at=Kr.ends[M],jr.children().adopt(at,0,0),Kr}),u=d("\\$").result("$"),F=u.or(c(/^[^$]/)).map(ie),fe=y.or(F).many(),_e=fe.skip(I).or(N.result(!1)).parse(o)){for(ee=0;ee<_e.length;ee+=1)_e[ee].adopt(Ye,Ye.ends[j],0);Ye.jQize().appendTo(Ye.jQ),Ye.finalizeInsert(Xe.options)}}}),me.open(function(l){gr.p.ignoreNextMousedown=r,l.delegateMouseEvents=function(){var m=this.root.jQ;this.container.bind("mousedown.mathquill",function(o){function c(Xe){N=Se(Xe.target)}function d(Xe){fe.anticursor||fe.startSelection(),F.seek(N,Xe.pageX,Xe.pageY).cursor.select(),N=O}function I(Xe){fe.blink=_e,fe.selection||(F.editable?fe.show():ee.detach()),y.unbind("mousemove",c),Se(Xe.target.ownerDocument).unbind("mousemove",d).unbind("mouseup",I)}var N,y=Se(o.target).closest(".mq-root-block"),u=ke.byId[y.attr(Ee)||m.attr(Ee)],F=u.controller,fe=F.cursor,_e=fe.blink,ee=F.textareaSpan,Ye=F.textarea;o.preventDefault(),o.target.unselectable=!0,fe.options.ignoreNextMousedown(o)||(fe.options.ignoreNextMousedown=r,F.blurred&&(F.editable||y.prepend(ee),Ye.focus()),fe.blink=r,F.seek(Se(o.target),o.pageX,o.pageY).cursor.startSelection(),y.mousemove(c),Se(o.target.ownerDocument).mousemove(d).mouseup(I))})}}),me.open(function(l){l.seek=function(m,o,c){var d,I,N,y=this.notify("select").cursor;return m&&(d=m.attr(Ee)||m.attr(er),d||(I=m.parent(),d=I.attr(Ee)||I.attr(er))),N=d?ke.byId[d]:this.root,n("nodeId is the id of some Node that exists",N),y.clearSelection().show(),N.seek(o,y),this.scrollHoriz(),this}}),me.open(function(l){l.scrollHoriz=function(){var m,o,c,d,I,N=this.cursor,y=N.selection,u=this.root.jQ[0].getBoundingClientRect();if(y)if(c=y.jQ[0].getBoundingClientRect(),d=c.left-(u.left+20),I=c.right-(u.right-20),y.ends[M]===N[j])if(d<0)o=d;else{if(!(I>0))return;o=c.left-I<u.left+20?d:I}else if(I>0)o=I;else{if(!(d<0))return;o=c.right-d>u.right-20?I:d}else if(m=N.jQ[0].getBoundingClientRect().left,m>u.right-20)o=m-(u.right-20);else{if(!(m<u.left+20))return;o=m-(u.left+20)}this.root.jQ.stop().animate({scrollLeft:"+="+o},100)}}),me.open(function(l){gr.p.substituteTextarea=function(){return Se("<textarea autocapitalize=off autocomplete=off autocorrect=off spellcheck=false x-palm-disable-ste-all=true />")[0]},l.createTextarea=function(){var m,o=this.textareaSpan=Se('<span class="mq-textarea"></span>'),c=this.options.substituteTextarea();if(!c.nodeType)throw"substituteTextarea() must return a DOM element, got "+c;c=this.textarea=Se(c).appendTo(o),m=this,m.cursor.selectionChanged=function(){m.selectionChanged()}},l.selectionChanged=function(){var m=this;ye(m.container[0]),m.textareaSelectionTimeout===O&&(m.textareaSelectionTimeout=setTimeout(function(){m.setTextareaSelection()}))},l.setTextareaSelection=function(){this.textareaSelectionTimeout=O;var m="";this.cursor.selection&&(m=this.cursor.selection.join("latex"),this.options.statelessClipboard&&(m="$"+m+"$")),this.selectFn(m)},l.staticMathTextareaEvents=function(){function m(){I.detach(),o.blurred=!0}var o=this,c=(o.root,o.cursor),d=o.textarea,I=o.textareaSpan;this.container.prepend('<span class="mq-selectable">$'+o.exportLatex()+"$</span>"),o.blurred=!0,d.bind("cut paste",!1).bind("copy",function(){o.setTextareaSelection()}).focus(function(){o.blurred=!1}).blur(function(){c.selection&&c.selection.clear(),setTimeout(m)}),o.selectFn=function(N){d.val(N),N&&d.select()}},gr.p.substituteKeyboardEvents=X,l.editablesTextareaEvents=function(){var m=this,o=m.textarea,c=m.textareaSpan,d=this.options.substituteKeyboardEvents(o,this);this.selectFn=function(I){d.select(I)},this.container.prepend(c),this.focusBlurEvents()},l.typedText=function(m){if(m===`
`)return this.handle("enter");var o=this.notify().cursor;o.parent.write(o,m),this.scrollHoriz()},l.cut=function(){var m=this,o=m.cursor;o.selection&&setTimeout(function(){m.notify("edit"),o.parent.bubble("reflow")})},l.copy=function(){this.setTextareaSelection()},l.paste=function(m){this.options.statelessClipboard&&(m=m.slice(0,1)==="$"&&m.slice(-1)==="$"?m.slice(1,-1):"\\text{"+m+"}"),this.writeLatex(m).cursor.show()}}),Br=le(ke,function(l,m){l.finalizeInsert=function(o,c){var d=this;d.postOrder("finalizeTree",o),d.postOrder("contactWeld",c),d.postOrder("blur"),d.postOrder("reflow"),d[j].siblingCreated&&d[j].siblingCreated(o,M),d[M].siblingCreated&&d[M].siblingCreated(o,j),d.bubble("reflow")}}),nr=le(Br,function(l,m){l.init=function(o,c,d){var I=this;m.init.call(I),I.ctrlSeq||(I.ctrlSeq=o),c&&(I.htmlTemplate=c),d&&(I.textTemplate=d)},l.replaces=function(o){o.disown(),this.replacedFragment=o},l.isEmpty=function(){return this.foldChildren(!0,function(o,c){return o&&c.isEmpty()})},l.parser=function(){var o=Fr.block,c=this;return o.times(c.numBlocks()).map(function(d){c.blocks=d;for(var I=0;I<d.length;I+=1)d[I].adopt(c,c.ends[j],0);return c})},l.createLeftOf=function(o){var c=this,d=c.replacedFragment;c.createBlocks(),m.createLeftOf.call(c,o),d&&(d.adopt(c.ends[M],0,0),d.jQ.appendTo(c.ends[M].jQ)),c.finalizeInsert(o.options),c.placeCursor(o)},l.createBlocks=function(){var o,c,d=this,I=d.numBlocks(),N=d.blocks=Array(I);for(o=0;o<I;o+=1)c=N[o]=Pr(),c.adopt(d,d.ends[j],0)},l.placeCursor=function(o){o.insAtRightEnd(this.foldChildren(this.ends[M],function(c,d){return c.isEmpty()?c:d}))},l.moveTowards=function(o,c,d){var I=d&&this[d+"Into"];c.insAtDirEnd(-o,I||this.ends[-o])},l.deleteTowards=function(o,c){this.isEmpty()?c[o]=this.remove()[o]:this.moveTowards(o,c,null)},l.selectTowards=function(o,c){c[-o]=this,c[o]=this[o]},l.selectChildren=function(){return Cr(this,this)},l.unselectInto=function(o,c){c.insAtDirEnd(-o,c.anticursor.ancestors[this.id])},l.seek=function(o,c){function d(u){var F={};return F[M]=u.jQ.offset().left,F[j]=F[M]+u.jQ.outerWidth(),F}var I,N=this,y=d(N);return o<y[M]?c.insLeftOf(N):o>y[j]?c.insRightOf(N):(I=y[M],void N.eachChild(function(u){var F=d(u);return o<F[M]?(o-I<F[M]-o?u[M]?c.insAtRightEnd(u[M]):c.insLeftOf(N):c.insAtLeftEnd(u),!1):o>F[j]?void(u[j]?I=F[j]:y[j]-o<o-F[j]?c.insRightOf(N):c.insAtRightEnd(u)):(u.seek(o,c),!1)}))},l.numBlocks=function(){var o=this.htmlTemplate.match(/&\d+/g);return o?o.length:0},l.html=function(){var o,c,d,I=this,N=I.blocks,y=" mathquill-command-id="+I.id,u=I.htmlTemplate.match(/<[^<>]+>|[^<>]+/g);for(n("no unmatched angle brackets",u.join("")===this.htmlTemplate),o=0,c=u[0];c;o+=1,c=u[o])if(c.slice(-2)==="/>")u[o]=c.slice(0,-2)+y+"/>";else if(c.charAt(0)==="<"){n("not an unmatched top-level close tag",c.charAt(1)!=="/"),u[o]=c.slice(0,-1)+y+">",d=1;do o+=1,c=u[o],n("no missing close tags",c),c.slice(0,2)==="</"?d-=1:c.charAt(0)==="<"&&c.slice(-2)!=="/>"&&(d+=1);while(d>0)}return u.join("").replace(/>&(\d+)/g,function(F,fe){return" mathquill-block-id="+N[fe].id+">"+N[fe].join("html")})},l.latex=function(){return this.foldChildren(this.ctrlSeq,function(o,c){return o+"{"+(c.latex()||" ")+"}"})},l.textTemplate=[""],l.text=function(){var o=this,c=0;return o.foldChildren(o.textTemplate[c],function(d,I){c+=1;var N=I.text();return d&&o.textTemplate[c]==="("&&N[0]==="("&&N.slice(-1)===")"?d+N.slice(1,-1)+o.textTemplate[c]:d+I.text()+(o.textTemplate[c]||"")})}}),tr=le(nr,function(l,m){l.init=function(o,c,d){d||(d=o&&o.length>1?o.slice(1):o),m.init.call(this,o,c,[d])},l.parser=function(){return ve.succeed(this)},l.numBlocks=function(){return 0},l.replaces=function(o){o.remove()},l.createBlocks=r,l.moveTowards=function(o,c){c.jQ.insDirOf(o,this.jQ),c[-o]=this,c[o]=this[o]},l.deleteTowards=function(o,c){c[o]=this.remove()[o]},l.seek=function(o,c){o-this.jQ.offset().left<this.jQ.outerWidth()/2?c.insLeftOf(this):c.insRightOf(this)},l.latex=function(){return this.ctrlSeq},l.text=function(){return this.textTemplate},l.placeCursor=r,l.isEmpty=function(){return!0}}),ie=le(tr,function(l,m){l.init=function(o,c){m.init.call(this,o,"<span>"+(c||o)+"</span>")}}),Ke=le(tr,function(l,m){l.init=function(o,c,d){m.init.call(this,o,'<span class="mq-binary-operator">'+c+"</span>",d)}}),Pr=le(Br,function(l,m){l.join=function(o){return this.foldChildren("",function(c,d){return c+d[o]()})},l.html=function(){return this.join("html")},l.latex=function(){return this.join("latex")},l.text=function(){return this.ends[M]===this.ends[j]&&this.ends[M]!==0?this.ends[M].text():this.join("text")},l.keystroke=function(o,c,d){return!d.options.spaceBehavesLikeTab||o!=="Spacebar"&&o!=="Shift-Spacebar"?m.keystroke.apply(this,arguments):(c.preventDefault(),void d.escapeDir(o==="Shift-Spacebar"?M:j,o,c))},l.moveOutOf=function(o,c,d){var I=d&&this.parent[d+"Into"];!I&&this[o]?c.insAtDirEnd(-o,this[o]):c.insDirOf(o,this.parent)},l.selectOutOf=function(o,c){c.insDirOf(o,this.parent)},l.deleteOutOf=function(o,c){c.unwrapGramp()},l.seek=function(o,c){var d=this.ends[j];if(!d||d.jQ.offset().left+d.jQ.outerWidth()<o)return c.insAtRightEnd(this);if(o<this.ends[M].jQ.offset().left)return c.insAtLeftEnd(this);for(;o<d.jQ.offset().left;)d=d[M];return d.seek(o,c)},l.chToCmd=function(o,c){var d;return o.match(/^[a-eg-zA-Z]$/)?be(o):/^\d$/.test(o)?ne(o):c&&c.typingSlashWritesDivisionSymbol&&o==="/"?g["÷"](o):c&&c.typingAsteriskWritesTimesSymbol&&o==="*"?g["×"](o):(d=Qe[o]||g[o])?d(o):ie(o)},l.write=function(o,c){var d=this.chToCmd(c,o.options);o.selection&&d.replaces(o.replaceSelection()),d.createLeftOf(o.show())},l.focus=function(){return this.jQ.addClass("mq-hasCursor"),this.jQ.removeClass("mq-empty"),this},l.blur=function(){return this.jQ.removeClass("mq-hasCursor"),this.isEmpty()&&this.jQ.addClass("mq-empty"),this}}),Dr.StaticMath=function(l){return le(l.AbstractMathQuill,function(m,o){this.RootBlock=Pr,m.__mathquillify=function(c,d){return this.config(c),o.__mathquillify.call(this,"mq-math-mode"),this.__controller.delegateMouseEvents(),this.__controller.staticMathTextareaEvents(),this},m.init=function(){o.init.apply(this,arguments),this.__controller.root.postOrder("registerInnerField",this.innerFields=[],l.MathField)},m.latex=function(){var c=o.latex.apply(this,arguments);return arguments.length>0&&this.__controller.root.postOrder("registerInnerField",this.innerFields=[],l.MathField),c}})},rt=le(Pr,$),Dr.MathField=function(l){return le(l.EditableField,function(m,o){this.RootBlock=rt,m.__mathquillify=function(c,d){return this.config(c),d>1&&(this.__controller.root.reflow=r),o.__mathquillify.call(this,"mq-editable-field mq-math-mode"),delete this.__controller.root.reflow,this}})},Zr=le(ke,function(l,m){function o(c){var d,I;if(c.jQ[0].normalize(),d=c.jQ[0].firstChild)return n("only node in TextBlock span is Text node",d.nodeType===3),I=wr(d.data),I.jQadd(d),c.children().disown(),I.adopt(c,0,0)}l.ctrlSeq="\\text",l.replaces=function(c){c instanceof Pe?this.replacedText=c.remove().jQ.text():typeof c=="string"&&(this.replacedText=c)},l.jQadd=function(c){m.jQadd.call(this,c),this.ends[M]&&this.ends[M].jQadd(this.jQ[0].firstChild)},l.createLeftOf=function(c){var d,I=this;if(m.createLeftOf.call(this,c),I[j].siblingCreated&&I[j].siblingCreated(c.options,M),I[M].siblingCreated&&I[M].siblingCreated(c.options,j),I.bubble("reflow"),c.insAtRightEnd(I),I.replacedText)for(d=0;d<I.replacedText.length;d+=1)I.write(c,I.replacedText.charAt(d))},l.parser=function(){var c=this,d=ve.string,I=ve.regex,N=ve.optWhitespace;return N.then(d("{")).then(I(/^[^}]*/)).skip(d("}")).map(function(y){return y.length===0?Pe():(wr(y).adopt(c,0,0),c)})},l.textContents=function(){return this.foldChildren("",function(c,d){return c+d.text})},l.text=function(){return'"'+this.textContents()+'"'},l.latex=function(){var c=this.textContents();return c.length===0?"":"\\text{"+c+"}"},l.html=function(){return'<span class="mq-text-mode" mathquill-command-id='+this.id+">"+this.textContents()+"</span>"},l.moveTowards=function(c,d){d.insAtDirEnd(-c,this)},l.moveOutOf=function(c,d){d.insDirOf(c,this)},l.unselectInto=l.moveTowards,l.selectTowards=nr.prototype.selectTowards,l.deleteTowards=nr.prototype.deleteTowards,l.selectOutOf=function(c,d){d.insDirOf(c,this)},l.deleteOutOf=function(c,d){this.isEmpty()&&d.insRightOf(this)},l.write=function(c,d){var I,N;c.show().deleteSelection(),d!=="$"?c[M]?c[M].appendText(d):wr(d).createLeftOf(c):this.isEmpty()?(c.insRightOf(this),ie("\\$","$").createLeftOf(c)):c[j]?c[M]?(I=Zr(),N=this.ends[M],N.disown().jQ.detach(),N.adopt(I,0,0),c.insLeftOf(this),m.createLeftOf.call(I,c)):c.insLeftOf(this):c.insRightOf(this)},l.seek=function(c,d){var I,N,y,u,F,fe,_e,ee;for(d.hide(),I=o(this),N=this.jQ.width()/this.text.length,y=Math.round((c-this.jQ.offset().left)/N),y<=0?d.insAtLeftEnd(this):y>=I.text.length?d.insAtRightEnd(this):d.insLeftOf(I.splitRight(y)),u=c-d.show().offset().left,F=u&&u<0?M:j,fe=F;d[F]&&u*fe>0;)d[F].moveTowards(F,d),fe=u,u=c-d.offset().left;F*u<-F*fe&&d[-F].moveTowards(-F,d),d.anticursor?d.anticursor.parent===this&&(_e=d[M]&&d[M].text.length,this.anticursorPosition===_e?d.anticursor=Ce.copy(d):(this.anticursorPosition<_e?(ee=d[M].splitRight(this.anticursorPosition),d[M]=ee):ee=d[j].splitRight(this.anticursorPosition-_e),d.anticursor=Ce(this,ee[M],ee))):this.anticursorPosition=d[M]&&d[M].text.length},l.blur=function(c){Pr.prototype.blur.call(this),c&&(this.textContents()===""?(this.remove(),c[M]===this?c[M]=this[M]:c[j]===this&&(c[j]=this[j])):o(this))},l.focus=Pr.prototype.focus}),wr=le(ke,function(l,m){function o(c,d){return d.charAt(c===M?0:-1+d.length)}l.init=function(c){m.init.call(this),this.text=c},l.jQadd=function(c){this.dom=c,this.jQ=Se(c)},l.jQize=function(){return this.jQadd(document.createTextNode(this.text))},l.appendText=function(c){this.text+=c,this.dom.appendData(c)},l.prependText=function(c){this.text=c+this.text,this.dom.insertData(0,c)},l.insTextAtDirEnd=function(c,d){a(d),d===j?this.appendText(c):this.prependText(c)},l.splitRight=function(c){var d=wr(this.text.slice(c)).adopt(this.parent,this,this[j]);return d.jQadd(this.dom.splitText(c)),this.text=this.text.slice(0,c),d},l.moveTowards=function(c,d){var I,N;return a(c),I=o(-c,this.text),N=this[-c],N?N.insTextAtDirEnd(I,c):wr(I).createDir(-c,d),this.deleteTowards(c,d)},l.latex=function(){return this.text},l.deleteTowards=function(c,d){this.text.length>1?c===j?(this.dom.deleteData(0,1),this.text=this.text.slice(1)):(this.dom.deleteData(-1+this.text.length,1),this.text=this.text.slice(0,-1)):(this.remove(),this.jQ.remove(),d[c]=this[c])},l.selectTowards=function(c,d){var I,N,y,u;return a(c),I=d.anticursor,N=o(-c,this.text),I[c]===this?(y=wr(N).createDir(c,d),I[c]=y,d.insDirOf(c,y)):(u=this[-c],u?u.insTextAtDirEnd(N,c):(y=wr(N).createDir(-c,d),y.jQ.insDirOf(-c,d.selection.jQ)),this.text.length===1&&I[-c]===this&&(I[-c]=this[-c])),this.deleteTowards(c,d)}}),g.text=g.textnormal=g.textrm=g.textup=g.textmd=Zr,g.em=g.italic=g.italics=g.emph=g.textit=g.textsl=L("\\textit","i",'class="mq-text-mode"'),g.strong=g.bold=g.textbf=L("\\textbf","b",'class="mq-text-mode"'),g.sf=g.textsf=L("\\textsf","span",'class="mq-sans-serif mq-text-mode"'),g.tt=g.texttt=L("\\texttt","span",'class="mq-monospace mq-text-mode"'),g.textsc=L("\\textsc","span",'style="font-variant:small-caps" class="mq-text-mode"'),g.uppercase=L("\\uppercase","span",'style="text-transform:uppercase" class="mq-text-mode"'),g.lowercase=L("\\lowercase","span",'style="text-transform:lowercase" class="mq-text-mode"'),it=le(nr,function(l,m){l.init=function(o){m.init.call(this,"$"),this.cursor=o},l.htmlTemplate='<span class="mq-math-mode">&0</span>',l.createBlocks=function(){m.createBlocks.call(this),this.ends[M].cursor=this.cursor,this.ends[M].write=function(o,c){c!=="$"?Pr.prototype.write.call(this,o,c):this.isEmpty()?(o.insRightOf(this.parent),this.parent.deleteTowards(dir,o),ie("\\$","$").createLeftOf(o.show())):o[j]?o[M]?Pr.prototype.write.call(this,o,c):o.insLeftOf(this.parent):o.insRightOf(this.parent)}},l.latex=function(){return"$"+this.ends[M].latex()+"$"}}),tt=le(rt,function(l,m){l.keystroke=function(o){if(o!=="Spacebar"&&o!=="Shift-Spacebar")return m.keystroke.apply(this,arguments)},l.write=function(o,c){if(o.show().deleteSelection(),c==="$")it(o).createLeftOf(o);else{var d;c==="<"?d="&lt;":c===">"&&(d="&gt;"),ie(c,d).createLeftOf(o)}}}),Dr.TextField=function(l){return le(l.EditableField,function(m,o){this.RootBlock=tt,m.__mathquillify=function(){return o.__mathquillify.call(this,"mq-editable-field mq-text-mode")},m.latex=function(c){return arguments.length>0?(this.__controller.renderLatexText(c),this.__controller.blurred&&this.__controller.cursor.hide().parent.blur(),this):this.__controller.exportLatex()}})},Qe["\\"]=le(nr,function(l,m){l.ctrlSeq="\\",l.replaces=function(o){this._replacedFragment=o.disown(),this.isEmpty=function(){return!1}},l.htmlTemplate='<span class="mq-latex-command-input mq-non-leaf">\\<span>&0</span></span>',l.textTemplate=["\\"],l.createBlocks=function(){m.createBlocks.call(this),this.ends[M].focus=function(){return this.parent.jQ.addClass("mq-hasCursor"),this.isEmpty()&&this.parent.jQ.removeClass("mq-empty"),this},this.ends[M].blur=function(){return this.parent.jQ.removeClass("mq-hasCursor"),this.isEmpty()&&this.parent.jQ.addClass("mq-empty"),this},this.ends[M].write=function(o,c){o.show().deleteSelection(),c.match(/[a-z]/i)?ie(c).createLeftOf(o):(this.parent.renderCommand(o),c==="\\"&&this.isEmpty()||this.parent.parent.write(o,c))},this.ends[M].keystroke=function(o,c,d){return o==="Tab"||o==="Enter"||o==="Spacebar"?(this.parent.renderCommand(d.cursor),void c.preventDefault()):m.keystroke.apply(this,arguments)}},l.createLeftOf=function(o){if(m.createLeftOf.call(this,o),this._replacedFragment){var c=this.jQ[0];this.jQ=this._replacedFragment.jQ.addClass("mq-blur").bind("mousedown mousemove",function(d){return Se(d.target=c).trigger(d),!1}).insertBefore(this.jQ).add(this.jQ)}},l.latex=function(){return"\\"+this.ends[M].latex()+" "},l.renderCommand=function(o){var c,d;this.jQ=this.jQ.last(),this.remove(),this[j]?o.insLeftOf(this[j]):o.insAtRightEnd(this.parent),c=this.ends[M].latex(),c||(c=" "),d=g[c],d?(d=d(c),this._replacedFragment&&d.replaces(this._replacedFragment),d.createLeftOf(o)):(d=Zr(),d.replaces(c),d.createLeftOf(o),o.insRightOf(d),this._replacedFragment&&this._replacedFragment.remove())}}),g.notin=g.cong=g.equiv=g.oplus=g.otimes=le(Ke,function(l,m){l.init=function(o){m.init.call(this,"\\"+o+" ","&"+o+";")}}),g["≠"]=g.ne=g.neq=i(Ke,"\\ne ","&ne;"),g["∗"]=g.ast=g.star=g.loast=g.lowast=i(Ke,"\\ast ","&lowast;"),g.therefor=g.therefore=i(Ke,"\\therefore ","&there4;"),g.cuz=g.because=i(Ke,"\\because ","&#8757;"),g.prop=g.propto=i(Ke,"\\propto ","&prop;"),g["≈"]=g.asymp=g.approx=i(Ke,"\\approx ","&asymp;"),g.isin=g.in=i(Ke,"\\in ","&isin;"),g.ni=g.contains=i(Ke,"\\ni ","&ni;"),g.notni=g.niton=g.notcontains=g.doesnotcontain=i(Ke,"\\not\\ni ","&#8716;"),g.sub=g.subset=i(Ke,"\\subset ","&sub;"),g.sup=g.supset=g.superset=i(Ke,"\\supset ","&sup;"),g.nsub=g.notsub=g.nsubset=g.notsubset=i(Ke,"\\not\\subset ","&#8836;"),g.nsup=g.notsup=g.nsupset=g.notsupset=g.nsuperset=g.notsuperset=i(Ke,"\\not\\supset ","&#8837;"),g.sube=g.subeq=g.subsete=g.subseteq=i(Ke,"\\subseteq ","&sube;"),g.supe=g.supeq=g.supsete=g.supseteq=g.supersete=g.superseteq=i(Ke,"\\supseteq ","&supe;"),g.nsube=g.nsubeq=g.notsube=g.notsubeq=g.nsubsete=g.nsubseteq=g.notsubsete=g.notsubseteq=i(Ke,"\\not\\subseteq ","&#8840;"),g.nsupe=g.nsupeq=g.notsupe=g.notsupeq=g.nsupsete=g.nsupseteq=g.notsupsete=g.notsupseteq=g.nsupersete=g.nsuperseteq=g.notsupersete=g.notsuperseteq=i(Ke,"\\not\\supseteq ","&#8841;"),g.N=g.naturals=g.Naturals=i(ie,"\\mathbb{N}","&#8469;"),g.P=g.primes=g.Primes=g.projective=g.Projective=g.probability=g.Probability=i(ie,"\\mathbb{P}","&#8473;"),g.Z=g.integers=g.Integers=i(ie,"\\mathbb{Z}","&#8484;"),g.Q=g.rationals=g.Rationals=i(ie,"\\mathbb{Q}","&#8474;"),g.R=g.reals=g.Reals=i(ie,"\\mathbb{R}","&#8477;"),g.C=g.complex=g.Complex=g.complexes=g.Complexes=g.complexplane=g.Complexplane=g.ComplexPlane=i(ie,"\\mathbb{C}","&#8450;"),g.H=g.Hamiltonian=g.quaternions=g.Quaternions=i(ie,"\\mathbb{H}","&#8461;"),g.quad=g.emsp=i(ie,"\\quad ","    "),g.qquad=i(ie,"\\qquad ","        "),g.diamond=i(ie,"\\diamond ","&#9671;"),g.bigtriangleup=i(ie,"\\bigtriangleup ","&#9651;"),g.ominus=i(ie,"\\ominus ","&#8854;"),g.uplus=i(ie,"\\uplus ","&#8846;"),g.bigtriangledown=i(ie,"\\bigtriangledown ","&#9661;"),g.sqcap=i(ie,"\\sqcap ","&#8851;"),g.triangleleft=i(ie,"\\triangleleft ","&#8882;"),g.sqcup=i(ie,"\\sqcup ","&#8852;"),g.triangleright=i(ie,"\\triangleright ","&#8883;"),g.odot=g.circledot=i(ie,"\\odot ","&#8857;"),g.bigcirc=i(ie,"\\bigcirc ","&#9711;"),g.dagger=i(ie,"\\dagger ","&#0134;"),g.ddagger=i(ie,"\\ddagger ","&#135;"),g.wr=i(ie,"\\wr ","&#8768;"),g.amalg=i(ie,"\\amalg ","&#8720;"),g.models=i(ie,"\\models ","&#8872;"),g.prec=i(ie,"\\prec ","&#8826;"),g.succ=i(ie,"\\succ ","&#8827;"),g.preceq=i(ie,"\\preceq ","&#8828;"),g.succeq=i(ie,"\\succeq ","&#8829;"),g.simeq=i(ie,"\\simeq ","&#8771;"),g.mid=i(ie,"\\mid ","&#8739;"),g.ll=i(ie,"\\ll ","&#8810;"),g.gg=i(ie,"\\gg ","&#8811;"),g.parallel=i(ie,"\\parallel ","&#8741;"),g.nparallel=i(ie,"\\nparallel ","&#8742;"),g.bowtie=i(ie,"\\bowtie ","&#8904;"),g.sqsubset=i(ie,"\\sqsubset ","&#8847;"),g.sqsupset=i(ie,"\\sqsupset ","&#8848;"),g.smile=i(ie,"\\smile ","&#8995;"),g.sqsubseteq=i(ie,"\\sqsubseteq ","&#8849;"),g.sqsupseteq=i(ie,"\\sqsupseteq ","&#8850;"),g.doteq=i(ie,"\\doteq ","&#8784;"),g.frown=i(ie,"\\frown ","&#8994;"),g.vdash=i(ie,"\\vdash ","&#8870;"),g.dashv=i(ie,"\\dashv ","&#8867;"),g.nless=i(ie,"\\nless ","&#8814;"),g.ngtr=i(ie,"\\ngtr ","&#8815;"),g.longleftarrow=i(ie,"\\longleftarrow ","&#8592;"),g.longrightarrow=i(ie,"\\longrightarrow ","&#8594;"),g.Longleftarrow=i(ie,"\\Longleftarrow ","&#8656;"),g.Longrightarrow=i(ie,"\\Longrightarrow ","&#8658;"),g.longleftrightarrow=i(ie,"\\longleftrightarrow ","&#8596;"),g.updownarrow=i(ie,"\\updownarrow ","&#8597;"),g.Longleftrightarrow=i(ie,"\\Longleftrightarrow ","&#8660;"),g.Updownarrow=i(ie,"\\Updownarrow ","&#8661;"),g.mapsto=i(ie,"\\mapsto ","&#8614;"),g.nearrow=i(ie,"\\nearrow ","&#8599;"),g.hookleftarrow=i(ie,"\\hookleftarrow ","&#8617;"),g.hookrightarrow=i(ie,"\\hookrightarrow ","&#8618;"),g.searrow=i(ie,"\\searrow ","&#8600;"),g.leftharpoonup=i(ie,"\\leftharpoonup ","&#8636;"),g.rightharpoonup=i(ie,"\\rightharpoonup ","&#8640;"),g.swarrow=i(ie,"\\swarrow ","&#8601;"),g.leftharpoondown=i(ie,"\\leftharpoondown ","&#8637;"),g.rightharpoondown=i(ie,"\\rightharpoondown ","&#8641;"),g.nwarrow=i(ie,"\\nwarrow ","&#8598;"),g.ldots=i(ie,"\\ldots ","&#8230;"),g.cdots=i(ie,"\\cdots ","&#8943;"),g.vdots=i(ie,"\\vdots ","&#8942;"),g.ddots=i(ie,"\\ddots ","&#8945;"),g.surd=i(ie,"\\surd ","&#8730;"),g.triangle=i(ie,"\\triangle ","&#9651;"),g.ell=i(ie,"\\ell ","&#8467;"),g.top=i(ie,"\\top ","&#8868;"),g.flat=i(ie,"\\flat ","&#9837;"),g.natural=i(ie,"\\natural ","&#9838;"),g.sharp=i(ie,"\\sharp ","&#9839;"),g.wp=i(ie,"\\wp ","&#8472;"),g.bot=i(ie,"\\bot ","&#8869;"),g.clubsuit=i(ie,"\\clubsuit ","&#9827;"),g.diamondsuit=i(ie,"\\diamondsuit ","&#9826;"),g.heartsuit=i(ie,"\\heartsuit ","&#9825;"),g.spadesuit=i(ie,"\\spadesuit ","&#9824;"),g.parallelogram=i(ie,"\\parallelogram ","&#9649;"),g.square=i(ie,"\\square ","&#11036;"),g.oint=i(ie,"\\oint ","&#8750;"),g.bigcap=i(ie,"\\bigcap ","&#8745;"),g.bigcup=i(ie,"\\bigcup ","&#8746;"),g.bigsqcup=i(ie,"\\bigsqcup ","&#8852;"),g.bigvee=i(ie,"\\bigvee ","&#8744;"),g.bigwedge=i(ie,"\\bigwedge ","&#8743;"),g.bigodot=i(ie,"\\bigodot ","&#8857;"),g.bigotimes=i(ie,"\\bigotimes ","&#8855;"),g.bigoplus=i(ie,"\\bigoplus ","&#8853;"),g.biguplus=i(ie,"\\biguplus ","&#8846;"),g.lfloor=i(ie,"\\lfloor ","&#8970;"),g.rfloor=i(ie,"\\rfloor ","&#8971;"),g.lceil=i(ie,"\\lceil ","&#8968;"),g.rceil=i(ie,"\\rceil ","&#8969;"),g.opencurlybrace=g.lbrace=i(ie,"\\lbrace ","{"),g.closecurlybrace=g.rbrace=i(ie,"\\rbrace ","}"),g.lbrack=i(ie,"["),g.rbrack=i(ie,"]"),g.slash=i(ie,"/"),g.vert=i(ie,"|"),g.perp=g.perpendicular=i(ie,"\\perp ","&perp;"),g.nabla=g.del=i(ie,"\\nabla ","&nabla;"),g.hbar=i(ie,"\\hbar ","&#8463;"),g.AA=g.Angstrom=g.angstrom=i(ie,"\\text\\AA ","&#8491;"),g.ring=g.circ=g.circle=i(ie,"\\circ ","&#8728;"),g.bull=g.bullet=i(ie,"\\bullet ","&bull;"),g.setminus=g.smallsetminus=i(ie,"\\setminus ","&#8726;"),g.not=g["¬"]=g.neg=i(ie,"\\neg ","&not;"),g["…"]=g.dots=g.ellip=g.hellip=g.ellipsis=g.hellipsis=i(ie,"\\dots ","&hellip;"),g.converges=g.darr=g.dnarr=g.dnarrow=g.downarrow=i(ie,"\\downarrow ","&darr;"),g.dArr=g.dnArr=g.dnArrow=g.Downarrow=i(ie,"\\Downarrow ","&dArr;"),g.diverges=g.uarr=g.uparrow=i(ie,"\\uparrow ","&uarr;"),g.uArr=g.Uparrow=i(ie,"\\Uparrow ","&uArr;"),g.to=i(Ke,"\\to ","&rarr;"),g.rarr=g.rightarrow=i(ie,"\\rightarrow ","&rarr;"),g.implies=i(Ke,"\\Rightarrow ","&rArr;"),g.rArr=g.Rightarrow=i(ie,"\\Rightarrow ","&rArr;"),g.gets=i(Ke,"\\gets ","&larr;"),g.larr=g.leftarrow=i(ie,"\\leftarrow ","&larr;"),g.impliedby=i(Ke,"\\Leftarrow ","&lArr;"),g.lArr=g.Leftarrow=i(ie,"\\Leftarrow ","&lArr;"),g.harr=g.lrarr=g.leftrightarrow=i(ie,"\\leftrightarrow ","&harr;"),g.iff=i(Ke,"\\Leftrightarrow ","&hArr;"),g.hArr=g.lrArr=g.Leftrightarrow=i(ie,"\\Leftrightarrow ","&hArr;"),g.Re=g.Real=g.real=i(ie,"\\Re ","&real;"),g.Im=g.imag=g.image=g.imagin=g.imaginary=g.Imaginary=i(ie,"\\Im ","&image;"),g.part=g.partial=i(ie,"\\partial ","&part;"),g.infty=g.infin=g.infinity=i(ie,"\\infty ","&infin;"),g.alef=g.alefsym=g.aleph=g.alephsym=i(ie,"\\aleph ","&alefsym;"),g.xist=g.xists=g.exist=g.exists=i(ie,"\\exists ","&exist;"),g.nexists=g.nexist=i(ie,"\\nexists ","&#8708;"),g.and=g.land=g.wedge=i(ie,"\\wedge ","&and;"),g.or=g.lor=g.vee=i(ie,"\\vee ","&or;"),g.o=g.O=g.empty=g.emptyset=g.oslash=g.Oslash=g.nothing=g.varnothing=i(Ke,"\\varnothing ","&empty;"),g.cup=g.union=i(Ke,"\\cup ","&cup;"),g.cap=g.intersect=g.intersection=i(Ke,"\\cap ","&cap;"),g.deg=g.degree=i(ie,"\\degree ","&deg;"),g.ang=g.angle=i(ie,"\\angle ","&ang;"),g.measuredangle=i(ie,"\\measuredangle ","&#8737;"),ne=le(ie,function(l,m){l.createLeftOf=function(o){o.options.autoSubscriptNumerals&&o.parent!==o.parent.parent.sub&&(o[M]instanceof de&&o[M].isItalic!==!1||o[M]instanceof H&&o[M][M]instanceof de&&o[M][M].isItalic!==!1)?(g._().createLeftOf(o),m.createLeftOf.call(this,o),o.insRightOf(o.parent.parent)):m.createLeftOf.call(this,o)}}),de=le(tr,function(l,m){l.init=function(o,c){m.init.call(this,o,"<var>"+(c||o)+"</var>")},l.text=function(){var o=this.ctrlSeq;return this.isPartOfOperator?o[0]=="\\"?o=o.slice(1,o.length):o[o.length-1]==" "&&(o=o.slice(0,-1)):(!this[M]||this[M]instanceof de||this[M]instanceof Ke||this[M].ctrlSeq==="\\ "||(o="*"+o),!this[j]||this[j]instanceof Ke||this[j]instanceof H||(o+="*")),o}}),gr.p.autoCommands={_maxLength:0},Ie.autoCommands=function(l){var m,o,c,d,I;if(!/^[a-z]+(?: [a-z]+)*$/i.test(l))throw'"'+l+'" not a space-delimited list of only letters';for(m=l.split(" "),o={},c=0,d=0;d<m.length;d+=1){if(I=m[d],I.length<2)throw'autocommand "'+I+'" not minimum length of 2';if(g[I]===Jr)throw'"'+I+'" is a built-in operator name';o[I]=1,c=cr(c,I.length)}return o._maxLength=c,o},be=le(de,function(l,m){function o(c){return!c||c instanceof Ke||c instanceof te}l.init=function(c){return m.init.call(this,this.letter=c)},l.createLeftOf=function(c){var d,I,N,y,u;if(m.createLeftOf.apply(this,arguments),d=c.options.autoCommands,I=d._maxLength,I>0){for(N="",y=this,u=0;y instanceof be&&y.ctrlSeq===y.letter&&u<I;)N=y.letter+N,y=y[M],u+=1;for(;N.length;){if(d.hasOwnProperty(N)){for(u=1,y=this;u<N.length;u+=1,y=y[M]);return Pe(y,this).remove(),c[M]=y[M],g[N](N).createLeftOf(c)}N=N.slice(1)}}},l.italicize=function(c){return this.isItalic=c,this.isPartOfOperator=!c,this.jQ.toggleClass("mq-operator-name",!c),this},l.finalizeTree=l.siblingDeleted=l.siblingCreated=function(c,d){d!==M&&this[j]instanceof be||this.autoUnItalicize(c)},l.autoUnItalicize=function(c){var d,I,N,y,u,F,fe,_e,ee,Ye,Xe,jr,at=c.autoOperatorNames;if(at._maxLength!==0){for(d=this.letter,I=this[M];I instanceof be;I=I[M])d=I.letter+d;for(N=this[j];N instanceof be;N=N[j])d+=N.letter;Pe(I[j]||this.parent.ends[M],N[M]||this.parent.ends[j]).each(function(Kr){Kr.italicize(!0).jQ.removeClass("mq-first mq-last mq-followed-by-supsub"),Kr.ctrlSeq=Kr.letter});e:for(y=0,u=I[j]||this.parent.ends[M];y<d.length;y+=1,u=u[j])for(F=Rr(at._maxLength,d.length-y);F>0;F-=1)if(fe=d.slice(y,y+F),at.hasOwnProperty(fe)){for(_e=0,ee=u;_e<F;_e+=1,ee=ee[j])ee.italicize(!1),Ye=ee;Xe=Ze.hasOwnProperty(fe),u.ctrlSeq=(Xe?"\\":"\\operatorname{")+u.ctrlSeq,Ye.ctrlSeq+=Xe?" ":"}",he.hasOwnProperty(fe)&&Ye[M][M][M].jQ.addClass("mq-last"),o(u[M])||u.jQ.addClass("mq-first"),o(Ye[j])||(Ye[j]instanceof H?(jr=Ye[j],(jr.siblingCreated=jr.siblingDeleted=function(){jr.jQ.toggleClass("mq-after-operator-name",!(jr[j]instanceof ar))})()):Ye.jQ.toggleClass("mq-last",!(Ye[j]instanceof ar))),y+=F-1,u=Ye;continue e}}}}),Ze={},dr=gr.p.autoOperatorNames={_maxLength:9},he={limsup:1,liminf:1,projlim:1,injlim:1},function(){var l,m,o,c,d="arg deg det dim exp gcd hom inf ker lg lim ln log max min sup limsup liminf injlim projlim Pr".split(" ");for(l=0;l<d.length;l+=1)Ze[d[l]]=dr[d[l]]=1;for(m="sin cos tan arcsin arccos arctan sinh cosh tanh sec csc cot coth".split(" "),l=0;l<m.length;l+=1)Ze[m[l]]=1;for(o="sin cos tan sec cosec csc cotan cot ctg".split(" "),l=0;l<o.length;l+=1)dr[o[l]]=dr["arc"+o[l]]=dr[o[l]+"h"]=dr["ar"+o[l]+"h"]=dr["arc"+o[l]+"h"]=1;for(c="gcf hcf lcm proj span".split(" "),l=0;l<c.length;l+=1)dr[c[l]]=1}(),Ie.autoOperatorNames=function(l){var m,o,c,d,I;if(!/^[a-z]+(?: [a-z]+)*$/i.test(l))throw'"'+l+'" not a space-delimited list of only letters';for(m=l.split(" "),o={},c=0,d=0;d<m.length;d+=1){if(I=m[d],I.length<2)throw'"'+I+'" not minimum length of 2';o[I]=1,c=cr(c,I.length)}return o._maxLength=c,o},Jr=le(tr,function(l,m){l.init=function(o){this.ctrlSeq=o},l.createLeftOf=function(o){var c,d=this.ctrlSeq;for(c=0;c<d.length;c+=1)be(d.charAt(c)).createLeftOf(o)},l.parser=function(){var o,c=this.ctrlSeq,d=Pr();for(o=0;o<c.length;o+=1)be(c.charAt(o)).adopt(d,d.ends[j],0);return ve.succeed(d.children())}});for(Qr in dr)dr.hasOwnProperty(Qr)&&(g[Qr]=Jr);g.operatorname=le(nr,function(l){l.createLeftOf=r,l.numBlocks=function(){return 1},l.parser=function(){return Fr.block.map(function(m){return m.children()})}}),g.f=le(be,function(l,m){l.init=function(){tr.p.init.call(this,this.letter="f",'<var class="mq-f">f</var>')},l.italicize=function(o){return this.jQ.html("f").toggleClass("mq-f",o),m.italicize.apply(this,arguments)}}),g[" "]=g.space=i(ie,"\\ ","&nbsp;"),g["'"]=g.prime=i(ie,"'","&prime;"),g["″"]=g.dprime=i(ie,"″","&Prime;"),g.backslash=i(ie,"\\backslash ","\\"),Qe["\\"]||(Qe["\\"]=g.backslash),g.$=i(ie,"\\$","$"),J=le(tr,function(l,m){l.init=function(o,c){m.init.call(this,o,'<span class="mq-nonSymbola">'+(c||o)+"</span>")}}),g["@"]=J,g["&"]=i(J,"\\&","&amp;"),g["%"]=i(J,"\\%","%"),g.alpha=g.beta=g.gamma=g.delta=g.zeta=g.eta=g.theta=g.iota=g.kappa=g.mu=g.nu=g.xi=g.rho=g.sigma=g.tau=g.chi=g.psi=g.omega=le(de,function(l,m){l.init=function(o){m.init.call(this,"\\"+o+" ","&"+o+";")}}),g.phi=i(de,"\\phi ","&#981;"),g.phiv=g.varphi=i(de,"\\varphi ","&phi;"),g.epsilon=i(de,"\\epsilon ","&#1013;"),g.epsiv=g.varepsilon=i(de,"\\varepsilon ","&epsilon;"),g.piv=g.varpi=i(de,"\\varpi ","&piv;"),g.sigmaf=g.sigmav=g.varsigma=i(de,"\\varsigma ","&sigmaf;"),g.thetav=g.vartheta=g.thetasym=i(de,"\\vartheta ","&thetasym;"),g.upsilon=g.upsi=i(de,"\\upsilon ","&upsilon;"),g.gammad=g.Gammad=g.digamma=i(de,"\\digamma ","&#989;"),g.kappav=g.varkappa=i(de,"\\varkappa ","&#1008;"),g.rhov=g.varrho=i(de,"\\varrho ","&#1009;"),g.pi=g.π=i(J,"\\pi ","&pi;"),g.lambda=i(J,"\\lambda ","&lambda;"),g.Upsilon=g.Upsi=g.upsih=g.Upsih=i(tr,"\\Upsilon ",'<var style="font-family: serif">&upsih;</var>'),g.Gamma=g.Delta=g.Theta=g.Lambda=g.Xi=g.Pi=g.Sigma=g.Phi=g.Psi=g.Omega=g.forall=le(ie,function(l,m){l.init=function(o){m.init.call(this,"\\"+o+" ","&"+o+";")}}),K=le(nr,function(l){l.init=function(m){this.latex=m},l.createLeftOf=function(m){var o=Fr.parse(this.latex);o.children().adopt(m.parent,m[M],m[j]),m[M]=o.ends[j],o.jQize().insertBefore(m.jQ),o.finalizeInsert(m.options,m),o.ends[j][j].siblingCreated&&o.ends[j][j].siblingCreated(m.options,M),o.ends[M][M].siblingCreated&&o.ends[M][M].siblingCreated(m.options,j),m.parent.bubble("reflow")},l.parser=function(){var m=Fr.parse(this.latex).children();return ve.succeed(m)}}),g["¹"]=i(K,"^1"),g["²"]=i(K,"^2"),g["³"]=i(K,"^3"),g["¼"]=i(K,"\\frac14"),g["½"]=i(K,"\\frac12"),g["¾"]=i(K,"\\frac34"),W=le(Ke,function(l){l.init=ie.prototype.init,l.contactWeld=l.siblingCreated=l.siblingDeleted=function(m,o){function c(d){return d[M]?d[M]instanceof Ke||/^[,;:\(\[]$/.test(d[M].ctrlSeq)?"":"mq-binary-operator":d.parent&&d.parent.parent&&d.parent.parent.isStyleBlock()?c(d.parent.parent):""}if(o!==j)return this.jQ[0].className=c(this),this}}),g["+"]=i(W,"+","+"),g["–"]=g["-"]=i(W,"-","&minus;"),g["±"]=g.pm=g.plusmn=g.plusminus=i(W,"\\pm ","&plusmn;"),g.mp=g.mnplus=g.minusplus=i(W,"\\mp ","&#8723;"),Qe["*"]=g.sdot=g.cdot=i(Ke,"\\cdot ","&middot;","*"),xr=le(Ke,function(l,m){l.init=function(o,c){this.data=o,this.strict=c;var d=c?"Strict":"";m.init.call(this,o["ctrlSeq"+d],o["html"+d],o["text"+d])},l.swap=function(o){this.strict=o;var c=o?"Strict":"";this.ctrlSeq=this.data["ctrlSeq"+c],this.jQ.html(this.data["html"+c]),this.textTemplate=[this.data["text"+c]]},l.deleteTowards=function(o,c){return o!==M||this.strict?void m.deleteTowards.apply(this,arguments):(this.swap(!0),void this.bubble("reflow"))}}),se={ctrlSeq:"\\le ",html:"&le;",text:"≤",ctrlSeqStrict:"<",htmlStrict:"&lt;",textStrict:"<"},He={ctrlSeq:"\\ge ",html:"&ge;",text:"≥",ctrlSeqStrict:">",htmlStrict:"&gt;",textStrict:">"},g["<"]=g.lt=i(xr,se,!0),g[">"]=g.gt=i(xr,He,!0),g["≤"]=g.le=g.leq=i(xr,se,!1),g["≥"]=g.ge=g.geq=i(xr,He,!1),hr=le(Ke,function(l,m){l.init=function(){m.init.call(this,"=","=")},l.createLeftOf=function(o){return o[M]instanceof xr&&o[M].strict?(o[M].swap(!1),void o[M].bubble("reflow")):void m.createLeftOf.apply(this,arguments)}}),g["="]=hr,g["×"]=g.times=i(Ke,"\\times ","&times;","[x]"),g["÷"]=g.div=g.divide=g.divides=i(Ke,"\\div ","&divide;","[/]"),Qe["~"]=g.sim=i(Ke,"\\sim ","~","~"),ye=r,st=document.createElement("div"),Mr=st.style,ht={transform:1,WebkitTransform:1,MozTransform:1,OTransform:1,msTransform:1};for(q in ht)if(q in Mr){Or=q;break}Or?We=function(l,m,o){l.css(Or,"scale("+m+","+o+")")}:"filter"in Mr?(ye=function(l){l.className=l.className},We=function(l,m,o){function c(){l.css("marginRight",(d.width()-1)*(m-1)/m+"px")}var d,I;m/=1+(o-1)/2,l.css("fontSize",o+"em"),l.hasClass("mq-matrixed-container")||l.addClass("mq-matrixed-container").wrapInner('<span class="mq-matrixed"></span>'),d=l.children().css("filter","progid:DXImageTransform.Microsoft.Matrix(M11="+m+",SizingMethod='auto expand')"),c(),I=setInterval(c),Se(window).load(function(){clearTimeout(I),c()})}):We=function(l,m,o){l.css("fontSize",o+"em")},D=le(nr,function(l,m){l.init=function(o,c,d){m.init.call(this,o,"<"+c+" "+d+">&0</"+c+">")}}),g.mathrm=i(D,"\\mathrm","span",'class="mq-roman mq-font"'),g.mathit=i(D,"\\mathit","i",'class="mq-font"'),g.mathbf=i(D,"\\mathbf","b",'class="mq-font"'),g.mathsf=i(D,"\\mathsf","span",'class="mq-sans-serif mq-font"'),g.mathtt=i(D,"\\mathtt","span",'class="mq-monospace mq-font"'),g.underline=i(D,"\\underline","span",'class="mq-non-leaf mq-underline"'),g.overline=g.bar=i(D,"\\overline","span",'class="mq-non-leaf mq-overline"'),g.overrightarrow=i(D,"\\overrightarrow","span",'class="mq-non-leaf mq-overarrow mq-arrow-right"'),g.overleftarrow=i(D,"\\overleftarrow","span",'class="mq-non-leaf mq-overarrow mq-arrow-left"'),g.textcolor=le(nr,function(l,m){l.setColor=function(o){this.color=o,this.htmlTemplate='<span class="mq-textcolor" style="color:'+o+'">&0</span>'},l.latex=function(){return"\\textcolor{"+this.color+"}{"+this.blocks[0].latex()+"}"},l.parser=function(){var o=this,c=ve.optWhitespace,d=ve.string,I=ve.regex;return c.then(d("{")).then(I(/^[#\w\s.,()%-]*/)).skip(d("}")).then(function(N){return o.setColor(N),m.parser.call(o)})},l.isStyleBlock=function(){return!0}}),g.class=le(nr,function(l,m){l.parser=function(){var o=this,c=ve.string,d=ve.regex;return ve.optWhitespace.then(c("{")).then(d(/^[-\w\s\\\xA0-\xFF]*/)).skip(c("}")).then(function(I){return o.cls=I||"",o.htmlTemplate='<span class="mq-class '+I+'">&0</span>',m.parser.call(o)})},l.latex=function(){return"\\class{"+this.cls+"}{"+this.blocks[0].latex()+"}"},l.isStyleBlock=function(){return!0}}),H=le(nr,function(l,m){l.ctrlSeq="_{...}^{...}",l.createLeftOf=function(o){if(this.replacedFragment||o[M]||!o.options.supSubsRequireOperand)return m.createLeftOf.apply(this,arguments)},l.contactWeld=function(o){var c,d,I,N,y,u;for(c=M;c;c=c===M&&j)if(this[c]instanceof H){for(d="sub";d;d=d==="sub"&&"sup")I=this[d],N=this[c][d],I&&(N?I.isEmpty()?u=Ce(N,0,N.ends[M]):(I.jQ.children().insAtDirEnd(-c,N.jQ),y=I.children().disown(),u=Ce(N,y.ends[j],N.ends[M]),c===M?y.adopt(N,N.ends[j],0):y.adopt(N,0,N.ends[M])):this[c].addBlock(I.disown()),this.placeCursor=function(F,fe){return function(_e){_e.insAtDirEnd(-c,F||fe)}}(N,I));this.remove(),o&&o[M]===this&&(c===j&&u?u[M]?o.insRightOf(u[M]):o.insAtLeftEnd(u.parent):o.insRightOf(this[c]));break}},gr.p.charsThatBreakOutOfSupSub="",l.finalizeTree=function(){this.ends[M].write=function(o,c){if(o.options.autoSubscriptNumerals&&this===this.parent.sub){if(c==="_")return;var d=this.chToCmd(c,o.options);return d instanceof tr?o.deleteSelection():o.clearSelection().insRightOf(this.parent),d.createLeftOf(o.show())}o[M]&&!o[j]&&!o.selection&&o.options.charsThatBreakOutOfSupSub.indexOf(c)>-1&&o.insRightOf(this.parent),Pr.p.write.apply(this,arguments)}},l.moveTowards=function(o,c,d){c.options.autoSubscriptNumerals&&!this.sup?c.insDirOf(o,this):m.moveTowards.apply(this,arguments)},l.deleteTowards=function(o,c){if(c.options.autoSubscriptNumerals&&this.sub){var d=this.sub.ends[-o];d instanceof tr?d.remove():d&&d.deleteTowards(o,c.insAtDirEnd(-o,this.sub)),this.sub.isEmpty()&&(this.sub.deleteOutOf(M,c.insAtLeftEnd(this.sub)),this.sup&&c.insDirOf(-o,this))}else m.deleteTowards.apply(this,arguments)},l.latex=function(){function o(c,d){var I=d&&d.latex();return d?c+(I.length===1?I:"{"+(I||" ")+"}"):""}return o("_",this.sub)+o("^",this.sup)},l.addBlock=function(o){this.supsub==="sub"?(this.sup=this.upInto=this.sub.upOutOf=o,o.adopt(this,this.sub,0).downOutOf=this.sub,o.jQ=Se('<span class="mq-sup"/>').append(o.jQ.children()).attr(Ee,o.id).prependTo(this.jQ)):(this.sub=this.downInto=this.sup.downOutOf=o,o.adopt(this,0,this.sup).upOutOf=this.sup,o.jQ=Se('<span class="mq-sub"></span>').append(o.jQ.children()).attr(Ee,o.id).appendTo(this.jQ.removeClass("mq-sup-only")),this.jQ.append('<span style="display:inline-block;width:0">&#8203;</span>'));for(var c=0;c<2;c+=1)(function(d,I,N,y){d[I].deleteOutOf=function(u,F){if(F.insDirOf(this[u]?-u:u,this.parent),!this.isEmpty()){var fe=this.ends[u];this.children().disown().withDirAdopt(u,F.parent,F[u],F[-u]).jQ.insDirOf(-u,F.jQ),F[-u]=fe}d.supsub=N,delete d[I],delete d[y+"Into"],d[N][y+"OutOf"]=R,delete d[N].deleteOutOf,I==="sub"&&Se(d.jQ.addClass("mq-sup-only")[0].lastChild).remove(),this.remove()}})(this,"sub sup".split(" ")[c],"sup sub".split(" ")[c],"down up".split(" ")[c])}}),g.subscript=g._=le(H,function(l,m){l.supsub="sub",l.htmlTemplate='<span class="mq-supsub mq-non-leaf"><span class="mq-sub">&0</span><span style="display:inline-block;width:0">&#8203;</span></span>',l.textTemplate=["_"],l.finalizeTree=function(){this.downInto=this.sub=this.ends[M],this.sub.upOutOf=R,m.finalizeTree.call(this)}}),g.superscript=g.supscript=g["^"]=le(H,function(l,m){l.supsub="sup",l.htmlTemplate='<span class="mq-supsub mq-non-leaf mq-sup-only"><span class="mq-sup">&0</span></span>',l.textTemplate=["^"],l.finalizeTree=function(){this.upInto=this.sup=this.ends[j],this.sup.downOutOf=R,m.finalizeTree.call(this)}}),te=le(nr,function(l,m){l.init=function(o,c){var d='<span class="mq-large-operator mq-non-leaf"><span class="mq-to"><span>&1</span></span><big>'+c+'</big><span class="mq-from"><span>&0</span></span></span>';tr.prototype.init.call(this,o,d)},l.createLeftOf=function(o){m.createLeftOf.apply(this,arguments),o.options.sumStartsWithNEquals&&(be("n").createLeftOf(o),hr().createLeftOf(o))},l.latex=function(){function o(c){return c.length===1?c:"{"+(c||" ")+"}"}return this.ctrlSeq+"_"+o(this.ends[M].latex())+"^"+o(this.ends[j].latex())},l.parser=function(){var o,c=ve.string,d=ve.optWhitespace,I=ve.succeed,N=Fr.block,y=this,u=y.blocks=[Pr(),Pr()];for(o=0;o<u.length;o+=1)u[o].adopt(y,y.ends[j],0);return d.then(c("_").or(c("^"))).then(function(F){var fe=u[F==="_"?0:1];return N.then(function(_e){return _e.children().adopt(fe,fe.ends[j],0),I(y)})}).many().result(y)},l.finalizeTree=function(){this.downInto=this.ends[M],this.upInto=this.ends[j],this.ends[M].upOutOf=this.ends[j],this.ends[j].downOutOf=this.ends[M]}}),g["∑"]=g.sum=g.summation=i(te,"\\sum ","&sum;"),g["∏"]=g.prod=g.product=i(te,"\\prod ","&prod;"),g.coprod=g.coproduct=i(te,"\\coprod ","&#8720;"),g["∫"]=g.int=g.integral=le(te,function(l,m){l.init=function(){var o='<span class="mq-int mq-non-leaf"><big>&int;</big><span class="mq-supsub mq-non-leaf"><span class="mq-sup"><span class="mq-sup-inner">&1</span></span><span class="mq-sub">&0</span><span style="display:inline-block;width:0">&#8203</span></span></span>';tr.prototype.init.call(this,"\\int ",o)},l.createLeftOf=nr.p.createLeftOf}),ce=g.frac=g.dfrac=g.cfrac=g.fraction=le(nr,function(l,m){l.ctrlSeq="\\frac",l.htmlTemplate='<span class="mq-fraction mq-non-leaf"><span class="mq-numerator">&0</span><span class="mq-denominator">&1</span><span style="display:inline-block;width:0">&#8203;</span></span>',l.textTemplate=["(",")/(",")"],l.finalizeTree=function(){this.upInto=this.ends[j].upOutOf=this.ends[M],this.downInto=this.ends[M].downOutOf=this.ends[j]}}),ze=g.over=Qe["/"]=le(ce,function(l,m){l.createLeftOf=function(o){if(!this.replacedFragment){for(var c=o[M];c&&!(c instanceof Ke||c instanceof(g.text||r)||c instanceof te||c.ctrlSeq==="\\ "||/^[,;:]$/.test(c.ctrlSeq));)c=c[M];c instanceof te&&c[j]instanceof H&&(c=c[j],c[j]instanceof H&&c[j].ctrlSeq!=c.ctrlSeq&&(c=c[j])),c!==o[M]&&(this.replaces(Pe(c[j]||o.parent.ends[M],o[M])),o[M]=c)}m.createLeftOf.call(this,o)}}),br=g.sqrt=g["√"]=le(nr,function(l,m){l.ctrlSeq="\\sqrt",l.htmlTemplate='<span class="mq-non-leaf"><span class="mq-scaled mq-sqrt-prefix">&radic;</span><span class="mq-non-leaf mq-sqrt-stem">&0</span></span>',l.textTemplate=["sqrt(",")"],l.parser=function(){return Fr.optBlock.then(function(o){return Fr.block.map(function(c){var d=ir();return d.blocks=[o,c],o.adopt(d,0,0),c.adopt(d,o,0),d})}).or(m.parser.call(this))},l.reflow=function(){var o=this.ends[j].jQ;We(o.prev(),1,o.innerHeight()/+o.css("fontSize").slice(0,-2)-.1)}}),g.hat=le(nr,function(l,m){l.ctrlSeq="\\hat",l.htmlTemplate='<span class="mq-non-leaf"><span class="mq-hat-prefix">^</span><span class="mq-hat-stem">&0</span></span>',l.textTemplate=["hat(",")"]}),ir=g.nthroot=le(br,function(l,m){l.htmlTemplate='<sup class="mq-nthroot mq-non-leaf">&0</sup><span class="mq-scaled"><span class="mq-sqrt-prefix mq-scaled">&radic;</span><span class="mq-sqrt-stem mq-non-leaf">&1</span></span>',l.textTemplate=["sqrt[","](",")"],l.latex=function(){return"\\sqrt["+this.ends[M].latex()+"]{"+this.ends[j].latex()+"}"}}),mr=le(nr,function(l,m){l.init=function(o,c,d){var I='<span class="mq-non-leaf"><span class="mq-diacritic-above">'+c+'</span><span class="mq-diacritic-stem">&0</span></span>';m.init.call(this,o,I,d)}}),g.vec=i(mr,"\\vec","&rarr;",["vec(",")"]),g.tilde=i(mr,"\\tilde","~",["tilde(",")"]),ar=le(le(nr,A),function(l,m){l.init=function(o,c,d,I,N){m.init.call(this,"\\left"+I,O,[c,d]),this.side=o,this.sides={},this.sides[M]={ch:c,ctrlSeq:I},this.sides[j]={ch:d,ctrlSeq:N}},l.numBlocks=function(){return 1},l.html=function(){return this.htmlTemplate='<span class="mq-non-leaf"><span class="mq-scaled mq-paren'+(this.side===j?" mq-ghost":"")+'">'+this.sides[M].ch+'</span><span class="mq-non-leaf">&0</span><span class="mq-scaled mq-paren'+(this.side===M?" mq-ghost":"")+'">'+this.sides[j].ch+"</span></span>",m.html.call(this)},l.latex=function(){return"\\left"+this.sides[M].ctrlSeq+this.ends[M].latex()+"\\right"+this.sides[j].ctrlSeq},l.matchBrack=function(o,c,d){return d instanceof ar&&d.side&&d.side!==-c&&(!o.restrictMismatchedBrackets||yr[this.sides[this.side].ch]===d.sides[d.side].ch||{"(":"]","[":")"}[this.sides[M].ch]===d.sides[j].ch)&&d},l.closeOpposing=function(o){o.side=0,o.sides[this.side]=this.sides[this.side],o.delimjQs.eq(this.side===M?0:1).removeClass("mq-ghost").html(this.sides[this.side].ch)},l.createLeftOf=function(o){var c,d,I;this.replacedFragment||(c=o.options,d=this.sides[M].ch==="|"?this.matchBrack(c,j,o[j])||this.matchBrack(c,M,o[M])||this.matchBrack(c,0,o.parent.parent):this.matchBrack(c,-this.side,o[-this.side])||this.matchBrack(c,-this.side,o.parent.parent)),d?(I=this.side=-d.side,this.closeOpposing(d),d===o.parent.parent&&o[I]&&Pe(o[I],o.parent.ends[I],-I).disown().withDirAdopt(-I,d.parent,d,d[I]).jQ.insDirOf(I,d.jQ),d.bubble("reflow")):(d=this,I=d.side,d.replacedFragment?d.side=0:o[-I]&&(d.replaces(Pe(o[-I],o.parent.ends[-I],I)),o[-I]=0),m.createLeftOf.call(d,o)),I===M?o.insAtLeftEnd(d.ends[M]):o.insRightOf(d)},l.placeCursor=r,l.unwrap=function(){this.ends[M].children().disown().adopt(this.parent,this,this[j]).jQ.insertAfter(this.jQ),this.remove()},l.deleteSide=function(o,c,d){var I,N,y,u=this.parent,F=this[o],fe=u.ends[o];if(o===this.side)return this.unwrap(),void(F?d.insDirOf(-o,F):d.insAtDirEnd(o,u));if(I=d.options,N=!this.side,this.side=-o,this.matchBrack(I,o,this.ends[M].ends[this.side]))this.closeOpposing(this.ends[M].ends[this.side]),y=this.ends[M].ends[o],this.unwrap(),y.siblingCreated&&y.siblingCreated(d.options,o),F?d.insDirOf(-o,F):d.insAtDirEnd(o,u);else{if(this.matchBrack(I,o,this.parent.parent))this.parent.parent.closeOpposing(this),this.parent.parent.unwrap();else{if(c&&N)return this.unwrap(),void(F?d.insDirOf(-o,F):d.insAtDirEnd(o,u));this.sides[o]={ch:yr[this.sides[this.side].ch],ctrlSeq:yr[this.sides[this.side].ctrlSeq]},this.delimjQs.removeClass("mq-ghost").eq(o===M?0:1).addClass("mq-ghost").html(this.sides[o].ch)}F?(y=this.ends[M].ends[o],Pe(F,fe,-o).disown().withDirAdopt(-o,this.ends[M],y,0).jQ.insAtDirEnd(o,this.ends[M].jQ.removeClass("mq-empty")),y.siblingCreated&&y.siblingCreated(d.options,o),d.insDirOf(-o,F)):c?d.insDirOf(o,this):d.insAtDirEnd(o,this.ends[M])}},l.deleteTowards=function(o,c){this.deleteSide(-o,!1,c)},l.finalizeTree=function(){this.ends[M].deleteOutOf=function(o,c){this.parent.deleteSide(o,!0,c)},this.finalizeTree=this.intentionalBlur=function(){this.delimjQs.eq(this.side===M?1:0).removeClass("mq-ghost"),this.side=0}},l.siblingCreated=function(o,c){c===-this.side&&this.finalizeTree()}}),yr={"(":")",")":"(","[":"]","]":"[","{":"}","}":"{","\\{":"\\}","\\}":"\\{","&lang;":"&rang;","&rang;":"&lang;","\\langle ":"\\rangle ","\\rangle ":"\\langle ","|":"|","\\lVert ":"\\rVert ","\\rVert ":"\\lVert "},E("("),E("["),E("{","\\{"),g.langle=i(ar,M,"&lang;","&rang;","\\langle ","\\rangle "),g.rangle=i(ar,j,"&lang;","&rang;","\\langle ","\\rangle "),Qe["|"]=i(ar,M,"|","|","|","|"),g.lVert=i(ar,M,"&#8741;","&#8741;","\\lVert ","\\rVert "),g.rVert=i(ar,j,"&#8741;","&#8741;","\\lVert ","\\rVert "),g.left=le(nr,function(l){l.parser=function(){var m=ve.regex,o=ve.string,c=(ve.succeed,ve.optWhitespace);return c.then(m(/^(?:[([|]|\\\{|\\langle\b|\\lVert\b)/)).then(function(d){var I=d.charAt(0)==="\\"?d.slice(1):d;return d=="\\langle"&&(I="&lang;",d+=" "),d=="\\lVert"&&(I="&#8741;",d+=" "),Fr.then(function(N){return o("\\right").skip(c).then(m(/^(?:[\])|]|\\\}|\\rangle\b|\\rVert\b)/)).map(function(y){var u,F=y.charAt(0)==="\\"?y.slice(1):y;return y=="\\rangle"&&(F="&rang;",y+=" "),y=="\\rVert"&&(F="&#8741;",y+=" "),u=ar(0,I,F,d,y),u.blocks=[N],N.adopt(u,0,0),u})})})}}),g.right=le(nr,function(l){l.parser=function(){return ve.fail("unmatched \\right")}}),pr=g.binom=g.binomial=le(le(nr,A),function(l,m){l.ctrlSeq="\\binom",l.htmlTemplate='<span class="mq-non-leaf"><span class="mq-paren mq-scaled">(</span><span class="mq-non-leaf"><span class="mq-array mq-non-leaf"><span>&0</span><span>&1</span></span></span><span class="mq-paren mq-scaled">)</span></span>',l.textTemplate=["choose(",",",")"]}),g.choose=le(pr,function(l){l.createLeftOf=ze.prototype.createLeftOf}),g.editable=g.MathQuillMathField=le(nr,function(l,m){l.ctrlSeq="\\MathQuillMathField",l.htmlTemplate='<span class="mq-editable-field"><span class="mq-root-block">&0</span></span>',l.parser=function(){var o=this,c=ve.string,d=ve.regex,I=ve.succeed;return c("[").then(d(/^[a-z][a-z0-9]*/i)).skip(c("]")).map(function(N){o.name=N}).or(I()).then(m.parser.call(o))},l.finalizeTree=function(o){var c=me(this.ends[M],this.jQ,o);c.KIND_OF_MQ="MathField",c.editable=!0,c.createTextarea(),c.editablesTextareaEvents(),c.cursor.insAtRightEnd(c.root),$(c.root)},l.registerInnerField=function(o,c){o.push(o[this.name]=c(this.ends[M].controller))},l.latex=function(){return this.ends[M].latex()},l.text=function(){return this.ends[M].text()}}),_r=g.embed=le(tr,function(l,m){l.setOptions=function(o){function c(){return""}return this.text=o.text||c,this.htmlTemplate=o.htmlString||"",this.latex=o.latex||c,this},l.parser=function(){var o=this,c=ve.string,d=ve.regex,I=ve.succeed;return c("{").then(d(/^[a-z][a-z0-9]*/i)).skip(c("}")).then(function(N){return c("[").then(d(/^[-\w\s]*/)).skip(c("]")).or(I()).map(function(y){return o.setOptions(Lr[N](y))})})}}),Y=v(1);for(ue in Y)(function(l,m){typeof m=="function"?(b[l]=function(){return p(),m.apply(this,arguments)},b[l].prototype=m.prototype):b[l]=m})(ue,Y[ue])})();var uu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zi(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Eo={exports:{}};/*! @preserve
 * numeral.js
 * version : 2.0.6
 * author : Adam Draper
 * license : MIT
 * http://adamwdraper.github.com/Numeral-js/
 */(function(r){(function(t,s){r.exports?r.exports=s():t.numeral=s()})(uu,function(){var t,s,i="2.0.6",n={},a={},e={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0},p={currentLocale:e.currentLocale,zeroFormat:e.zeroFormat,nullFormat:e.nullFormat,defaultFormat:e.defaultFormat,scalePercentBy100:e.scalePercentBy100};function b(v,$){this._input=v,this._value=$}return t=function(v){var $,L,R,A;if(t.isNumeral(v))$=v.value();else if(v===0||typeof v>"u")$=0;else if(v===null||s.isNaN(v))$=null;else if(typeof v=="string")if(p.zeroFormat&&v===p.zeroFormat)$=0;else if(p.nullFormat&&v===p.nullFormat||!v.replace(/[^0-9]+/g,"").length)$=null;else{for(L in n)if(A=typeof n[L].regexps.unformat=="function"?n[L].regexps.unformat():n[L].regexps.unformat,A&&v.match(A)){R=n[L].unformat;break}R=R||t._.stringToNumber,$=R(v)}else $=Number(v)||null;return new b(v,$)},t.version=i,t.isNumeral=function(v){return v instanceof b},t._=s={numberToFormat:function(v,$,L){var R=a[t.options.currentLocale],A=!1,E=!1,O=0,Z="",$e=1e12,le=1e9,M=1e6,j=1e3,Se="",Ce=!1,ke,Pe,g,Qe,$r,Cr,me;if(v=v||0,Pe=Math.abs(v),t._.includes($,"(")?(A=!0,$=$.replace(/[\(|\)]/g,"")):(t._.includes($,"+")||t._.includes($,"-"))&&($r=t._.includes($,"+")?$.indexOf("+"):v<0?$.indexOf("-"):-1,$=$.replace(/[\+|\-]/g,"")),t._.includes($,"a")&&(ke=$.match(/a(k|m|b|t)?/),ke=ke?ke[1]:!1,t._.includes($," a")&&(Z=" "),$=$.replace(new RegExp(Z+"a[kmbt]?"),""),Pe>=$e&&!ke||ke==="t"?(Z+=R.abbreviations.trillion,v=v/$e):Pe<$e&&Pe>=le&&!ke||ke==="b"?(Z+=R.abbreviations.billion,v=v/le):Pe<le&&Pe>=M&&!ke||ke==="m"?(Z+=R.abbreviations.million,v=v/M):(Pe<M&&Pe>=j&&!ke||ke==="k")&&(Z+=R.abbreviations.thousand,v=v/j)),t._.includes($,"[.]")&&(E=!0,$=$.replace("[.]",".")),g=v.toString().split(".")[0],Qe=$.split(".")[1],Cr=$.indexOf(","),O=($.split(".")[0].split(",")[0].match(/0/g)||[]).length,Qe?(t._.includes(Qe,"[")?(Qe=Qe.replace("]",""),Qe=Qe.split("["),Se=t._.toFixed(v,Qe[0].length+Qe[1].length,L,Qe[1].length)):Se=t._.toFixed(v,Qe.length,L),g=Se.split(".")[0],t._.includes(Se,".")?Se=R.delimiters.decimal+Se.split(".")[1]:Se="",E&&Number(Se.slice(1))===0&&(Se="")):g=t._.toFixed(v,0,L),Z&&!ke&&Number(g)>=1e3&&Z!==R.abbreviations.trillion)switch(g=String(Number(g)/1e3),Z){case R.abbreviations.thousand:Z=R.abbreviations.million;break;case R.abbreviations.million:Z=R.abbreviations.billion;break;case R.abbreviations.billion:Z=R.abbreviations.trillion;break}if(t._.includes(g,"-")&&(g=g.slice(1),Ce=!0),g.length<O)for(var Dr=O-g.length;Dr>0;Dr--)g="0"+g;return Cr>-1&&(g=g.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+R.delimiters.thousands)),$.indexOf(".")===0&&(g=""),me=g+Se+(Z||""),A?me=(A&&Ce?"(":"")+me+(A&&Ce?")":""):$r>=0?me=$r===0?(Ce?"-":"+")+me:me+(Ce?"-":"+"):Ce&&(me="-"+me),me},stringToNumber:function(v){var $=a[p.currentLocale],L=v,R={thousand:3,million:6,billion:9,trillion:12},A,E,O;if(p.zeroFormat&&v===p.zeroFormat)E=0;else if(p.nullFormat&&v===p.nullFormat||!v.replace(/[^0-9]+/g,"").length)E=null;else{E=1,$.delimiters.decimal!=="."&&(v=v.replace(/\./g,"").replace($.delimiters.decimal,"."));for(A in R)if(O=new RegExp("[^a-zA-Z]"+$.abbreviations[A]+"(?:\\)|(\\"+$.currency.symbol+")?(?:\\))?)?$"),L.match(O)){E*=Math.pow(10,R[A]);break}E*=(v.split("-").length+Math.min(v.split("(").length-1,v.split(")").length-1))%2?1:-1,v=v.replace(/[^0-9\.]+/g,""),E*=Number(v)}return E},isNaN:function(v){return typeof v=="number"&&isNaN(v)},includes:function(v,$){return v.indexOf($)!==-1},insert:function(v,$,L){return v.slice(0,L)+$+v.slice(L)},reduce:function(v,$){if(this===null)throw new TypeError("Array.prototype.reduce called on null or undefined");if(typeof $!="function")throw new TypeError($+" is not a function");var L=Object(v),R=L.length>>>0,A=0,E;if(arguments.length===3)E=arguments[2];else{for(;A<R&&!(A in L);)A++;if(A>=R)throw new TypeError("Reduce of empty array with no initial value");E=L[A++]}for(;A<R;A++)A in L&&(E=$(E,L[A],A,L));return E},multiplier:function(v){var $=v.toString().split(".");return $.length<2?1:Math.pow(10,$[1].length)},correctionFactor:function(){var v=Array.prototype.slice.call(arguments);return v.reduce(function($,L){var R=s.multiplier(L);return $>R?$:R},1)},toFixed:function(v,$,L,R){var A=v.toString().split("."),E=$-(R||0),O,Z,$e,le;return A.length===2?O=Math.min(Math.max(A[1].length,E),$):O=E,$e=Math.pow(10,O),le=(L(v+"e+"+O)/$e).toFixed(O),R>$-O&&(Z=new RegExp("\\.?0{1,"+(R-($-O))+"}$"),le=le.replace(Z,"")),le}},t.options=p,t.formats=n,t.locales=a,t.locale=function(v){return v&&(p.currentLocale=v.toLowerCase()),p.currentLocale},t.localeData=function(v){if(!v)return a[p.currentLocale];if(v=v.toLowerCase(),!a[v])throw new Error("Unknown locale : "+v);return a[v]},t.reset=function(){for(var v in e)p[v]=e[v]},t.zeroFormat=function(v){p.zeroFormat=typeof v=="string"?v:null},t.nullFormat=function(v){p.nullFormat=typeof v=="string"?v:null},t.defaultFormat=function(v){p.defaultFormat=typeof v=="string"?v:"0.0"},t.register=function(v,$,L){if($=$.toLowerCase(),this[v+"s"][$])throw new TypeError($+" "+v+" already registered.");return this[v+"s"][$]=L,L},t.validate=function(v,$){var L,R,A,E,O,Z,$e,le;if(typeof v!="string"&&(v+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",v)),v=v.trim(),v.match(/^\d+$/))return!0;if(v==="")return!1;try{$e=t.localeData($)}catch{$e=t.localeData(t.locale())}return A=$e.currency.symbol,O=$e.abbreviations,L=$e.delimiters.decimal,$e.delimiters.thousands==="."?R="\\.":R=$e.delimiters.thousands,le=v.match(/^[^\d]+/),le!==null&&(v=v.substr(1),le[0]!==A)||(le=v.match(/[^\d]+$/),le!==null&&(v=v.slice(0,-1),le[0]!==O.thousand&&le[0]!==O.million&&le[0]!==O.billion&&le[0]!==O.trillion))?!1:(Z=new RegExp(R+"{2}"),v.match(/[^\d.,]/g)?!1:(E=v.split(L),E.length>2?!1:E.length<2?!!E[0].match(/^\d+.*\d$/)&&!E[0].match(Z):E[0].length===1?!!E[0].match(/^\d+$/)&&!E[0].match(Z)&&!!E[1].match(/^\d+$/):!!E[0].match(/^\d+.*\d$/)&&!E[0].match(Z)&&!!E[1].match(/^\d+$/)))},t.fn=b.prototype={clone:function(){return t(this)},format:function(v,$){var L=this._value,R=v||p.defaultFormat,A,E,O;if($=$||Math.round,L===0&&p.zeroFormat!==null)E=p.zeroFormat;else if(L===null&&p.nullFormat!==null)E=p.nullFormat;else{for(A in n)if(R.match(n[A].regexps.format)){O=n[A].format;break}O=O||t._.numberToFormat,E=O(L,R,$)}return E},value:function(){return this._value},input:function(){return this._input},set:function(v){return this._value=Number(v),this},add:function(v){var $=s.correctionFactor.call(null,this._value,v);function L(R,A,E,O){return R+Math.round($*A)}return this._value=s.reduce([this._value,v],L,0)/$,this},subtract:function(v){var $=s.correctionFactor.call(null,this._value,v);function L(R,A,E,O){return R-Math.round($*A)}return this._value=s.reduce([v],L,Math.round(this._value*$))/$,this},multiply:function(v){function $(L,R,A,E){var O=s.correctionFactor(L,R);return Math.round(L*O)*Math.round(R*O)/Math.round(O*O)}return this._value=s.reduce([this._value,v],$,1),this},divide:function(v){function $(L,R,A,E){var O=s.correctionFactor(L,R);return Math.round(L*O)/Math.round(R*O)}return this._value=s.reduce([this._value,v],$),this},difference:function(v){return Math.abs(t(this._value).subtract(v).value())}},t.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(v){var $=v%10;return~~(v%100/10)===1?"th":$===1?"st":$===2?"nd":$===3?"rd":"th"},currency:{symbol:"$"}}),function(){t.register("format","bps",{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(v,$,L){var R=t._.includes($," BPS")?" ":"",A;return v=v*1e4,$=$.replace(/\s?BPS/,""),A=t._.numberToFormat(v,$,L),t._.includes(A,")")?(A=A.split(""),A.splice(-1,0,R+"BPS"),A=A.join("")):A=A+R+"BPS",A},unformat:function(v){return+(t._.stringToNumber(v)*1e-4).toFixed(15)}})}(),function(){var v={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]},$={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},L=v.suffixes.concat($.suffixes.filter(function(A){return v.suffixes.indexOf(A)<0})),R=L.join("|");R="("+R.replace("B","B(?!PS)")+")",t.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp(R)},format:function(A,E,O){var Z,$e=t._.includes(E,"ib")?$:v,le=t._.includes(E," b")||t._.includes(E," ib")?" ":"",M,j,Se;for(E=E.replace(/\s?i?b/,""),M=0;M<=$e.suffixes.length;M++)if(j=Math.pow($e.base,M),Se=Math.pow($e.base,M+1),A===null||A===0||A>=j&&A<Se){le+=$e.suffixes[M],j>0&&(A=A/j);break}return Z=t._.numberToFormat(A,E,O),Z+le},unformat:function(A){var E=t._.stringToNumber(A),O,Z;if(E){for(O=v.suffixes.length-1;O>=0;O--){if(t._.includes(A,v.suffixes[O])){Z=Math.pow(v.base,O);break}if(t._.includes(A,$.suffixes[O])){Z=Math.pow($.base,O);break}}E*=Z||1}return E}})}(),function(){t.register("format","currency",{regexps:{format:/(\$)/},format:function(v,$,L){var R=t.locales[t.options.currentLocale],A={before:$.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:$.match(/([\+|\-|\)|\s|\$]*)$/)[0]},E,O,Z;for($=$.replace(/\s?\$\s?/,""),E=t._.numberToFormat(v,$,L),v>=0?(A.before=A.before.replace(/[\-\(]/,""),A.after=A.after.replace(/[\-\)]/,"")):v<0&&!t._.includes(A.before,"-")&&!t._.includes(A.before,"(")&&(A.before="-"+A.before),Z=0;Z<A.before.length;Z++)switch(O=A.before[Z],O){case"$":E=t._.insert(E,R.currency.symbol,Z);break;case" ":E=t._.insert(E," ",Z+R.currency.symbol.length-1);break}for(Z=A.after.length-1;Z>=0;Z--)switch(O=A.after[Z],O){case"$":E=Z===A.after.length-1?E+R.currency.symbol:t._.insert(E,R.currency.symbol,-(A.after.length-(1+Z)));break;case" ":E=Z===A.after.length-1?E+" ":t._.insert(E," ",-(A.after.length-(1+Z)+R.currency.symbol.length-1));break}return E}})}(),function(){t.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(v,$,L){var R,A=typeof v=="number"&&!t._.isNaN(v)?v.toExponential():"0e+0",E=A.split("e");return $=$.replace(/e[\+|\-]{1}0/,""),R=t._.numberToFormat(Number(E[0]),$,L),R+"e"+E[1]},unformat:function(v){var $=t._.includes(v,"e+")?v.split("e+"):v.split("e-"),L=Number($[0]),R=Number($[1]);R=t._.includes(v,"e-")?R*=-1:R;function A(E,O,Z,$e){var le=t._.correctionFactor(E,O),M=E*le*(O*le)/(le*le);return M}return t._.reduce([L,Math.pow(10,R)],A,1)}})}(),function(){t.register("format","ordinal",{regexps:{format:/(o)/},format:function(v,$,L){var R=t.locales[t.options.currentLocale],A,E=t._.includes($," o")?" ":"";return $=$.replace(/\s?o/,""),E+=R.ordinal(v),A=t._.numberToFormat(v,$,L),A+E}})}(),function(){t.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(v,$,L){var R=t._.includes($," %")?" ":"",A;return t.options.scalePercentBy100&&(v=v*100),$=$.replace(/\s?\%/,""),A=t._.numberToFormat(v,$,L),t._.includes(A,")")?(A=A.split(""),A.splice(-1,0,R+"%"),A=A.join("")):A=A+R+"%",A},unformat:function(v){var $=t._.stringToNumber(v);return t.options.scalePercentBy100?$*.01:$}})}(),function(){t.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(v,$,L){var R=Math.floor(v/60/60),A=Math.floor((v-R*60*60)/60),E=Math.round(v-R*60*60-A*60);return R+":"+(A<10?"0"+A:A)+":"+(E<10?"0"+E:E)},unformat:function(v){var $=v.split(":"),L=0;return $.length===3?(L=L+Number($[0])*60*60,L=L+Number($[1])*60,L=L+Number($[2])):$.length===2&&(L=L+Number($[0])*60,L=L+Number($[1])),Number(L)}})}(),t})})(Eo);var cu=Eo.exports;const Fs=zi(cu),wt=768,za=wt/2,Qa=10,an=[1,2,5],fu=[5,4,5],ko=an[1],Co=0,Mo=150;let zr={x:za,y:za,exp:Co,mant:ko,size:Mo};const hu=()=>{zr={x:wt/2,y:wt/2,exp:Co,mant:ko,size:Mo}},Xt=document.getElementById("app");Xt==null||Xt.addEventListener("wheel",r=>{const t=zr,s=r.deltaY<0?Qa:-Qa;if(t.x=zr.x+(zr.x-r.pageX)*s/zr.size,t.y=zr.y+(zr.y-r.pageY)*s/zr.size,t.size=zr.size+s,t.size<=100){let i=an.findIndex(n=>n==t.mant);i++,i>2?(i=0,t.exp++,t.size=2*t.size):t.size=an[i]*t.size/an[i-1],t.mant=an[i]}if(t.size>=200){let i=an.findIndex(n=>n==t.mant);i--,i<0?(i=2,t.exp--,t.size=t.size/2):t.size=an[i]*t.size/an[i+1],t.mant=an[i]}Math.ceil(-t.x/t.size),Math.floor(t.y/t.size),zr=t});let _s=0,Ls=0,ta=!1;Xt==null||Xt.addEventListener("mousedown",r=>{_s=r.pageX,Ls=r.pageY,ta=!0});Xt==null||Xt.addEventListener("mouseup",r=>{ta=!1});Xt==null||Xt.addEventListener("mousemove",r=>{if(!ta)return;const t=r.pageX-_s,s=r.pageY-Ls;_s=r.pageX,Ls=r.pageY,zr.x+=t,zr.y+=s});const pu=()=>{const r=document.getElementById("calculator-back"),t=r==null?void 0:r.getContext("2d");if(!t)throw Error("There are no canvas to draw the background on");t.clearRect(0,0,wt,wt),t.lineWidth=2,t.strokeStyle="#F4F4ED",t.beginPath(),t.moveTo(0,zr.y-1),t.lineTo(wt,zr.y-1),t.stroke(),t.moveTo(zr.x-1,0),t.lineTo(zr.x-1,wt),t.stroke(),Wa(t,zr.x,!1,gu,(s,i)=>{t.strokeStyle=Ya("#F4F4ED",i),t.beginPath(),t.moveTo(s,0),t.lineTo(s,wt),t.stroke()}),Wa(t,zr.y,!0,du,(s,i)=>{t.strokeStyle=Ya("#F4F4ED",i),t.beginPath(),t.moveTo(0,s),t.lineTo(wt,s),t.stroke()})};function Wa(r,t,s,i,n){r.lineWidth=1;const a=fu[an.findIndex($=>$==zr.mant)],e=zr.size/a,p=Math.ceil(-t/e);let b=p*e,v=Math.floor((p-1)/a+1)*zr.mant;for(s&&(v=-v);t+b<=wt;){const $=t+b;if(Math.abs(b%zr.size)<1){const L=vu(v,zr.exp);v!=0&&(i(r,L,$),n($,.65)),v+=s?-zr.mant:zr.mant}else{const L=Math.max(0,(e-20)*.01);n($,L)}b+=e}}function gu(r,t,s){const i=r.measureText(t);let n="#F4F4ED";r.font="18px sans-serif";let a=s-i.width/2;a<5?(a=5,n="#babaab"):a>wt-5-i.width&&(a=wt-5-i.width,n="#babaab");let e=zr.y+20;e<25?(e=25,n="#babaab"):e>wt-5&&(e=wt-5,n="#babaab"),r.fillStyle="rgba(15, 15, 15, 50%)",r.fillRect(a,e-18,i.width,20),r.fillStyle=n,r.fillText(t,a,e)}function du(r,t,s){const i=r.measureText(t);let n="#F4F4ED";r.font="18px sans-serif";let a=zr.x-i.width-10;a<5?(a=5,n="#babaab"):a>wt-5-i.width&&(a=wt-5-i.width,n="#babaab");let e=s+6;e<20?(e=20,n="#babaab"):e>wt-5&&(e=wt-5,n="#babaab"),r.fillStyle="rgba(15, 15, 15, 50%)",r.fillRect(a,e,i.width,20),r.fillStyle=n,r.fillText(t,a,e)}const mu=[8304,185,178,179,8308,8309,8310,8311,8312,8313];function vu(r,t){const i=Fs(r).format("0.0000e+0").split("e"),n=parseFloat(i[0]?i[0]:"0"),a=parseInt(i[1]?i[1]:"0")+t;if(a>-5&&a<7){let b=n*Math.pow(10,a);return Fs(b).format("0[.][000000]")}const e=[...a.toString()].map(b=>{if(b=="-")return"⁻";const v=mu[(b.charCodeAt(0)-48)%10];return v?String.fromCharCode(v):""}).toString().replace(",","");return n+"·10"+e}function Ya(r,t){const s=parseInt(r.slice(1,3),16),i=parseInt(r.slice(3,5),16),n=parseInt(r.slice(5,7),16);return"rgba("+s+", "+i+", "+n+", "+t+")"}function Ua(r){if(r)throw r}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var bu=function(t){return t!=null&&t.constructor!=null&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)};const So=zi(bu);var Oi=Object.prototype.hasOwnProperty,Io=Object.prototype.toString,Va=Object.defineProperty,Xa=Object.getOwnPropertyDescriptor,Ka=function(t){return typeof Array.isArray=="function"?Array.isArray(t):Io.call(t)==="[object Array]"},Za=function(t){if(!t||Io.call(t)!=="[object Object]")return!1;var s=Oi.call(t,"constructor"),i=t.constructor&&t.constructor.prototype&&Oi.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!s&&!i)return!1;var n;for(n in t);return typeof n>"u"||Oi.call(t,n)},Ja=function(t,s){Va&&s.name==="__proto__"?Va(t,s.name,{enumerable:!0,configurable:!0,value:s.newValue,writable:!0}):t[s.name]=s.newValue},eo=function(t,s){if(s==="__proto__")if(Oi.call(t,s)){if(Xa)return Xa(t,s).value}else return;return t[s]},yu=function r(){var t,s,i,n,a,e,p=arguments[0],b=1,v=arguments.length,$=!1;for(typeof p=="boolean"&&($=p,p=arguments[1]||{},b=2),(p==null||typeof p!="object"&&typeof p!="function")&&(p={});b<v;++b)if(t=arguments[b],t!=null)for(s in t)i=eo(p,s),n=eo(t,s),p!==n&&($&&n&&(Za(n)||(a=Ka(n)))?(a?(a=!1,e=i&&Ka(i)?i:[]):e=i&&Za(i)?i:{},Ja(p,{name:s,newValue:r($,e,n)})):typeof n<"u"&&Ja(p,{name:s,newValue:n}));return p};const ro=zi(yu);function Os(r){if(typeof r!="object"||r===null)return!1;const t=Object.getPrototypeOf(r);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)}function Au(){const r=[],t={run:s,use:i};return t;function s(...n){let a=-1;const e=n.pop();if(typeof e!="function")throw new TypeError("Expected function as last argument, not "+e);p(null,...n);function p(b,...v){const $=r[++a];let L=-1;if(b){e(b);return}for(;++L<n.length;)(v[L]===null||v[L]===void 0)&&(v[L]=n[L]);n=v,$?$u($,p)(...v):e(null,...v)}}function i(n){if(typeof n!="function")throw new TypeError("Expected `middelware` to be a function, not "+n);return r.push(n),t}}function $u(r,t){let s;return i;function i(...e){const p=r.length>e.length;let b;p&&e.push(n);try{b=r.apply(this,e)}catch(v){const $=v;if(p&&s)throw $;return n($)}p||(b&&b.then&&typeof b.then=="function"?b.then(a,n):b instanceof Error?n(b):a(b))}function n(e,...p){s||(s=!0,t(e,...p))}function a(e){n(null,e)}}function wu(r){return!r||typeof r!="object"?"":"position"in r||"type"in r?to(r.position):"start"in r||"end"in r?to(r):"line"in r||"column"in r?Rs(r):""}function Rs(r){return no(r&&r.line)+":"+no(r&&r.column)}function to(r){return Rs(r&&r.start)+"-"+Rs(r&&r.end)}function no(r){return r&&typeof r=="number"?r:1}class Kt extends Error{constructor(t,s,i){const n=[null,null];let a={start:{line:null,column:null},end:{line:null,column:null}};if(super(),typeof s=="string"&&(i=s,s=void 0),typeof i=="string"){const e=i.indexOf(":");e===-1?n[1]=i:(n[0]=i.slice(0,e),n[1]=i.slice(e+1))}s&&("type"in s||"position"in s?s.position&&(a=s.position):"start"in s||"end"in s?a=s:("line"in s||"column"in s)&&(a.start=s)),this.name=wu(s)||"1:1",this.message=typeof t=="object"?t.message:t,this.stack="",typeof t=="object"&&t.stack&&(this.stack=t.stack),this.reason=this.message,this.fatal,this.line=a.start.line,this.column=a.start.column,this.position=a,this.source=n[0],this.ruleId=n[1],this.file,this.actual,this.expected,this.url,this.note}}Kt.prototype.file="";Kt.prototype.name="";Kt.prototype.reason="";Kt.prototype.message="";Kt.prototype.stack="";Kt.prototype.fatal=null;Kt.prototype.column=null;Kt.prototype.line=null;Kt.prototype.source=null;Kt.prototype.ruleId=null;Kt.prototype.position=null;const on={basename:xu,dirname:Eu,extname:ku,join:Cu,sep:"/"};function xu(r,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');fi(r);let s=0,i=-1,n=r.length,a;if(t===void 0||t.length===0||t.length>r.length){for(;n--;)if(r.charCodeAt(n)===47){if(a){s=n+1;break}}else i<0&&(a=!0,i=n+1);return i<0?"":r.slice(s,i)}if(t===r)return"";let e=-1,p=t.length-1;for(;n--;)if(r.charCodeAt(n)===47){if(a){s=n+1;break}}else e<0&&(a=!0,e=n+1),p>-1&&(r.charCodeAt(n)===t.charCodeAt(p--)?p<0&&(i=n):(p=-1,i=e));return s===i?i=e:i<0&&(i=r.length),r.slice(s,i)}function Eu(r){if(fi(r),r.length===0)return".";let t=-1,s=r.length,i;for(;--s;)if(r.charCodeAt(s)===47){if(i){t=s;break}}else i||(i=!0);return t<0?r.charCodeAt(0)===47?"/":".":t===1&&r.charCodeAt(0)===47?"//":r.slice(0,t)}function ku(r){fi(r);let t=r.length,s=-1,i=0,n=-1,a=0,e;for(;t--;){const p=r.charCodeAt(t);if(p===47){if(e){i=t+1;break}continue}s<0&&(e=!0,s=t+1),p===46?n<0?n=t:a!==1&&(a=1):n>-1&&(a=-1)}return n<0||s<0||a===0||a===1&&n===s-1&&n===i+1?"":r.slice(n,s)}function Cu(...r){let t=-1,s;for(;++t<r.length;)fi(r[t]),r[t]&&(s=s===void 0?r[t]:s+"/"+r[t]);return s===void 0?".":Mu(s)}function Mu(r){fi(r);const t=r.charCodeAt(0)===47;let s=Su(r,!t);return s.length===0&&!t&&(s="."),s.length>0&&r.charCodeAt(r.length-1)===47&&(s+="/"),t?"/"+s:s}function Su(r,t){let s="",i=0,n=-1,a=0,e=-1,p,b;for(;++e<=r.length;){if(e<r.length)p=r.charCodeAt(e);else{if(p===47)break;p=47}if(p===47){if(!(n===e-1||a===1))if(n!==e-1&&a===2){if(s.length<2||i!==2||s.charCodeAt(s.length-1)!==46||s.charCodeAt(s.length-2)!==46){if(s.length>2){if(b=s.lastIndexOf("/"),b!==s.length-1){b<0?(s="",i=0):(s=s.slice(0,b),i=s.length-1-s.lastIndexOf("/")),n=e,a=0;continue}}else if(s.length>0){s="",i=0,n=e,a=0;continue}}t&&(s=s.length>0?s+"/..":"..",i=2)}else s.length>0?s+="/"+r.slice(n+1,e):s=r.slice(n+1,e),i=e-n-1;n=e,a=0}else p===46&&a>-1?a++:a=-1}return s}function fi(r){if(typeof r!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(r))}const Iu={cwd:Fu};function Fu(){return"/"}function Ds(r){return r!==null&&typeof r=="object"&&r.href&&r.origin}function _u(r){if(typeof r=="string")r=new URL(r);else if(!Ds(r)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+r+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(r.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return Lu(r)}function Lu(r){if(r.hostname!==""){const i=new TypeError('File URL host must be "localhost" or empty on darwin');throw i.code="ERR_INVALID_FILE_URL_HOST",i}const t=r.pathname;let s=-1;for(;++s<t.length;)if(t.charCodeAt(s)===37&&t.charCodeAt(s+1)===50){const i=t.charCodeAt(s+2);if(i===70||i===102){const n=new TypeError("File URL path must not include encoded / characters");throw n.code="ERR_INVALID_FILE_URL_PATH",n}}return decodeURIComponent(t)}const fs=["history","path","basename","stem","extname","dirname"];class Ou{constructor(t){let s;t?typeof t=="string"||Ru(t)?s={value:t}:Ds(t)?s={path:t}:s=t:s={},this.data={},this.messages=[],this.history=[],this.cwd=Iu.cwd(),this.value,this.stored,this.result,this.map;let i=-1;for(;++i<fs.length;){const a=fs[i];a in s&&s[a]!==void 0&&s[a]!==null&&(this[a]=a==="history"?[...s[a]]:s[a])}let n;for(n in s)fs.includes(n)||(this[n]=s[n])}get path(){return this.history[this.history.length-1]}set path(t){Ds(t)&&(t=_u(t)),ps(t,"path"),this.path!==t&&this.history.push(t)}get dirname(){return typeof this.path=="string"?on.dirname(this.path):void 0}set dirname(t){io(this.basename,"dirname"),this.path=on.join(t||"",this.basename)}get basename(){return typeof this.path=="string"?on.basename(this.path):void 0}set basename(t){ps(t,"basename"),hs(t,"basename"),this.path=on.join(this.dirname||"",t)}get extname(){return typeof this.path=="string"?on.extname(this.path):void 0}set extname(t){if(hs(t,"extname"),io(this.dirname,"extname"),t){if(t.charCodeAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=on.join(this.dirname,this.stem+(t||""))}get stem(){return typeof this.path=="string"?on.basename(this.path,this.extname):void 0}set stem(t){ps(t,"stem"),hs(t,"stem"),this.path=on.join(this.dirname||"",t+(this.extname||""))}toString(t){return(this.value||"").toString(t||void 0)}message(t,s,i){const n=new Kt(t,s,i);return this.path&&(n.name=this.path+":"+n.name,n.file=this.path),n.fatal=!1,this.messages.push(n),n}info(t,s,i){const n=this.message(t,s,i);return n.fatal=null,n}fail(t,s,i){const n=this.message(t,s,i);throw n.fatal=!0,n}}function hs(r,t){if(r&&r.includes(on.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+on.sep+"`")}function ps(r,t){if(!r)throw new Error("`"+t+"` cannot be empty")}function io(r,t){if(!r)throw new Error("Setting `"+t+"` requires `path` to be set too")}function Ru(r){return So(r)}const na=_o().freeze(),Fo={}.hasOwnProperty;function _o(){const r=Au(),t=[];let s={},i,n=-1;return a.data=e,a.Parser=void 0,a.Compiler=void 0,a.freeze=p,a.attachers=t,a.use=b,a.parse=v,a.stringify=$,a.run=L,a.runSync=R,a.process=A,a.processSync=E,a;function a(){const O=_o();let Z=-1;for(;++Z<t.length;)O.use(...t[Z]);return O.data(ro(!0,{},s)),O}function e(O,Z){return typeof O=="string"?arguments.length===2?(ms("data",i),s[O]=Z,a):Fo.call(s,O)&&s[O]||null:O?(ms("data",i),s=O,a):s}function p(){if(i)return a;for(;++n<t.length;){const[O,...Z]=t[n];if(Z[0]===!1)continue;Z[0]===!0&&(Z[0]=void 0);const $e=O.call(a,...Z);typeof $e=="function"&&r.use($e)}return i=!0,n=Number.POSITIVE_INFINITY,a}function b(O,...Z){let $e;if(ms("use",i),O!=null)if(typeof O=="function")Se(O,...Z);else if(typeof O=="object")Array.isArray(O)?j(O):M(O);else throw new TypeError("Expected usable value, not `"+O+"`");return $e&&(s.settings=Object.assign(s.settings||{},$e)),a;function le(Ce){if(typeof Ce=="function")Se(Ce);else if(typeof Ce=="object")if(Array.isArray(Ce)){const[ke,...Pe]=Ce;Se(ke,...Pe)}else M(Ce);else throw new TypeError("Expected usable value, not `"+Ce+"`")}function M(Ce){j(Ce.plugins),Ce.settings&&($e=Object.assign($e||{},Ce.settings))}function j(Ce){let ke=-1;if(Ce!=null)if(Array.isArray(Ce))for(;++ke<Ce.length;){const Pe=Ce[ke];le(Pe)}else throw new TypeError("Expected a list of plugins, not `"+Ce+"`")}function Se(Ce,ke){let Pe=-1,g;for(;++Pe<t.length;)if(t[Pe][0]===Ce){g=t[Pe];break}g?(Os(g[1])&&Os(ke)&&(ke=ro(!0,g[1],ke)),g[1]=ke):t.push([...arguments])}}function v(O){a.freeze();const Z=Xn(O),$e=a.Parser;return gs("parse",$e),so($e,"parse")?new $e(String(Z),Z).parse():$e(String(Z),Z)}function $(O,Z){a.freeze();const $e=Xn(Z),le=a.Compiler;return ds("stringify",le),ao(O),so(le,"compile")?new le(O,$e).compile():le(O,$e)}function L(O,Z,$e){if(ao(O),a.freeze(),!$e&&typeof Z=="function"&&($e=Z,Z=void 0),!$e)return new Promise(le);le(null,$e);function le(M,j){r.run(O,Xn(Z),Se);function Se(Ce,ke,Pe){ke=ke||O,Ce?j(Ce):M?M(ke):$e(null,ke,Pe)}}}function R(O,Z){let $e,le;return a.run(O,Z,M),oo("runSync","run",le),$e;function M(j,Se){Ua(j),$e=Se,le=!0}}function A(O,Z){if(a.freeze(),gs("process",a.Parser),ds("process",a.Compiler),!Z)return new Promise($e);$e(null,Z);function $e(le,M){const j=Xn(O);a.run(a.parse(j),j,(Ce,ke,Pe)=>{if(Ce||!ke||!Pe)Se(Ce);else{const g=a.stringify(ke,Pe);g==null||(Tu(g)?Pe.value=g:Pe.result=g),Se(Ce,Pe)}});function Se(Ce,ke){Ce||!ke?M(Ce):le?le(ke):Z(null,ke)}}}function E(O){let Z;a.freeze(),gs("processSync",a.Parser),ds("processSync",a.Compiler);const $e=Xn(O);return a.process($e,le),oo("processSync","process",Z),$e;function le(M){Z=!0,Ua(M)}}}function so(r,t){return typeof r=="function"&&r.prototype&&(Du(r.prototype)||t in r.prototype)}function Du(r){let t;for(t in r)if(Fo.call(r,t))return!0;return!1}function gs(r,t){if(typeof t!="function")throw new TypeError("Cannot `"+r+"` without `Parser`")}function ds(r,t){if(typeof t!="function")throw new TypeError("Cannot `"+r+"` without `Compiler`")}function ms(r,t){if(t)throw new Error("Cannot call `"+r+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function ao(r){if(!Os(r)||typeof r.type!="string")throw new TypeError("Expected node, got `"+r+"`")}function oo(r,t,s){if(!s)throw new Error("`"+r+"` finished async. Use `"+t+"` instead")}function Xn(r){return Bu(r)?r:new Ou(r)}function Bu(r){return!!(r&&typeof r=="object"&&"message"in r&&"messages"in r)}function Tu(r){return typeof r=="string"||So(r)}const Pu={cref:{signature:"s m"},Cref:{signature:"s m"},crefrange:{signature:"s m m"},Crefrange:{signature:"s m m"},cpageref:{signature:"s m"},Cpageref:{signature:"s m"},ref:{signature:"m"},pageref:{signature:"m"},namecref:{signature:"m"},nameCref:{signature:"m"},lcnamecref:{signature:"m"},namecrefs:{signature:"m"},nameCrefs:{signature:"m"},lcnamecrefs:{signature:"m"},labelcref:{signature:"m"},labelcpageref:{signature:"m"},crefalias:{signature:"m m"},crefname:{signature:"m m m"},crefdefaultlabelformat:{signature:"m"},crefrangeconjunction:{signature:"m"}},qu={},Lo={"*":{openMark:"",closeMark:""},"{":{openMark:"{",closeMark:"}"},"[":{openMark:"[",closeMark:"]"},"(":{openMark:"(",closeMark:")"},"<":{openMark:"<",closeMark:">"}},ju=new Set(Object.values(Lo).map(r=>r.closeMark).filter(r=>r));function Nu(r){const t=[];for(const s of r.split("")){if(ju.has(s))continue;const i=Lo[s];if(i==null)throw new Error(`Unknown open/close mark type "${s}"`);t.push(i)}return t}function Mt(r,t){if(r==null)return{type:"argument",content:[],openMark:"",closeMark:""};if(typeof r=="string"&&(r=Gu(r)),!Array.isArray(r)&&r.type==="argument")return r;let s=(t==null?void 0:t.openMark)??"{",i=(t==null?void 0:t.closeMark)??"}";if(t!=null&&t.braces){const n=Nu(t.braces);n[0]&&(s=n[0].openMark,i=n[0].closeMark)}return Array.isArray(r)||(r=[r]),{type:"argument",content:r,openMark:s,closeMark:i}}function Gu(r){return typeof r=="string"?{type:"string",content:r}:r}const ei=Symbol("linebreak"),_n="\\";function Dt(r){if(typeof r=="string")return[r];if(Array.isArray(r))return[].concat(...r.map(i=>Dt(i)));let t,s;switch(r.type){case"root":return Dt(r.content);case"argument":return[r.openMark,...Dt(r.content),r.closeMark];case"comment":let i=r.suffixParbreak?"":ei,n="";return r.sameline&&r.leadingWhitespace&&(n=" "),r.sameline?[n,"%",...Dt(r.content),i]:[ei,"%",...Dt(r.content),i];case"environment":case"mathenv":case"verbatim":let a=Dt(r.env),e=[_n+"begin{",...a,"}"],p=[_n+"end{",...a,"}"];return t=r.args==null?[]:Dt(r.args),[...e,...t,...Dt(r.content),...p];case"displaymath":return[_n+"[",...Dt(r.content),_n+"]"];case"group":return["{",...Dt(r.content),"}"];case"inlinemath":return["$",...Dt(r.content),"$"];case"macro":return t=r.args==null?[]:Dt(r.args),s=r.escapeToken==null?_n:r.escapeToken,[s,...Dt(r.content),...t];case"parbreak":return[ei,ei];case"string":return[r.content];case"verb":return[_n,r.env,r.escape,...Dt(r.content),r.escape];case"whitespace":return[" "];default:return console.warn("Cannot find render for node ",r,`(of type ${typeof r})`),[""+r]}}function hn(r,t){return Dt(r).map(i=>i===ei?`
`:i).join("")}function Hu(r){const t=Array.isArray(r)?r.length>0?typeof r[0]=="string"?Object.fromEntries(r.map(s=>{if(typeof s!="string")throw new Error("Wrong branch of map function");return[s,{}]})):Object.fromEntries(r.map(s=>{if(typeof s=="string")throw new Error("Wrong branch of map function");return s.escapeToken!=null?[s.content,{escapeToken:s.escapeToken}]:[s.content,{}]})):{}:r;return function(i){if(i==null||i.type!=="macro")return!1;const n=t[i.content];return n?typeof n=="object"&&"escapeToken"in n?n.escapeToken==null||n.escapeToken===i.escapeToken:!0:!1}}function zu(r){const t=Array.isArray(r)?Object.fromEntries(r.map(s=>[s,{}])):r;return function(i){if(!Ue.anyEnvironment(i))return!1;const n=hn(i.env);return!!t[n]}}const Ue={macro(r,t){return r==null?!1:r.type==="macro"&&(t==null||r.content===t)},anyMacro(r){return Ue.macro(r)},environment(r,t){return r==null?!1:(r.type==="environment"||r.type==="mathenv")&&(t==null||hn(r.env)===t)},anyEnvironment(r){return Ue.environment(r)},comment(r){return r==null?!1:r.type==="comment"},parbreak(r){return r==null?!1:r.type==="parbreak"},whitespace(r){return r==null?!1:r.type==="whitespace"},whitespaceLike(r){return r==null?!1:r.type==="whitespace"||r.type==="whitespace"&&r.leadingWhitespace===!0},string(r,t){return r==null?!1:r.type==="string"&&(t==null||r.content===t)},anyString(r){return Ue.string(r)},group(r){return r==null?!1:r.type==="group"},argument(r){return r==null?!1:r.type==="argument"},blankArgument(r){return Ue.argument(r)?r.openMark===""&&r.closeMark===""&&r.content.length===0:!1},math(r){return r==null?!1:r.type==="displaymath"||r.type==="inlinemath"},createMacroMatcher:Hu,createEnvironmentMatcher:zu};function Qu(r){const t={enter:[],leave:[]};if(Array.isArray(r))return t;if(Ue.math(r))return{enter:["content"],leave:[]};const s=r._renderInfo||{};if(s.inMathMode==null)return t;if(Ue.macro(r)){if(s.inMathMode===!0)return{enter:["args"],leave:[]};if(s.inMathMode===!1)return{enter:[],leave:["args"]}}return Ue.environment(r)?s.inMathMode===!0?{enter:["content"],leave:[]}:{enter:[],leave:["content"]}:t}const Bs=Symbol("continue"),Oo=Symbol("skip"),Ri=Symbol("exit"),Wu={inMathMode:!1,hasMathModeAncestor:!1};function Sn(r,t,s){const{startingContext:i=Wu,test:n=()=>!0,includeArrays:a=!1}=s||{};let e,p;typeof t=="function"?e=t:t&&typeof t=="object"&&(e=t.enter,p=t.leave),b(r,{key:void 0,index:void 0,parents:[],containingArray:void 0,context:{...i}});function b(v,{key:$,index:L,parents:R,context:A,containingArray:E}){const O=a?n(v,{key:$,index:L,parents:R,context:A,containingArray:E}):!Array.isArray(v)&&n(v,{key:$,index:L,parents:R,context:A,containingArray:E}),Z=e&&O?vs(e(v,{key:$,index:L,parents:R,context:A,containingArray:E})):[Bs];if(Z[0]===Ri)return Z;if(Z[0]===Oo)return p&&O?vs(p(v,{key:$,index:L,parents:R,context:A,containingArray:E})):Z;if(Array.isArray(v))for(let $e=0;$e>-1&&$e<v.length;$e++){const le=v[$e],M=b(le,{key:$,index:$e,parents:R,context:A,containingArray:v});if(M[0]===Ri)return M;typeof M[1]=="number"&&($e=M[1]-1)}else{let $e=["content","args"];switch(v.type){case"macro":$e=["args"];break;case"comment":case"string":case"verb":case"verbatim":$e=[];break}const le=Qu(v);for(const M of $e){const j=v[M],Se=[v].concat(R);if(j==null)continue;const Ce={...A};le.enter.includes(M)?(Ce.inMathMode=!0,Ce.hasMathModeAncestor=!0):le.leave.includes(M)&&(Ce.inMathMode=!1);const ke=b(j,{key:M,index:void 0,parents:Se,context:Ce,containingArray:void 0});if(ke[0]===Ri)return ke}}return p&&O?vs(p(v,{key:$,index:L,parents:R,context:A,containingArray:E})):Z}}function vs(r){return r==null?[Bs]:Array.isArray(r)?r:typeof r=="number"?[Bs,r]:[r]}function Qi(r,t){return t!=null&&(r._renderInfo={...r._renderInfo||{},...t}),r}function Hn(r){if(!Array.isArray(r))return console.warn("Trying to trim a non-array ast",r),r;const{trimmedStart:t}=Ro(r),{trimmedEnd:s}=ia(r);return{trimmedStart:t,trimmedEnd:s}}function Ro(r){const{start:t}=Do(r);r.splice(0,t);for(const s of r){if(!Ue.comment(s))break;(s.leadingWhitespace||s.sameline)&&(s.leadingWhitespace=!1),t>0&&s.sameline&&(s.sameline=!1)}return{trimmedStart:t}}function ia(r){const{end:t}=Do(r);r.splice(r.length-t,t);for(let s=r.length-1;s>=0;s--){const i=r[s];if(!Ue.comment(i))break;delete i.suffixParbreak,Ue.comment(i)&&i.leadingWhitespace&&!i.sameline&&(i.leadingWhitespace=!1)}return{trimmedEnd:t}}function Do(r){let t=0,s=0;for(const i of r)if(Ue.whitespace(i)||Ue.parbreak(i))t++;else break;if(t===r.length)return{start:t,end:0};for(let i=r.length-1;i>=0;i--){const n=r[i];if(Ue.whitespace(n)||Ue.parbreak(n))s++;else break}return{start:t,end:s}}const Yu=function(){return t=>{Sn(t,s=>{if(!(Ue.math(s)||Ue.anyEnvironment(s)))return;let i=s.content[0];if(Ue.comment(i)&&i.sameline){i.suffixParbreak=!1,ia(s.content);const{trimmedStart:n}=Ro(s.content.slice(1));s.content.splice(1,n)}else Hn(s.content)})}},Uu=function(){return t=>{Hn(t.content)}};function Vu(r,t=()=>!1,s){if(!Array.isArray(r))throw new Error(`Can only split an Array, not ${r}`);const{onlySplitOnFirstOccurrence:i=!1}={},n=[];for(let p=0;p<r.length&&!(t(r[p])&&(n.push(p),i));p++);if(n.length===0)return{segments:[r],separators:[]};let a=n.map(p=>r[p]),e=n.map((p,b)=>{const v=b===0?0:n[b-1]+1;return r.slice(v,p)});return e.push(r.slice(n[n.length-1]+1,r.length)),{segments:e,separators:a}}function Xu(r,t){if(typeof t=="string"&&(t=[t]),!Array.isArray(t))throw new Error("Type coercion failed");const s=Ue.createMacroMatcher(t),{segments:i,separators:n}=Vu(r,s);return{segments:i,macros:n}}function Ku(r,t){for(let s=r.length-1;s>=0;s--){const i=r[s];if(!(Ue.whitespace(i)||Ue.comment(i)||Ue.parbreak(i)))return s}}function Nt(r,t="item"){let{segments:s,macros:i}=Xu(r,t);for(let e=0;e<s.length;e++){const p=s[e];e===0?ia(p):Hn(p),p.length>0&&e>0&&p.unshift({type:"whitespace"})}let n=new WeakSet,a=i.flatMap((e,p)=>{var b;const v=s[p+1],$=Zu(v);return e.args=e.args||[],e.args.push(Mt(v,{openMark:"",closeMark:""})),Qi(e,{inParMode:!0}),(p>0||((b=s[0])==null?void 0:b.length)>0)&&n.add(e),[e,...$]});a=a.flatMap(e=>n.has(e)?[{type:"parbreak"},e]:e),a.unshift(...s[0]);for(let e=0;e<a.length-1;e++){const p=a[e],b=a[e+1];if(Ue.parbreak(b)&&(Ue.comment(p)&&(p.suffixParbreak=!0),Ue.macro(p)&&p.args&&p.args[p.args.length-1].closeMark==="")){const v=p.args[p.args.length-1].content,$=v[v.length-1];Ue.comment($)&&($.suffixParbreak=!0)}}return a}function Zu(r){let t=Ku(r);return t===r.length-1||t==null&&r.length===0?[]:(t==null&&(t=-1),r.splice(t+1))}const Ju={answerline:{signature:"o"},fillin:{signature:"o o"},fullwidth:{signature:"m"},fillwidthlines:{signature:"m"},fillwidthdottedlines:{signature:"m"},fillwidthgrid:{signature:"m"},makeemptybox:{signature:"m"},CorrectChoiceEmphasis:{signature:"m",renderInfo:{breakAround:!0}},SolutionEmphasis:{signature:"m",renderInfo:{breakAround:!0}},uplevel:{signature:"m",renderInfo:{breakAround:!0}},checkboxchar:{signature:"m",renderInfo:{breakAround:!0}},checkedchar:{signature:"m",renderInfo:{breakAround:!0}},pointname:{signature:"m",renderInfo:{breakAround:!0}},marginpointname:{signature:"m",renderInfo:{breakAround:!0}},extrawidth:{signature:"m",renderInfo:{breakAround:!0}},pointformat:{signature:"m",renderInfo:{breakAround:!0}},bonuspointformat:{signature:"m",renderInfo:{breakAround:!0}},totalformat:{signature:"m",renderInfo:{breakAround:!0}},qformat:{signature:"m",renderInfo:{breakAround:!0}},titledquestion:{signature:"m o",renderInfo:{breakAround:!0}},pointpoints:{signature:"m m",renderInfo:{breakAround:!0}},bonuspointpoints:{signature:"m m",renderInfo:{breakAround:!0}}},ec={choices:{signature:"o",processContent:r=>Nt(r,"choice")},checkboxes:{signature:"o",processContent:r=>Nt(r,"choice")},oneparchoices:{signature:"o",processContent:r=>Nt(r,"choice")},oneparcheckboxes:{signature:"o",processContent:r=>Nt(r,"choice")},parts:{signature:"o",processContent:r=>Nt(r,"part")},subparts:{signature:"o",processContent:r=>Nt(r,"subpart")},subsubparts:{signature:"o",processContent:r=>Nt(r,"subsubpart")},questions:{signature:"o",processContent:r=>Nt(r,"question")}},rc={geometry:{signature:"m",renderInfo:{breakAround:!0,pgfkeysArgs:!0}}},tc={},nc={hypersetup:{signature:"m",renderInfo:{breakAround:!0,pgfkeysArgs:!0}},href:{signature:"o m m"},url:{signature:"m"},nolinkurl:{signature:"m"},hyperbaseurl:{signature:"m"},hyperimage:{signature:"m m"},hyperdef:{signature:"m m m"},hyperref:{signature:"o m"},hyperlink:{signature:"m m"},hypertarget:{signature:"m m"},autoref:{signature:"s m"},pageref:{signature:"s m"},autopageref:{signature:"s m"},pdfstringdef:{signature:"m m"},pdfbookmark:{signature:"o m m"},currentpdfbookmark:{signature:"m m"},subpdfbookmark:{signature:"m m"},belowpdfbookmark:{signature:"m m"},texorpdfstring:{signature:"m m"},thispdfpagelabel:{signature:"m"},hypercalcbp:{signature:"m"}},ic={},sc={"\\":{signature:"!s !o",renderInfo:{breakAfter:!0}},_:{signature:"m",escapeToken:""},"^":{signature:"m",escapeToken:""},newcommand:{signature:"s +m o +o +m",renderInfo:{breakAround:!0,namedArguments:["starred","name","numArgs","default","body"]}},renewcommand:{signature:"s +m o +o +m",renderInfo:{breakAround:!0,namedArguments:["starred","name","numArgs","default","body"]}},providecommand:{signature:"s +m o +o +m",renderInfo:{breakAround:!0}},newcounter:{signature:"m o",renderInfo:{breakAround:!0}},usecounter:{signature:"m"},setcounter:{signature:"m m",renderInfo:{breakAround:!0}},addtocounter:{signature:"m m",renderInfo:{breakAround:!0}},stepcounter:{signature:"m",renderInfo:{breakAround:!0}},refstepcounter:{signature:"m",renderInfo:{breakAround:!0}},newlength:{signature:"m",renderInfo:{breakAround:!0}},addtolength:{signature:"m m",renderInfo:{breakAround:!0}},settodepth:{signature:"m m",renderInfo:{breakAround:!0}},settoheight:{signature:"m m",renderInfo:{breakAround:!0}},settowidth:{signature:"m m",renderInfo:{breakAround:!0}},stretch:{signature:"m"},hspace:{signature:"s m"},vspace:{signature:"s m",renderInfo:{breakAround:!0}},vfill:{renderInfo:{breakAround:!0}},indent:{renderInfo:{breakAround:!0}},phantom:{signature:"m"},vphantom:{signature:"m"},hphantom:{signature:"m"},noindent:{renderInfo:{breakAround:!0}},smallskip:{renderInfo:{breakAround:!0}},medskip:{renderInfo:{breakAround:!0}},bigskip:{renderInfo:{breakAround:!0}},smallbreak:{renderInfo:{breakAround:!0}},medbreak:{renderInfo:{breakAround:!0}},bigbreak:{renderInfo:{breakAround:!0}},newline:{renderInfo:{breakAround:!0}},linebreak:{signature:"o",renderInfo:{breakAround:!0}},nolinebreak:{signature:"o",renderInfo:{breakAround:!0}},clearpage:{renderInfo:{breakAround:!0}},cleardoublepage:{renderInfo:{breakAround:!0}},newpage:{renderInfo:{breakAround:!0}},enlargethispage:{signature:"s",renderInfo:{breakAround:!0}},pagebreak:{signature:"o",renderInfo:{breakAround:!0}},nopagebreak:{signature:"o",renderInfo:{breakAround:!0}},newsavebox:{signature:"m",renderInfo:{breakAround:!0}},sbox:{signature:"m m",renderInfo:{breakAround:!0}},savebox:{signature:"m o o m",renderInfo:{breakAround:!0}},mbox:{signature:"m"},makebox:{signature:"d() o o m",renderInfo:{breakAround:!0}},fbox:{signature:"m"},framebox:{signature:"o o m",renderInfo:{breakAround:!0}},frame:{signature:"m",renderInfo:{breakAround:!0}},parbox:{signature:"o o o m m",renderInfo:{breakAround:!0}},raisebox:{signature:"m o o m"},marginpar:{signature:"o m",renderInfo:{breakAround:!0}},colorbox:{signature:"o m m",renderInfo:{breakAround:!0}},fcolorbox:{signature:"o m m",renderInfo:{breakAround:!0}},rotatebox:{signature:"o m m"},scalebox:{signature:"m o m"},reflectbox:{signature:"m"},resizebox:{signature:"s m m m"},newenvironment:{signature:"s m o o m m",renderInfo:{breakAround:!0}},renewenvironment:{signature:"s m o o m m",renderInfo:{breakAround:!0}},newtheorem:{signature:"s m o m o",renderInfo:{breakAround:!0}},newfont:{signature:"m m",renderInfo:{breakAround:!0}},alph:{signature:"m"},Alph:{signature:"m"},arabic:{signature:"m"},roman:{signature:"m"},Roman:{signature:"m"},fnsymbol:{signature:"m"},documentclass:{signature:"o m",renderInfo:{breakAround:!0,pgfkeysArgs:!0}},usepackage:{signature:"o m",renderInfo:{breakAround:!0,pgfkeysArgs:!0}},item:{signature:"o",renderInfo:{hangingIndent:!0,namedArguments:["label"]}},value:{signature:"m"},centering:{renderInfo:{breakAround:!0}},input:{signature:"m",renderInfo:{breakAround:!0}},include:{signature:"m",renderInfo:{breakAround:!0}},includeonly:{signature:"m",renderInfo:{breakAround:!0,pgfkeysArgs:!0}},discretionary:{signature:"m m m"},hyphenation:{signature:"m m m"},footnote:{signature:"o m",renderInfo:{inParMode:!0}},footnotemark:{signature:"o"},footnotetext:{signature:"o m",renderInfo:{inParMode:!0}},caption:{signature:"o m",renderInfo:{inParMode:!0,breakAround:!0}},sqrt:{signature:"o m",renderInfo:{inMathMode:!0}},frac:{signature:"m m",renderInfo:{inMathMode:!0}},stackrel:{signature:"m m"},ensuremath:{signature:"m",renderInfo:{inMathMode:!0}},abstract:{signature:"m",renderInfo:{breakAround:!0,inParMode:!0}},maketitle:{renderInfo:{breakAround:!0}},doublespacing:{renderInfo:{breakAround:!0}},singlespacing:{renderInfo:{breakAround:!0}},author:{signature:"m",renderInfo:{breakAround:!0,inParMode:!0}},date:{signature:"o m",renderInfo:{breakAround:!0}},thanks:{signature:"m",renderInfo:{breakAround:!0,inParMode:!0}},title:{signature:"o m",renderInfo:{breakAround:!0,inParMode:!0}},pagenumbering:{signature:"m",renderInfo:{breakAround:!0}},pagestyle:{signature:"m",renderInfo:{breakAround:!0}},thispagestyle:{signature:"m",renderInfo:{breakAround:!0}},definecolor:{signature:"m m m",renderInfo:{breakAround:!0}},pagecolor:{signature:"o m",renderInfo:{breakAround:!0}},nopagecolor:{renderInfo:{breakAround:!0}},multicolumn:{signature:"m m m"},includegraphics:{signature:"s o o m",renderInfo:{breakAround:!0,pgfkeysArgs:!0}},rule:{signature:"o m m"},part:{signature:"s o m",renderInfo:{breakAround:!0,inParMode:!0,namedArguments:["starred","tocTitle","title"]}},chapter:{signature:"s o m",renderInfo:{breakAround:!0,inParMode:!0,namedArguments:["starred","tocTitle","title"]}},section:{signature:"s o m",renderInfo:{breakAround:!0,inParMode:!0,namedArguments:["starred","tocTitle","title"]}},subsection:{signature:"s o m",renderInfo:{breakAround:!0,inParMode:!0,namedArguments:["starred","tocTitle","title"]}},subsubsection:{signature:"s o m",renderInfo:{breakAround:!0,inParMode:!0,namedArguments:["starred","tocTitle","title"]}},paragraph:{signature:"s o m",renderInfo:{breakAround:!0,inParMode:!0,namedArguments:["starred","tocTitle","title"]}},subparagraph:{signature:"s o m",renderInfo:{breakAround:!0,inParMode:!0,namedArguments:["starred","tocTitle","title"]}},appendix:{renderInfo:{breakAround:!0,inParMode:!0}},frontmatter:{renderInfo:{breakAround:!0,inParMode:!0}},mainmatter:{renderInfo:{breakAround:!0,inParMode:!0}},backmatter:{renderInfo:{breakAround:!0,inParMode:!0}},bibitem:{signature:"o m",renderInfo:{hangingIndent:!0}},cite:{signature:"o m"},textrm:{signature:"m",renderInfo:{inParMode:!0}},textit:{signature:"m",renderInfo:{inParMode:!0}},textmd:{signature:"m",renderInfo:{inParMode:!0}},textbf:{signature:"m",renderInfo:{inParMode:!0}},textup:{signature:"m",renderInfo:{inParMode:!0}},textsl:{signature:"m",renderInfo:{inParMode:!0}},textsf:{signature:"m",renderInfo:{inParMode:!0}},textsc:{signature:"m",renderInfo:{inParMode:!0}},texttt:{signature:"m",renderInfo:{inParMode:!0}},emph:{signature:"m",renderInfo:{inParMode:!0}},textnormal:{signature:"m",renderInfo:{inParMode:!0}},uppercase:{signature:"m",renderInfo:{inParMode:!0}},mathbf:{signature:"m"},mathsf:{signature:"m"},mathtt:{signature:"m"},mathit:{signature:"m"},mathnormal:{signature:"m"},mathcal:{signature:"m"},mathrm:{signature:"m"},setlength:{signature:"m m",renderInfo:{breakAround:!0}},ref:{signature:"s m"},label:{signature:"o m"},printbibliography:{renderInfo:{breakAround:!0}},addtocontents:{signature:"m m",renderInfo:{breakAround:!0}},addcontentsline:{signature:"m m m",renderInfo:{breakAround:!0}},contentsline:{signature:"m m m",renderInfo:{breakAround:!0}},bibliography:{signature:"m",renderInfo:{breakAround:!0}},bibliographystyle:{signature:"m",renderInfo:{breakAround:!0}}},ac={document:{processContent:r=>(Hn(r),r)},array:{signature:"o m",renderInfo:{alignContent:!0}},description:{signature:"o",processContent:Nt},enumerate:{signature:"o",processContent:Nt,renderInfo:{pgfkeysArgs:!0}},itemize:{signature:"o",processContent:Nt},trivlist:{signature:"o",processContent:Nt},list:{signature:"m m",processContent:Nt},figure:{signature:"o"},"figure*":{signature:"o"},filecontents:{signature:"o m"},"filecontents*":{signature:"o m"},minipage:{signature:"o o o m"},picture:{signature:"r() d()"},tabbing:{renderInfo:{alignContent:!0}},table:{signature:"o"},tabular:{signature:"o m",renderInfo:{alignContent:!0}},"tabular*":{signature:"m o m",renderInfo:{alignContent:!0}},thebibliography:{signature:"m",processContent:r=>Nt(r,"bibitem")},math:{renderInfo:{inMathMode:!0}}},oc=function(){function r(n,a){function e(){this.constructor=n}e.prototype=a.prototype,n.prototype=new e}function t(n,a,e,p){var b=Error.call(this,n);return Object.setPrototypeOf&&Object.setPrototypeOf(b,t.prototype),b.expected=a,b.found=e,b.location=p,b.name="SyntaxError",b}r(t,Error);function s(n,a,e){return e=e||" ",n.length>a?n:(a-=n.length,e+=e.repeat(a),n+e.slice(0,a))}t.prototype.format=function(n){var a="Error: "+this.message;if(this.location){var e=null,p;for(p=0;p<n.length;p++)if(n[p].source===this.location.source){e=n[p].text.split(/\r\n|\n|\r/g);break}var b=this.location.start,v=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(b):b,$=this.location.source+":"+v.line+":"+v.column;if(e){var L=this.location.end,R=s("",v.line.toString().length," "),A=e[b.line-1],E=b.line===L.line?L.column:A.length+1,O=E-b.column||1;a+=`
 --> `+$+`
`+R+` |
`+v.line+" | "+A+`
`+R+" | "+s("",b.column-1," ")+s("",O,"^")}else a+=`
 at `+$}return a},t.buildMessage=function(n,a){var e={literal:function(A){return'"'+b(A.text)+'"'},class:function(A){var E=A.parts.map(function(O){return Array.isArray(O)?v(O[0])+"-"+v(O[1]):v(O)});return"["+(A.inverted?"^":"")+E.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(A){return A.description}};function p(A){return A.charCodeAt(0).toString(16).toUpperCase()}function b(A){return A.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+p(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+p(E)})}function v(A){return A.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+p(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+p(E)})}function $(A){return e[A.type](A)}function L(A){var E=A.map($),O,Z;if(E.sort(),E.length>0){for(O=1,Z=1;O<E.length;O++)E[O-1]!==E[O]&&(E[Z]=E[O],Z++);E.length=Z}switch(E.length){case 1:return E[0];case 2:return E[0]+" or "+E[1];default:return E.slice(0,-1).join(", ")+", or "+E[E.length-1]}}function R(A){return A?'"'+b(A)+'"':"end of input"}return"Expected "+L(n)+" but "+R(a)+" found."};function i(n,a){a=a!==void 0?a:{};var e={},p=a.grammarSource,b={document:Sa,math:Wl},v=Sa,$="%",L=".",R="verb*",A="verb",E="[",O="]",Z="lstinline",$e="mintinline",le="mint",M="minted",j="verbatim*",Se="verbatim",Ce="filecontents*",ke="filecontents",Pe="comment",g="lstlisting",Qe="(",$r=")",Cr="begin",me="end",Dr="equation*",gr="equation",Ie="align*",Er="align",Lr="alignat*",Xr="alignat",kr="gather*",xe="gather",ve="multline*",X="multline",Fr="flalign*",Br="flalign",nr="split",tr="math",ie="displaymath",Ke="\\",Pr="{",rt="}",Zr="$",wr="&",it="\r",tt=`
`,ne=`\r
`,de="#",be="^",Ze="_",dr="\0",he=/^[^ \t\n\r]/,Jr=/^[ \t]/,Qr=/^[a-zA-Z]/,J=/^[0-9]/,K=/^[.,;:\-*\/()!?=+<>[\]`'"~]/,W=ut("document"),xr=ut("math"),se=ut("token"),He=Hl(),hr=ut("parbreak"),We=ut("math token"),ye=ut("nonchar token"),st=vr("%",!1),Mr=ut("whitespace"),ht=ut("number"),Or=vr(".",!1),q=ut("special macro"),D=vr("verb*",!1),H=vr("verb",!1),te=vr("[",!1),ce=vr("]",!1),ze=Un([" ","	",`
`,"\r"],!0,!1),br=ut("verbatim listings"),ir=vr("lstinline",!1),mr=ut("verbatim minted"),ar=vr("mintinline",!1),yr=vr("mint",!1),pr=ut("verbatim minted environment"),_r=vr("minted",!1),Y=ut("verbatim environment"),ue=vr("verbatim*",!1),Be=vr("verbatim",!1),er=vr("filecontents*",!1),Ee=vr("filecontents",!1),Rr=vr("comment",!1),cr=vr("lstlisting",!1),l=ut("macro"),m=ut("group"),o=ut("environment"),c=ut("math environment"),d=vr("(",!1),I=vr(")",!1),N=vr("begin",!1),y=vr("end",!1),u=vr("equation*",!1),F=vr("equation",!1),fe=vr("align*",!1),_e=vr("align",!1),ee=vr("alignat*",!1),Ye=vr("alignat",!1),Xe=vr("gather*",!1),jr=vr("gather",!1),at=vr("multline*",!1),Kr=vr("multline",!1),ur=vr("flalign*",!1),Ur=vr("flalign",!1),Nr=vr("split",!1),Te=vr("math",!1),St=vr("displaymath",!1),Tr=ut("escape"),vt=vr("\\",!1),Rt=vr("{",!1),k=vr("}",!1),Q=vr("$",!1),U=vr("&",!1),Fe=ut("newline"),we=vr("\r",!1),Le=vr(`
`,!1),_=vr(`\r
`,!1),V=vr("#",!1),ge=vr("^",!1),Me=vr("_",!1),Ve=vr("\0",!1),Gr=Un([" ","	"],!1,!1),ot=ut("letter"),bt=Un([["a","z"],["A","Z"]],!1,!1),di=ut("digit"),Vi=Un([["0","9"]],!1,!1),Xi=ut("punctuation"),pn=Un([".",",",";",":","-","*","/","(",")","!","?","=","+","<",">","[","]","`","'",'"',"~"],!1,!1),Ki=ut("full comment"),Zi=ut("comment"),mi=function(f){return Sr("root",{content:f.flatMap(w=>w)})},Yn=function(f){return f},vi=function(f){return Sr("inlinemath",{content:f.flatMap(w=>w)})},gn=function(f){return Sr("string",{content:f})},Ji=function(f){return Sr("string",{content:f})},dn=function(){return Sr("parbreak")},bi=function(f){return f},yi=function(f){return f},mn=function(){return Sr("macro",{content:"^",escapeToken:""})},kn=function(){return Sr("macro",{content:"_",escapeToken:""})},C=function(f){return Sr("string",{content:f})},T=function(){return Sr("whitespace")},re=function(f,w){return f.join("")+"."+w.join("")},oe=function(f){return"."+f.join("")},De=function(f){return f.join("")+"."},Ne=function(f){return Sr("string",{content:f})},Wr=function(f,w,B){return B==w},_t=function(f,w,B){return B},vn=function(f,w,B,S){return S==w},bn=function(f,w,B){return Sr("verb",{env:f,escape:w,content:B.join("")})},la=function(f){return f},ll=function(f){return Sr("displaymath",{content:f.flatMap(w=>w)})},ua=function(f){return f},ul=function(f){return Sr("inlinemath",{content:f.flatMap(w=>w)})},ca=function(f){return f},cl=function(f){return Sr("displaymath",{content:f.flatMap(w=>w)})},fa=function(f){return f.type==="string"&&f.content==="]"},ha=function(f){return f},fl=function(f){return[Sr("string",{content:"["}),...f,Sr("string",{content:"]"})]},pa=function(f){return f},hl=function(f){return Sr("group",{content:Sr("string",{content:f.join("")})})},ga=function(f,w){return w==f},da=function(f,w){return w},pl=function(f,w,B){return B==f},gl=function(f,w){return[Sr("string",{content:f}),Sr("string",{content:w.join("")}),Sr("string",{content:f})]},dl=function(f,w,B){return[Sr("macro",{content:f}),...w||[],...[].concat(B)]},ml=function(f,w,B,S){return[Sr("macro",{content:f}),...w||[],B,...[].concat(S)]},ma=function(f,w,B,S){return Ei({content:[f]},S)},vl=function(f,w,B,S){const z=[...w||[],B,{type:"string",content:S}];return Sr("environment",{env:f,content:z})},va=function(f,w){return Ei({content:[f]},w)},ba=function(f,w){return w},bl=function(f,w){return Sr("verbatim",{env:f,content:w})},yl=function(f){return f.join("")},Al=function(f){return f},$l=function(f){return Sr("macro",{content:f})},ya=function(f){return f},wl=function(f){return Sr("group",{content:f.flatMap(w=>w)})},xl=function(f){return Gl().slice(1,-1)},Aa=function(f,w,B){return Ei(f,B)},$a=function(f,w,B){return B},El=function(f,w,B){return B=B.flatMap(S=>S),Sr("environment",{env:f,content:w?[w,...B]:B})},wa=function(f,w,B){return Ei({content:[f]},B)},xa=function(f,w,B){return B},kl=function(f,w,B){return B=B.flatMap(S=>S),Sr("mathenv",{env:f,content:w?[w,...B]:B})},Cl=function(f){return Sr("string",{content:f})},Ml=function(){return Sr("string",{content:"\\"})},Sl=function(f){return Sr("string",{content:f})},Il=function(f){return Sr("string",{content:f})},Fl=function(f){return Sr("string",{content:f})},_l=function(f){return Sr("string",{content:f})},Ll=function(f){return Sr("string",{content:f})},Ol=function(f){return Sr("string",{content:f})},Rl=function(f){return Sr("string",{content:f})},Dl=function(){return" "},Bl=function(f){return Sr("string",{content:f})},Tl=function(f,w){return Sr("comment",{...w,sameline:!1,leadingWhitespace:f.length>0})},Pl=function(f,w){return Sr("comment",{...w,sameline:!0,leadingWhitespace:f.length>0})},Ea=function(f){return f},ql=function(f){return{content:f.join(""),suffixParbreak:!0}},ka=function(f){return f},jl=function(f){return{content:f.join("")}},Nl=function(){var f=Ca();return f.start.column===1},h=0,Oe=0,Ai=[{line:1,column:1}],tn=0,es=[],G=0,$i;if("startRule"in a){if(!(a.startRule in b))throw new Error(`Can't start parsing from rule "`+a.startRule+'".');v=b[a.startRule]}function Gl(){return n.substring(Oe,h)}function Ca(){return rs(Oe,h)}function vr(f,w){return{type:"literal",text:f,ignoreCase:w}}function Un(f,w,B){return{type:"class",parts:f,inverted:w,ignoreCase:B}}function Hl(){return{type:"any"}}function zl(){return{type:"end"}}function ut(f){return{type:"other",description:f}}function Ma(f){var w=Ai[f],B;if(w)return w;for(B=f-1;!Ai[B];)B--;for(w=Ai[B],w={line:w.line,column:w.column};B<f;)n.charCodeAt(B)===10?(w.line++,w.column=1):w.column++,B++;return Ai[f]=w,w}function rs(f,w,B){var S=Ma(f),z=Ma(w),P={source:p,start:{offset:f,line:S.line,column:S.column},end:{offset:w,line:z.line,column:z.column}};return P}function Ae(f){h<tn||(h>tn&&(tn=h,es=[]),es.push(f))}function Ql(f,w,B){return new t(t.buildMessage(f,w),f,w,B)}function Sa(){var f,w,B;for(G++,f=h,w=[],B=nn();B!==e;)w.push(B),B=nn();return Oe=f,w=mi(w),f=w,G--,w=e,G===0&&Ae(W),f}function Wl(){var f,w;for(G++,f=[],w=Wt();w!==e;)f.push(w),w=Wt();return G--,w=e,G===0&&Ae(xr),f}function nn(){var f,w,B,S,z,P;if(G++,f=_a(),f===e&&(f=Da(),f===e&&(f=qa(),f===e&&(f=Zt(),f===e)))){if(f=h,w=jt(),w!==e){if(B=[],S=h,z=h,G++,P=jt(),G--,P===e?z=void 0:(h=z,z=e),z!==e?(P=Wt(),P!==e?(Oe=S,S=Yn(P)):(h=S,S=e)):(h=S,S=e),S!==e)for(;S!==e;)B.push(S),S=h,z=h,G++,P=jt(),G--,P===e?z=void 0:(h=z,z=e),z!==e?(P=Wt(),P!==e?(Oe=S,S=Yn(P)):(h=S,S=e)):(h=S,S=e);else B=e;B!==e?(S=jt(),S!==e?(Oe=f,f=vi(B)):(h=f,f=e)):(h=f,f=e)}else h=f,f=e;if(f===e&&(f=ss(),f===e&&(f=Ia(),f===e&&(f=as(),f===e&&(f=os(),f===e&&(f=Yl(),f===e&&(f=Et(),f===e&&(f=Pa(),f===e)))))))){if(f=h,w=h,B=[],S=h,z=h,G++,P=Fa(),G--,P===e?z=void 0:(h=z,z=e),z!==e?(n.length>h?(P=n.charAt(h),h++):(P=e,G===0&&Ae(He)),P!==e?(z=[z,P],S=z):(h=S,S=e)):(h=S,S=e),S!==e)for(;S!==e;)B.push(S),S=h,z=h,G++,P=Fa(),G--,P===e?z=void 0:(h=z,z=e),z!==e?(n.length>h?(P=n.charAt(h),h++):(P=e,G===0&&Ae(He)),P!==e?(z=[z,P],S=z):(h=S,S=e)):(h=S,S=e);else B=e;B!==e?w=n.substring(w,h):w=B,w!==e&&(Oe=f,w=gn(w)),f=w,f===e&&(f=sn(),f===e&&(f=qt(),f===e&&(f=jt(),f===e&&(f=h,n.length>h?(w=n.charAt(h),h++):(w=e,G===0&&Ae(He)),w!==e&&(Oe=f,w=Ji(w)),f=w))))}}return G--,f===e&&(w=e,G===0&&Ae(se)),f}function Ia(){var f,w,B,S,z,P,pe,ae;for(G++,f=h,w=h,B=[],S=Yr();S!==e;)B.push(S),S=Yr();if(S=It(),S!==e){for(z=[],P=h,pe=[],ae=Yr();ae!==e;)pe.push(ae),ae=Yr();if(ae=It(),ae!==e?(pe=[pe,ae],P=pe):(h=P,P=e),P!==e)for(;P!==e;){for(z.push(P),P=h,pe=[],ae=Yr();ae!==e;)pe.push(ae),ae=Yr();ae=It(),ae!==e?(pe=[pe,ae],P=pe):(h=P,P=e)}else z=e;if(z!==e){for(P=[],pe=Yr();pe!==e;)P.push(pe),pe=Yr();pe=h,G++,ae=Vn(),G--,ae===e?pe=void 0:(h=pe,pe=e),pe!==e?(B=[B,S,z,P,pe],w=B):(h=w,w=e)}else h=w,w=e}else h=w,w=e;if(w===e){for(w=h,B=[],S=Yr();S!==e;)B.push(S),S=Yr();if(S=It(),S!==e){for(z=[],P=h,pe=[],ae=Yr();ae!==e;)pe.push(ae),ae=Yr();if(ae=It(),ae!==e?(pe=[pe,ae],P=pe):(h=P,P=e),P!==e)for(;P!==e;){for(z.push(P),P=h,pe=[],ae=Yr();ae!==e;)pe.push(ae),ae=Yr();ae=It(),ae!==e?(pe=[pe,ae],P=pe):(h=P,P=e)}else z=e;z!==e?(B=[B,S,z],w=B):(h=w,w=e)}else h=w,w=e}return w!==e&&(Oe=f,w=dn()),f=w,G--,f===e&&(w=e,G===0&&Ae(hr)),f}function Wt(){var f,w,B,S,z;if(G++,f=_a(),f===e&&(f=Da(),f===e&&(f=qa(),f===e))){for(f=h,w=[],B=Et();B!==e;)w.push(B),B=Et();if(B=Zt(),B!==e){for(S=[],z=Et();z!==e;)S.push(z),z=Et();Oe=f,f=bi(B)}else h=f,f=e;if(f===e){for(f=h,w=[],B=Et();B!==e;)w.push(B),B=Et();if(B=ss(),B!==e){for(S=[],z=Et();z!==e;)S.push(z),z=Et();Oe=f,f=yi(B)}else h=f,f=e;if(f===e&&(f=as(),f===e)){for(f=h,w=[],B=Et();B!==e;)w.push(B),B=Et();if(B=tu(),B!==e){for(S=[],z=Et();z!==e;)S.push(z),z=Et();Oe=f,f=mn()}else h=f,f=e;if(f===e){for(f=h,w=[],B=Et();B!==e;)w.push(B),B=Et();if(B=nu(),B!==e){for(S=[],z=Et();z!==e;)S.push(z),z=Et();Oe=f,f=kn()}else h=f,f=e;f===e&&(f=os(),f===e&&(f=Et(),f===e&&(f=h,n.length>h?(w=n.charAt(h),h++):(w=e,G===0&&Ae(He)),w!==e&&(Oe=f,w=C(w)),f=w)))}}}}return G--,f===e&&(w=e,G===0&&Ae(We)),f}function Fa(){var f;return G++,f=Ut(),f===e&&(n.charCodeAt(h)===37?(f=$,h++):(f=e,G===0&&Ae(st)),f===e&&(f=sn(),f===e&&(f=qt(),f===e&&(f=jt(),f===e&&(f=ss(),f===e&&(f=It(),f===e&&(f=as(),f===e&&(f=os(),f===e&&(f=Yr(),f===e&&(f=Pa(),f===e&&(f=Na()))))))))))),G--,f===e&&G===0&&Ae(ye),f}function Et(){var f,w,B,S,z,P,pe,ae;if(G++,f=h,w=h,B=It(),B!==e){for(S=[],z=Yr();z!==e;)S.push(z),z=Yr();B=[B,S],w=B}else h=w,w=e;if(w===e){if(w=h,B=[],S=Yr(),S!==e)for(;S!==e;)B.push(S),S=Yr();else B=e;if(B!==e)if(S=It(),S!==e)if(z=h,G++,P=Vn(),G--,P===e?z=void 0:(h=z,z=e),z!==e){for(P=[],pe=Yr();pe!==e;)P.push(pe),pe=Yr();pe=h,G++,ae=It(),G--,ae===e?pe=void 0:(h=pe,pe=e),pe!==e?(B=[B,S,z,P,pe],w=B):(h=w,w=e)}else h=w,w=e;else h=w,w=e;else h=w,w=e;if(w===e)if(w=[],B=Yr(),B!==e)for(;B!==e;)w.push(B),B=Yr();else w=e}return w!==e&&(Oe=f,w=T()),f=w,G--,f===e&&(w=e,G===0&&Ae(Mr)),f}function Yl(){var f,w,B,S,z,P;if(G++,f=h,w=h,B=[],S=yn(),S!==e)for(;S!==e;)B.push(S),S=yn();else B=e;if(B!==e)if(n.charCodeAt(h)===46?(S=L,h++):(S=e,G===0&&Ae(Or)),S!==e){if(z=[],P=yn(),P!==e)for(;P!==e;)z.push(P),P=yn();else z=e;z!==e?(Oe=w,w=re(B,z)):(h=w,w=e)}else h=w,w=e;else h=w,w=e;if(w===e){if(w=h,n.charCodeAt(h)===46?(B=L,h++):(B=e,G===0&&Ae(Or)),B!==e){if(S=[],z=yn(),z!==e)for(;z!==e;)S.push(z),z=yn();else S=e;S!==e?(Oe=w,w=oe(S)):(h=w,w=e)}else h=w,w=e;if(w===e){if(w=h,B=[],S=yn(),S!==e)for(;S!==e;)B.push(S),S=yn();else B=e;B!==e?(n.charCodeAt(h)===46?(S=L,h++):(S=e,G===0&&Ae(Or)),S!==e?(Oe=w,w=De(B)):(h=w,w=e)):(h=w,w=e)}}return w!==e&&(Oe=f,w=Ne(w)),f=w,G--,f===e&&(w=e,G===0&&Ae(ht)),f}function _a(){var f,w,B,S,z,P,pe,ae,Je,Re;if(G++,f=h,w=Ut(),w!==e)if(n.substr(h,5)===R?(B=R,h+=5):(B=e,G===0&&Ae(D)),B===e&&(n.substr(h,4)===A?(B=A,h+=4):(B=e,G===0&&Ae(H))),B!==e)if(n.length>h?(S=n.charAt(h),h++):(S=e,G===0&&Ae(He)),S!==e){for(z=[],P=h,pe=h,G++,ae=h,n.length>h?(Je=n.charAt(h),h++):(Je=e,G===0&&Ae(He)),Je!==e?(Oe=h,Re=Wr(B,S,Je),Re?Re=void 0:Re=e,Re!==e?(Je=[Je,Re],ae=Je):(h=ae,ae=e)):(h=ae,ae=e),G--,ae===e?pe=void 0:(h=pe,pe=e),pe!==e?(n.length>h?(ae=n.charAt(h),h++):(ae=e,G===0&&Ae(He)),ae!==e?(Oe=P,P=_t(B,S,ae)):(h=P,P=e)):(h=P,P=e);P!==e;)z.push(P),P=h,pe=h,G++,ae=h,n.length>h?(Je=n.charAt(h),h++):(Je=e,G===0&&Ae(He)),Je!==e?(Oe=h,Re=Wr(B,S,Je),Re?Re=void 0:Re=e,Re!==e?(Je=[Je,Re],ae=Je):(h=ae,ae=e)):(h=ae,ae=e),G--,ae===e?pe=void 0:(h=pe,pe=e),pe!==e?(n.length>h?(ae=n.charAt(h),h++):(ae=e,G===0&&Ae(He)),ae!==e?(Oe=P,P=_t(B,S,ae)):(h=P,P=e)):(h=P,P=e);P=h,n.length>h?(pe=n.charAt(h),h++):(pe=e,G===0&&Ae(He)),pe!==e?(Oe=h,ae=vn(B,S,z,pe),ae?ae=void 0:ae=e,ae!==e?(pe=[pe,ae],P=pe):(h=P,P=e)):(h=P,P=e),P!==e?(Oe=f,f=bn(B,S,z)):(h=f,f=e)}else h=f,f=e;else h=f,f=e;else h=f,f=e;if(f===e&&(f=Ul(),f===e&&(f=Vl(),f===e&&(f=Xl(),f===e&&(f=Kl(),f===e))))){if(f=h,w=eu(),w!==e){for(B=[],S=h,z=h,G++,P=ns(),G--,P===e?z=void 0:(h=z,z=e),z!==e?(P=Wt(),P!==e?(Oe=S,S=la(P)):(h=S,S=e)):(h=S,S=e);S!==e;)B.push(S),S=h,z=h,G++,P=ns(),G--,P===e?z=void 0:(h=z,z=e),z!==e?(P=Wt(),P!==e?(Oe=S,S=la(P)):(h=S,S=e)):(h=S,S=e);S=ns(),S!==e?(Oe=f,f=ll(B)):(h=f,f=e)}else h=f,f=e;if(f===e){if(f=h,w=ru(),w!==e){for(B=[],S=h,z=h,G++,P=is(),G--,P===e?z=void 0:(h=z,z=e),z!==e?(P=Wt(),P!==e?(Oe=S,S=ua(P)):(h=S,S=e)):(h=S,S=e);S!==e;)B.push(S),S=h,z=h,G++,P=is(),G--,P===e?z=void 0:(h=z,z=e),z!==e?(P=Wt(),P!==e?(Oe=S,S=ua(P)):(h=S,S=e)):(h=S,S=e);S=is(),S!==e?(Oe=f,f=ul(B)):(h=f,f=e)}else h=f,f=e;if(f===e){if(f=h,w=jt(),w!==e)if(B=jt(),B!==e){for(S=[],z=h,P=h,G++,pe=h,ae=jt(),ae!==e?(Je=jt(),Je!==e?(ae=[ae,Je],pe=ae):(h=pe,pe=e)):(h=pe,pe=e),G--,pe===e?P=void 0:(h=P,P=e),P!==e?(pe=Wt(),pe!==e?(Oe=z,z=ca(pe)):(h=z,z=e)):(h=z,z=e);z!==e;)S.push(z),z=h,P=h,G++,pe=h,ae=jt(),ae!==e?(Je=jt(),Je!==e?(ae=[ae,Je],pe=ae):(h=pe,pe=e)):(h=pe,pe=e),G--,pe===e?P=void 0:(h=P,P=e),P!==e?(pe=Wt(),pe!==e?(Oe=z,z=ca(pe)):(h=z,z=e)):(h=z,z=e);z=jt(),z!==e?(P=jt(),P!==e?(Oe=f,f=cl(S)):(h=f,f=e)):(h=f,f=e)}else h=f,f=e;else h=f,f=e;f===e&&(f=Jl(),f===e&&(f=Zl()))}}}return G--,f===e&&(w=e,G===0&&Ae(q)),f}function ts(){var f,w,B,S,z,P,pe,ae;if(f=h,n.charCodeAt(h)===91?(w=E,h++):(w=e,G===0&&Ae(te)),w!==e){for(B=[],S=h,z=h,G++,P=h,pe=nn(),pe!==e?(Oe=h,ae=fa(pe),ae?ae=void 0:ae=e,ae!==e?(pe=[pe,ae],P=pe):(h=P,P=e)):(h=P,P=e),G--,P===e?z=void 0:(h=z,z=e),z!==e?(P=nn(),P!==e?(Oe=S,S=ha(P)):(h=S,S=e)):(h=S,S=e);S!==e;)B.push(S),S=h,z=h,G++,P=h,pe=nn(),pe!==e?(Oe=h,ae=fa(pe),ae?ae=void 0:ae=e,ae!==e?(pe=[pe,ae],P=pe):(h=P,P=e)):(h=P,P=e),G--,P===e?z=void 0:(h=z,z=e),z!==e?(P=nn(),P!==e?(Oe=S,S=ha(P)):(h=S,S=e)):(h=S,S=e);n.charCodeAt(h)===93?(S=O,h++):(S=e,G===0&&Ae(ce)),S!==e?(Oe=f,f=fl(B)):(h=f,f=e)}else h=f,f=e;return f}function La(){var f,w,B,S,z,P;if(f=h,w=sn(),w!==e){for(B=[],S=h,z=h,G++,P=qt(),G--,P===e?z=void 0:(h=z,z=e),z!==e?(n.length>h?(P=n.charAt(h),h++):(P=e,G===0&&Ae(He)),P!==e?(Oe=S,S=pa(P)):(h=S,S=e)):(h=S,S=e);S!==e;)B.push(S),S=h,z=h,G++,P=qt(),G--,P===e?z=void 0:(h=z,z=e),z!==e?(n.length>h?(P=n.charAt(h),h++):(P=e,G===0&&Ae(He)),P!==e?(Oe=S,S=pa(P)):(h=S,S=e)):(h=S,S=e);S=qt(),S!==e?(Oe=f,f=hl(B)):(h=f,f=e)}else h=f,f=e;return f}function Oa(){var f,w,B,S,z,P,pe,ae;if(f=h,he.test(n.charAt(h))?(w=n.charAt(h),h++):(w=e,G===0&&Ae(ze)),w!==e){for(B=[],S=h,z=h,G++,P=h,n.length>h?(pe=n.charAt(h),h++):(pe=e,G===0&&Ae(He)),pe!==e?(Oe=h,ae=ga(w,pe),ae?ae=void 0:ae=e,ae!==e?(pe=[pe,ae],P=pe):(h=P,P=e)):(h=P,P=e),G--,P===e?z=void 0:(h=z,z=e),z!==e?(n.length>h?(P=n.charAt(h),h++):(P=e,G===0&&Ae(He)),P!==e?(Oe=S,S=da(w,P)):(h=S,S=e)):(h=S,S=e);S!==e;)B.push(S),S=h,z=h,G++,P=h,n.length>h?(pe=n.charAt(h),h++):(pe=e,G===0&&Ae(He)),pe!==e?(Oe=h,ae=ga(w,pe),ae?ae=void 0:ae=e,ae!==e?(pe=[pe,ae],P=pe):(h=P,P=e)):(h=P,P=e),G--,P===e?z=void 0:(h=z,z=e),z!==e?(n.length>h?(P=n.charAt(h),h++):(P=e,G===0&&Ae(He)),P!==e?(Oe=S,S=da(w,P)):(h=S,S=e)):(h=S,S=e);S=h,n.length>h?(z=n.charAt(h),h++):(z=e,G===0&&Ae(He)),z!==e?(Oe=h,P=pl(w,B,z),P?P=void 0:P=e,P!==e?(z=[z,P],S=z):(h=S,S=e)):(h=S,S=e),S!==e?(Oe=f,f=gl(w,B)):(h=f,f=e)}else h=f,f=e;return f}function Ul(){var f,w,B,S,z;return G++,f=h,w=Ut(),w!==e?(n.substr(h,9)===Z?(B=Z,h+=9):(B=e,G===0&&Ae(ir)),B!==e?(S=ts(),S===e&&(S=null),z=La(),z===e&&(z=Oa()),z!==e?(Oe=f,f=dl(B,S,z)):(h=f,f=e)):(h=f,f=e)):(h=f,f=e),G--,f===e&&(w=e,G===0&&Ae(br)),f}function Vl(){var f,w,B,S,z,P;return G++,f=h,w=Ut(),w!==e?(n.substr(h,10)===$e?(B=$e,h+=10):(B=e,G===0&&Ae(ar)),B===e&&(n.substr(h,4)===le?(B=le,h+=4):(B=e,G===0&&Ae(yr))),B!==e?(S=ts(),S===e&&(S=null),z=Zt(),z!==e?(P=La(),P===e&&(P=Oa()),P!==e?(Oe=f,f=ml(B,S,z,P)):(h=f,f=e)):(h=f,f=e)):(h=f,f=e)):(h=f,f=e),G--,f===e&&(w=e,G===0&&Ae(mr)),f}function Xl(){var f,w,B,S,z,P,pe,ae,Je,Re,sr,Ar,qr,An,Vt;if(G++,f=h,w=xi(),w!==e)if(B=sn(),B!==e)if(n.substr(h,6)===M?(S=M,h+=6):(S=e,G===0&&Ae(_r)),S!==e)if(z=qt(),z!==e)if(P=ts(),P===e&&(P=null),pe=Zt(),pe!==e){for(ae=h,Je=[],Re=h,sr=h,G++,Ar=h,qr=Yt(),qr!==e?(An=Zt(),An!==e?(Oe=h,Vt=ma(S,P,pe,An),Vt?Vt=void 0:Vt=e,Vt!==e?(qr=[qr,An,Vt],Ar=qr):(h=Ar,Ar=e)):(h=Ar,Ar=e)):(h=Ar,Ar=e),G--,Ar===e?sr=void 0:(h=sr,sr=e),sr!==e?(n.length>h?(Ar=n.charAt(h),h++):(Ar=e,G===0&&Ae(He)),Ar!==e?(sr=[sr,Ar],Re=sr):(h=Re,Re=e)):(h=Re,Re=e);Re!==e;)Je.push(Re),Re=h,sr=h,G++,Ar=h,qr=Yt(),qr!==e?(An=Zt(),An!==e?(Oe=h,Vt=ma(S,P,pe,An),Vt?Vt=void 0:Vt=e,Vt!==e?(qr=[qr,An,Vt],Ar=qr):(h=Ar,Ar=e)):(h=Ar,Ar=e)):(h=Ar,Ar=e),G--,Ar===e?sr=void 0:(h=sr,sr=e),sr!==e?(n.length>h?(Ar=n.charAt(h),h++):(Ar=e,G===0&&Ae(He)),Ar!==e?(sr=[sr,Ar],Re=sr):(h=Re,Re=e)):(h=Re,Re=e);ae=n.substring(ae,h),Je=Yt(),Je!==e?(Re=sn(),Re!==e?(n.substr(h,6)===M?(sr=M,h+=6):(sr=e,G===0&&Ae(_r)),sr!==e?(Ar=qt(),Ar!==e?(Oe=f,f=vl(S,P,pe,ae)):(h=f,f=e)):(h=f,f=e)):(h=f,f=e)):(h=f,f=e)}else h=f,f=e;else h=f,f=e;else h=f,f=e;else h=f,f=e;else h=f,f=e;return G--,f===e&&(w=e,G===0&&Ae(pr)),f}function Kl(){var f,w,B,S,z,P,pe,ae,Je,Re,sr,Ar,qr;if(G++,f=h,w=xi(),w!==e)if(B=sn(),B!==e)if(S=Ra(),S!==e)if(z=qt(),z!==e){for(P=h,pe=[],ae=h,Je=h,G++,Re=h,sr=Yt(),sr!==e?(Ar=Zt(),Ar!==e?(Oe=h,qr=va(S,Ar),qr?qr=void 0:qr=e,qr!==e?(sr=[sr,Ar,qr],Re=sr):(h=Re,Re=e)):(h=Re,Re=e)):(h=Re,Re=e),G--,Re===e?Je=void 0:(h=Je,Je=e),Je!==e?(n.length>h?(Re=n.charAt(h),h++):(Re=e,G===0&&Ae(He)),Re!==e?(Oe=ae,ae=ba(S,Re)):(h=ae,ae=e)):(h=ae,ae=e);ae!==e;)pe.push(ae),ae=h,Je=h,G++,Re=h,sr=Yt(),sr!==e?(Ar=Zt(),Ar!==e?(Oe=h,qr=va(S,Ar),qr?qr=void 0:qr=e,qr!==e?(sr=[sr,Ar,qr],Re=sr):(h=Re,Re=e)):(h=Re,Re=e)):(h=Re,Re=e),G--,Re===e?Je=void 0:(h=Je,Je=e),Je!==e?(n.length>h?(Re=n.charAt(h),h++):(Re=e,G===0&&Ae(He)),Re!==e?(Oe=ae,ae=ba(S,Re)):(h=ae,ae=e)):(h=ae,ae=e);P=n.substring(P,h),pe=Yt(),pe!==e?(ae=sn(),ae!==e?(Je=Ra(),Je!==e?(Re=qt(),Re!==e?(Oe=f,f=bl(S,P)):(h=f,f=e)):(h=f,f=e)):(h=f,f=e)):(h=f,f=e)}else h=f,f=e;else h=f,f=e;else h=f,f=e;else h=f,f=e;return G--,f===e&&(w=e,G===0&&Ae(Y)),f}function Ra(){var f;return n.substr(h,9)===j?(f=j,h+=9):(f=e,G===0&&Ae(ue)),f===e&&(n.substr(h,8)===Se?(f=Se,h+=8):(f=e,G===0&&Ae(Be)),f===e&&(n.substr(h,13)===Ce?(f=Ce,h+=13):(f=e,G===0&&Ae(er)),f===e&&(n.substr(h,12)===ke?(f=ke,h+=12):(f=e,G===0&&Ae(Ee)),f===e&&(n.substr(h,7)===Pe?(f=Pe,h+=7):(f=e,G===0&&Ae(Rr)),f===e&&(n.substr(h,10)===g?(f=g,h+=10):(f=e,G===0&&Ae(cr))))))),f}function Da(){var f,w,B,S,z;if(G++,f=h,w=h,B=Ut(),B!==e){if(S=[],z=Ta(),z!==e)for(;z!==e;)S.push(z),z=Ta();else S=e;S!==e?(Oe=w,w=yl(S)):(h=w,w=e)}else h=w,w=e;return w===e&&(w=h,B=Ut(),B!==e?(n.length>h?(S=n.charAt(h),h++):(S=e,G===0&&Ae(He)),S!==e?(Oe=w,w=Al(S)):(h=w,w=e)):(h=w,w=e)),w!==e&&(Oe=f,w=$l(w)),f=w,G--,f===e&&(w=e,G===0&&Ae(l)),f}function Zt(){var f,w,B,S,z,P;if(G++,f=h,w=sn(),w!==e){for(B=[],S=h,z=h,G++,P=qt(),G--,P===e?z=void 0:(h=z,z=e),z!==e?(P=nn(),P!==e?(Oe=S,S=ya(P)):(h=S,S=e)):(h=S,S=e);S!==e;)B.push(S),S=h,z=h,G++,P=qt(),G--,P===e?z=void 0:(h=z,z=e),z!==e?(P=nn(),P!==e?(Oe=S,S=ya(P)):(h=S,S=e)):(h=S,S=e);S=qt(),S!==e?(Oe=f,f=wl(B)):(h=f,f=e)}else h=f,f=e;return G--,f===e&&(w=e,G===0&&Ae(m)),f}function wi(){var f,w;return f=h,w=Zt(),w!==e&&(Oe=f,w=xl()),f=w,f}function Zl(){var f,w,B,S,z,P,pe,ae,Je,Re,sr;if(G++,f=h,w=xi(),w!==e)if(B=wi(),B!==e){for(S=ls(),S===e&&(S=null),z=[],P=h,pe=h,G++,ae=h,Je=Yt(),Je!==e?(Re=wi(),Re!==e?(Oe=h,sr=Aa(B,S,Re),sr?sr=void 0:sr=e,sr!==e?(Je=[Je,Re,sr],ae=Je):(h=ae,ae=e)):(h=ae,ae=e)):(h=ae,ae=e),G--,ae===e?pe=void 0:(h=pe,pe=e),pe!==e?(ae=nn(),ae!==e?(Oe=P,P=$a(B,S,ae)):(h=P,P=e)):(h=P,P=e);P!==e;)z.push(P),P=h,pe=h,G++,ae=h,Je=Yt(),Je!==e?(Re=wi(),Re!==e?(Oe=h,sr=Aa(B,S,Re),sr?sr=void 0:sr=e,sr!==e?(Je=[Je,Re,sr],ae=Je):(h=ae,ae=e)):(h=ae,ae=e)):(h=ae,ae=e),G--,ae===e?pe=void 0:(h=pe,pe=e),pe!==e?(ae=nn(),ae!==e?(Oe=P,P=$a(B,S,ae)):(h=P,P=e)):(h=P,P=e);P=Yt(),P!==e?(pe=wi(),pe!==e?(Oe=f,f=El(B,S,z)):(h=f,f=e)):(h=f,f=e)}else h=f,f=e;else h=f,f=e;return G--,f===e&&(w=e,G===0&&Ae(o)),f}function Jl(){var f,w,B,S,z,P,pe,ae,Je,Re,sr,Ar,qr;if(G++,f=h,w=xi(),w!==e)if(B=sn(),B!==e)if(S=Ba(),S!==e)if(z=qt(),z!==e){for(P=ls(),P===e&&(P=null),pe=[],ae=h,Je=h,G++,Re=h,sr=Yt(),sr!==e?(Ar=Zt(),Ar!==e?(Oe=h,qr=wa(S,P,Ar),qr?qr=void 0:qr=e,qr!==e?(sr=[sr,Ar,qr],Re=sr):(h=Re,Re=e)):(h=Re,Re=e)):(h=Re,Re=e),G--,Re===e?Je=void 0:(h=Je,Je=e),Je!==e?(Re=Wt(),Re!==e?(Oe=ae,ae=xa(S,P,Re)):(h=ae,ae=e)):(h=ae,ae=e);ae!==e;)pe.push(ae),ae=h,Je=h,G++,Re=h,sr=Yt(),sr!==e?(Ar=Zt(),Ar!==e?(Oe=h,qr=wa(S,P,Ar),qr?qr=void 0:qr=e,qr!==e?(sr=[sr,Ar,qr],Re=sr):(h=Re,Re=e)):(h=Re,Re=e)):(h=Re,Re=e),G--,Re===e?Je=void 0:(h=Je,Je=e),Je!==e?(Re=Wt(),Re!==e?(Oe=ae,ae=xa(S,P,Re)):(h=ae,ae=e)):(h=ae,ae=e);ae=Yt(),ae!==e?(Je=sn(),Je!==e?(Re=Ba(),Re!==e?(sr=qt(),sr!==e?(Oe=f,f=kl(S,P,pe)):(h=f,f=e)):(h=f,f=e)):(h=f,f=e)):(h=f,f=e)}else h=f,f=e;else h=f,f=e;else h=f,f=e;else h=f,f=e;return G--,f===e&&(w=e,G===0&&Ae(c)),f}function eu(){var f,w,B;return f=h,w=Ut(),w!==e?(n.charCodeAt(h)===91?(B=E,h++):(B=e,G===0&&Ae(te)),B!==e?(w=[w,B],f=w):(h=f,f=e)):(h=f,f=e),f}function ns(){var f,w,B;return f=h,w=Ut(),w!==e?(n.charCodeAt(h)===93?(B=O,h++):(B=e,G===0&&Ae(ce)),B!==e?(w=[w,B],f=w):(h=f,f=e)):(h=f,f=e),f}function ru(){var f,w,B;return f=h,w=Ut(),w!==e?(n.charCodeAt(h)===40?(B=Qe,h++):(B=e,G===0&&Ae(d)),B!==e?(w=[w,B],f=w):(h=f,f=e)):(h=f,f=e),f}function is(){var f,w,B;return f=h,w=Ut(),w!==e?(n.charCodeAt(h)===41?(B=$r,h++):(B=e,G===0&&Ae(I)),B!==e?(w=[w,B],f=w):(h=f,f=e)):(h=f,f=e),f}function xi(){var f,w,B;return f=h,w=Ut(),w!==e?(n.substr(h,5)===Cr?(B=Cr,h+=5):(B=e,G===0&&Ae(N)),B!==e?(w=[w,B],f=w):(h=f,f=e)):(h=f,f=e),f}function Yt(){var f,w,B;return f=h,w=Ut(),w!==e?(n.substr(h,3)===me?(B=me,h+=3):(B=e,G===0&&Ae(y)),B!==e?(w=[w,B],f=w):(h=f,f=e)):(h=f,f=e),f}function Ba(){var f,w;return f=h,n.substr(h,9)===Dr?(w=Dr,h+=9):(w=e,G===0&&Ae(u)),w===e&&(n.substr(h,8)===gr?(w=gr,h+=8):(w=e,G===0&&Ae(F)),w===e&&(n.substr(h,6)===Ie?(w=Ie,h+=6):(w=e,G===0&&Ae(fe)),w===e&&(n.substr(h,5)===Er?(w=Er,h+=5):(w=e,G===0&&Ae(_e)),w===e&&(n.substr(h,8)===Lr?(w=Lr,h+=8):(w=e,G===0&&Ae(ee)),w===e&&(n.substr(h,7)===Xr?(w=Xr,h+=7):(w=e,G===0&&Ae(Ye)),w===e&&(n.substr(h,7)===kr?(w=kr,h+=7):(w=e,G===0&&Ae(Xe)),w===e&&(n.substr(h,6)===xe?(w=xe,h+=6):(w=e,G===0&&Ae(jr)),w===e&&(n.substr(h,9)===ve?(w=ve,h+=9):(w=e,G===0&&Ae(at)),w===e&&(n.substr(h,8)===X?(w=X,h+=8):(w=e,G===0&&Ae(Kr)),w===e&&(n.substr(h,8)===Fr?(w=Fr,h+=8):(w=e,G===0&&Ae(ur)),w===e&&(n.substr(h,7)===Br?(w=Br,h+=7):(w=e,G===0&&Ae(Ur)),w===e&&(n.substr(h,5)===nr?(w=nr,h+=5):(w=e,G===0&&Ae(Nr)),w===e&&(n.substr(h,4)===tr?(w=tr,h+=4):(w=e,G===0&&Ae(Te)),w===e&&(n.substr(h,11)===ie?(w=ie,h+=11):(w=e,G===0&&Ae(St)))))))))))))))),w!==e&&(Oe=f,w=Cl(w)),f=w,f}function Ut(){var f,w;return G++,f=h,n.charCodeAt(h)===92?(w=Ke,h++):(w=e,G===0&&Ae(vt)),w!==e&&(Oe=f,w=Ml()),f=w,G--,f===e&&(w=e,G===0&&Ae(Tr)),f}function sn(){var f,w;return f=h,n.charCodeAt(h)===123?(w=Pr,h++):(w=e,G===0&&Ae(Rt)),w!==e&&(Oe=f,w=Sl(w)),f=w,f}function qt(){var f,w;return f=h,n.charCodeAt(h)===125?(w=rt,h++):(w=e,G===0&&Ae(k)),w!==e&&(Oe=f,w=Il(w)),f=w,f}function jt(){var f,w;return f=h,n.charCodeAt(h)===36?(w=Zr,h++):(w=e,G===0&&Ae(Q)),w!==e&&(Oe=f,w=Fl(w)),f=w,f}function ss(){var f,w;return f=h,n.charCodeAt(h)===38?(w=wr,h++):(w=e,G===0&&Ae(U)),w!==e&&(Oe=f,w=_l(w)),f=w,f}function It(){var f,w,B;return G++,f=h,w=h,G++,n.charCodeAt(h)===13?(B=it,h++):(B=e,G===0&&Ae(we)),G--,B===e?w=void 0:(h=w,w=e),w!==e?(n.charCodeAt(h)===10?(B=tt,h++):(B=e,G===0&&Ae(Le)),B!==e?(w=[w,B],f=w):(h=f,f=e)):(h=f,f=e),f===e&&(n.charCodeAt(h)===13?(f=it,h++):(f=e,G===0&&Ae(we)),f===e&&(n.substr(h,2)===ne?(f=ne,h+=2):(f=e,G===0&&Ae(_)))),G--,f===e&&(w=e,G===0&&Ae(Fe)),f}function as(){var f,w;return f=h,n.charCodeAt(h)===35?(w=de,h++):(w=e,G===0&&Ae(V)),w!==e&&(Oe=f,w=Ll(w)),f=w,f}function tu(){var f,w;return f=h,n.charCodeAt(h)===94?(w=be,h++):(w=e,G===0&&Ae(ge)),w!==e&&(Oe=f,w=Ol(w)),f=w,f}function nu(){var f,w;return f=h,n.charCodeAt(h)===95?(w=Ze,h++):(w=e,G===0&&Ae(Me)),w!==e&&(Oe=f,w=Rl(w)),f=w,f}function os(){var f;return n.charCodeAt(h)===0?(f=dr,h++):(f=e,G===0&&Ae(Ve)),f}function Yr(){var f,w,B;if(G++,f=h,w=[],Jr.test(n.charAt(h))?(B=n.charAt(h),h++):(B=e,G===0&&Ae(Gr)),B!==e)for(;B!==e;)w.push(B),Jr.test(n.charAt(h))?(B=n.charAt(h),h++):(B=e,G===0&&Ae(Gr));else w=e;return w!==e&&(Oe=f,w=Dl()),f=w,G--,f===e&&(w=e,G===0&&Ae(Mr)),f}function Ta(){var f;return G++,Qr.test(n.charAt(h))?(f=n.charAt(h),h++):(f=e,G===0&&Ae(bt)),G--,f===e&&G===0&&Ae(ot),f}function yn(){var f;return G++,J.test(n.charAt(h))?(f=n.charAt(h),h++):(f=e,G===0&&Ae(Vi)),G--,f===e&&G===0&&Ae(di),f}function Pa(){var f,w;return G++,f=h,K.test(n.charAt(h))?(w=n.charAt(h),h++):(w=e,G===0&&Ae(pn)),w!==e&&(Oe=f,w=Bl(w)),f=w,G--,f===e&&(w=e,G===0&&Ae(Xi)),f}function Vn(){var f;return n.charCodeAt(h)===37?(f=$,h++):(f=e,G===0&&Ae(st)),f}function qa(){var f;return G++,f=iu(),f===e&&(f=ls()),G--,f===e&&G===0&&Ae(Ki),f}function iu(){var f,w,B,S;for(f=h,w=h,B=[],S=Yr();S!==e;)B.push(S),S=Yr();return S=It(),S!==e?(B=[B,S],w=B):(h=w,w=e),w===e&&(w=null),B=su(),B!==e?(S=ja(),S!==e?(Oe=f,f=Tl(B,S)):(h=f,f=e)):(h=f,f=e),f}function ls(){var f,w,B;for(f=h,w=[],B=Yr();B!==e;)w.push(B),B=Yr();return B=ja(),B!==e?(Oe=f,f=Pl(w,B)):(h=f,f=e),f}function ja(){var f,w,B,S,z,P,pe,ae;if(G++,f=h,w=Vn(),w!==e){for(B=[],S=h,z=h,G++,P=It(),G--,P===e?z=void 0:(h=z,z=e),z!==e?(n.length>h?(P=n.charAt(h),h++):(P=e,G===0&&Ae(He)),P!==e?(Oe=S,S=Ea(P)):(h=S,S=e)):(h=S,S=e);S!==e;)B.push(S),S=h,z=h,G++,P=It(),G--,P===e?z=void 0:(h=z,z=e),z!==e?(n.length>h?(P=n.charAt(h),h++):(P=e,G===0&&Ae(He)),P!==e?(Oe=S,S=Ea(P)):(h=S,S=e)):(h=S,S=e);S=h,G++,z=Ia(),G--,z!==e?(h=S,S=void 0):S=e,S!==e?(Oe=f,f=ql(B)):(h=f,f=e)}else h=f,f=e;if(f===e)if(f=h,w=Vn(),w!==e){for(B=[],S=h,z=h,G++,P=It(),G--,P===e?z=void 0:(h=z,z=e),z!==e?(n.length>h?(P=n.charAt(h),h++):(P=e,G===0&&Ae(He)),P!==e?(Oe=S,S=ka(P)):(h=S,S=e)):(h=S,S=e);S!==e;)B.push(S),S=h,z=h,G++,P=It(),G--,P===e?z=void 0:(h=z,z=e),z!==e?(n.length>h?(P=n.charAt(h),h++):(P=e,G===0&&Ae(He)),P!==e?(Oe=S,S=ka(P)):(h=S,S=e)):(h=S,S=e);if(S=h,z=It(),z!==e){for(P=[],pe=Yr();pe!==e;)P.push(pe),pe=Yr();pe=h,G++,ae=Vn(),G--,ae===e?pe=void 0:(h=pe,pe=e),pe!==e?(z=[z,P,pe],S=z):(h=S,S=e)}else h=S,S=e;S===e&&(S=It(),S===e&&(S=Na())),S!==e?(Oe=f,f=jl(B)):(h=f,f=e)}else h=f,f=e;return G--,f===e&&(w=e,G===0&&Ae(Zi)),f}function su(){var f,w,B,S,z;if(f=h,w=h,B=au(),B!==e){for(S=[],z=Yr();z!==e;)S.push(z),z=Yr();B=[B,S],w=B}else h=w,w=e;return w!==e?f=n.substring(f,h):f=w,f}function au(){var f;return Oe=h,f=Nl(),f?f=void 0:f=e,f}function Na(){var f,w;return f=h,G++,n.length>h?(w=n.charAt(h),h++):(w=e,G===0&&Ae(He)),G--,w===e?f=void 0:(h=f,f=e),f}function Ga(f){return typeof f=="string"?f:typeof f.content=="string"?f.content:f&&f.type==="whitespace"?" ":f}function Ei(f,w){const B=typeof f=="string"?f:f.content.map(Ga).join(""),S=typeof w=="string"?w:w.content.map(Ga).join("");return B===S}function Sr(f,w={}){return{type:f,...w,position:Ca()}}if($i=v(),$i!==e&&h===n.length)return $i;throw $i!==e&&h<n.length&&Ae(zl()),Ql(es,tn<n.length?n.charAt(tn):null,tn<n.length?rs(tn,tn+1):rs(tn,tn))}return{SyntaxError:t,parse:i}}();(function(){function r(n,a){function e(){this.constructor=n}e.prototype=a.prototype,n.prototype=new e}function t(n,a,e,p){var b=Error.call(this,n);return Object.setPrototypeOf&&Object.setPrototypeOf(b,t.prototype),b.expected=a,b.found=e,b.location=p,b.name="SyntaxError",b}r(t,Error);function s(n,a,e){return e=e||" ",n.length>a?n:(a-=n.length,e+=e.repeat(a),n+e.slice(0,a))}t.prototype.format=function(n){var a="Error: "+this.message;if(this.location){var e=null,p;for(p=0;p<n.length;p++)if(n[p].source===this.location.source){e=n[p].text.split(/\r\n|\n|\r/g);break}var b=this.location.start,v=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(b):b,$=this.location.source+":"+v.line+":"+v.column;if(e){var L=this.location.end,R=s("",v.line.toString().length," "),A=e[b.line-1],E=b.line===L.line?L.column:A.length+1,O=E-b.column||1;a+=`
 --> `+$+`
`+R+` |
`+v.line+" | "+A+`
`+R+" | "+s("",b.column-1," ")+s("",O,"^")}else a+=`
 at `+$}return a},t.buildMessage=function(n,a){var e={literal:function(A){return'"'+b(A.text)+'"'},class:function(A){var E=A.parts.map(function(O){return Array.isArray(O)?v(O[0])+"-"+v(O[1]):v(O)});return"["+(A.inverted?"^":"")+E.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(A){return A.description}};function p(A){return A.charCodeAt(0).toString(16).toUpperCase()}function b(A){return A.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+p(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+p(E)})}function v(A){return A.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+p(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+p(E)})}function $(A){return e[A.type](A)}function L(A){var E=A.map($),O,Z;if(E.sort(),E.length>0){for(O=1,Z=1;O<E.length;O++)E[O-1]!==E[O]&&(E[Z]=E[O],Z++);E.length=Z}switch(E.length){case 1:return E[0];case 2:return E[0]+" or "+E[1];default:return E.slice(0,-1).join(", ")+", or "+E[E.length-1]}}function R(A){return A?'"'+b(A)+'"':"end of input"}return"Expected "+L(n)+" but "+R(a)+" found."};function i(n,a){a=a!==void 0?a:{};var e={},p=a.grammarSource,b={body:ie},v=ie,$=ve(),L=function(){return[]},R=function(J){return{cells:[],colSeps:[],...J}},A=function(J,K,W){return{...J,rowSep:K,trailingComment:W}},E=function(J,K){return{...J,rowSep:null,trailingComment:K}},O=function(J){return J},Z=function(J){return{cells:[],colSeps:[],rowSep:null,trailingComment:J}},$e=function(J){return J},le=function(J,K){return{colSep:J,cell:K}},M=function(J){return{colSep:J}},j=function(J,K){return Qr(J,K)},Se=function(J){return Qr(null,J)},Ce=function(J){return a.isSameLineComment(J)},ke=function(J){return J},Pe=function(J){return a.isOwnLineComment(J)},g=function(J){return J},Qe=function(J){return a.isWhitespace(J)},$r=function(J){return J},Cr=function(J){return a.isRowSep(J)},me=function(J){return J},Dr=function(J){return a.isColSep(J)},gr=function(J){return J},Ie=0,Er=[{line:1,column:1}],Lr=0,Xr=[],kr=0,xe;if("startRule"in a){if(!(a.startRule in b))throw new Error(`Can't start parsing from rule "`+a.startRule+'".');v=b[a.startRule]}function ve(){return{type:"any"}}function X(){return{type:"end"}}function Fr(J){var K=Er[J],W;if(K)return K;for(W=J-1;!Er[W];)W--;for(K=Er[W],K={line:K.line,column:K.column};W<J;)n.charCodeAt(W)===10?(K.line++,K.column=1):K.column++,W++;return Er[J]=K,K}function Br(J,K,W){var xr=Fr(J),se=Fr(K),He={source:p,start:{offset:J,line:xr.line,column:xr.column},end:{offset:K,line:se.line,column:se.column}};return He}function nr(J){Ie<Lr||(Ie>Lr&&(Lr=Ie,Xr=[]),Xr.push(J))}function tr(J,K,W){return new t(t.buildMessage(J,K),J,K,W)}function ie(){var J,K;if(J=[],K=Zr(),K===e&&(K=Ke(),K===e&&(K=Pr())),K!==e)for(;K!==e;)J.push(K),K=Zr(),K===e&&(K=Ke(),K===e&&(K=Pr()));else J=e;return J===e&&(J=Ie,K=Jr(),K!==e&&(K=L()),J=K),J}function Ke(){var J,K,W,xr;return J=Ie,K=Ie,W=ne(),W===e&&(W=null),W=R(W),K=W,W=dr(),W!==e?(xr=rt(),xr===e&&(xr=null),J=A(K,W,xr)):(Ie=J,J=e),J}function Pr(){var J,K,W;return J=Ie,K=ne(),K!==e?(W=rt(),W===e&&(W=null),J=E(K,W)):(Ie=J,J=e),J}function rt(){var J,K,W;for(J=Ie,K=[],W=Ze();W!==e;)K.push(W),W=Ze();return W=de(),W!==e?J=O(W):(Ie=J,J=e),J}function Zr(){var J,K,W;for(J=Ie,K=[],W=Ze();W!==e;)K.push(W),W=Ze();return W=be(),W!==e?J=Z(W):(Ie=J,J=e),J}function wr(){var J,K,W;return J=Ie,K=Ie,kr++,W=dr(),W===e&&(W=he(),W===e&&(W=rt(),W===e&&(W=be()))),kr--,W===e?K=void 0:(Ie=K,K=e),K!==e?(n.length>Ie?(W=n.charAt(Ie),Ie++):(W=e,kr===0&&nr($)),W!==e?J=$e(W):(Ie=J,J=e)):(Ie=J,J=e),J}function it(){var J,K,W;if(J=Ie,K=[],W=wr(),W!==e)for(;W!==e;)K.push(W),W=wr();else K=e;return K!==e?J=n.substring(J,Ie):J=K,J}function tt(){var J,K,W;return J=Ie,K=he(),K!==e?(W=it(),W!==e?J=le(K,W):(Ie=J,J=e)):(Ie=J,J=e),J===e&&(J=Ie,K=he(),K!==e&&(K=M(K)),J=K),J}function ne(){var J,K,W,xr;if(J=Ie,K=it(),K!==e){for(W=[],xr=tt();xr!==e;)W.push(xr),xr=tt();J=j(K,W)}else Ie=J,J=e;if(J===e){if(J=Ie,K=[],W=tt(),W!==e)for(;W!==e;)K.push(W),W=tt();else K=e;K!==e&&(K=Se(K)),J=K}return J}function de(){var J,K,W;return J=Ie,n.length>Ie?(K=n.charAt(Ie),Ie++):(K=e,kr===0&&nr($)),K!==e?(W=Ce(K),W?W=void 0:W=e,W!==e?J=ke(K):(Ie=J,J=e)):(Ie=J,J=e),J}function be(){var J,K,W;return J=Ie,n.length>Ie?(K=n.charAt(Ie),Ie++):(K=e,kr===0&&nr($)),K!==e?(W=Pe(K),W?W=void 0:W=e,W!==e?J=g(K):(Ie=J,J=e)):(Ie=J,J=e),J}function Ze(){var J,K,W;return J=Ie,n.length>Ie?(K=n.charAt(Ie),Ie++):(K=e,kr===0&&nr($)),K!==e?(W=Qe(K),W?W=void 0:W=e,W!==e?J=$r(K):(Ie=J,J=e)):(Ie=J,J=e),J}function dr(){var J,K,W;return J=Ie,n.length>Ie?(K=n.charAt(Ie),Ie++):(K=e,kr===0&&nr($)),K!==e?(W=Cr(K),W?W=void 0:W=e,W!==e?J=me(K):(Ie=J,J=e)):(Ie=J,J=e),J}function he(){var J,K,W;return J=Ie,n.length>Ie?(K=n.charAt(Ie),Ie++):(K=e,kr===0&&nr($)),K!==e?(W=Dr(K),W?W=void 0:W=e,W!==e?J=gr(K):(Ie=J,J=e)):(Ie=J,J=e),J}function Jr(){var J,K;return J=Ie,kr++,n.length>Ie?(K=n.charAt(Ie),Ie++):(K=e,kr===0&&nr($)),kr--,K===e?J=void 0:(Ie=J,J=e),J}function Qr(J,K){const W=[J||[]],xr=[];for(const se of K)W.push(se.cell||[]),xr.push(se.colSep);return{cells:W,colSeps:xr}}if(!a.isWhitespace)try{Object.assign(a,createMatchers(["\\","hline","cr"],["&"]))}catch(J){console.warn("Error when initializing parser",J)}if(xe=v(),xe!==e&&Ie===n.length)return xe;throw xe!==e&&Ie<n.length&&nr(X()),tr(Xr,Lr<n.length?n.charAt(Lr):null,Lr<n.length?Br(Lr,Lr+1):Br(Lr,Lr))}return{SyntaxError:t,parse:i}})();const lc=function(){function r(n,a){function e(){this.constructor=n}e.prototype=a.prototype,n.prototype=new e}function t(n,a,e,p){var b=Error.call(this,n);return Object.setPrototypeOf&&Object.setPrototypeOf(b,t.prototype),b.expected=a,b.found=e,b.location=p,b.name="SyntaxError",b}r(t,Error);function s(n,a,e){return e=e||" ",n.length>a?n:(a-=n.length,e+=e.repeat(a),n+e.slice(0,a))}t.prototype.format=function(n){var a="Error: "+this.message;if(this.location){var e=null,p;for(p=0;p<n.length;p++)if(n[p].source===this.location.source){e=n[p].text.split(/\r\n|\n|\r/g);break}var b=this.location.start,v=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(b):b,$=this.location.source+":"+v.line+":"+v.column;if(e){var L=this.location.end,R=s("",v.line.toString().length," "),A=e[b.line-1],E=b.line===L.line?L.column:A.length+1,O=E-b.column||1;a+=`
 --> `+$+`
`+R+` |
`+v.line+" | "+A+`
`+R+" | "+s("",b.column-1," ")+s("",O,"^")}else a+=`
 at `+$}return a},t.buildMessage=function(n,a){var e={literal:function(A){return'"'+b(A.text)+'"'},class:function(A){var E=A.parts.map(function(O){return Array.isArray(O)?v(O[0])+"-"+v(O[1]):v(O)});return"["+(A.inverted?"^":"")+E.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(A){return A.description}};function p(A){return A.charCodeAt(0).toString(16).toUpperCase()}function b(A){return A.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+p(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+p(E)})}function v(A){return A.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+p(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+p(E)})}function $(A){return e[A.type](A)}function L(A){var E=A.map($),O,Z;if(E.sort(),E.length>0){for(O=1,Z=1;O<E.length;O++)E[O-1]!==E[O]&&(E[Z]=E[O],Z++);E.length=Z}switch(E.length){case 1:return E[0];case 2:return E[0]+" or "+E[1];default:return E.slice(0,-1).join(", ")+", or "+E[E.length-1]}}function R(A){return A?'"'+b(A)+'"':"end of input"}return"Expected "+L(n)+" but "+R(a)+" found."};function i(n,a){a=a!==void 0?a:{};var e={},p=a.grammarSource,b={args_spec_list:y},v=y,$="v",L="b",R="!",A="D",E="d",O="s",Z="O",$e="o",le="e",M="E",j="t",Se="R",Ce="r",ke="u",Pe="m",g="{",Qe="}",$r=" ",Cr=`
`,me="\r",Dr="\\",gr=/^[{ ]/,Ie=/^[a-zA-Z]/,Er=/^[{}]/,Lr=cr("+",!1),Xr=cr("v",!1),kr=m(),xe=cr("b",!1),ve=cr("!",!1),X=cr("D",!1),Fr=cr("d",!1),Br=cr("s",!1),nr=cr("O",!1),tr=cr("o",!1),ie=cr("e",!1),Ke=cr("E",!1),Pr=cr("t",!1),rt=cr("R",!1),Zr=cr("r",!1),wr=cr("u",!1),it=l(["{"," "],!1,!1),tt=cr("m",!1),ne=cr("{",!1),de=cr("}",!1),be=cr(" ",!1),Ze=cr(`
`,!1),dr=cr("\r",!1),he=cr("\\",!1),Jr=l([["a","z"],["A","Z"]],!1,!1),Qr=l(["{","}"],!1,!1),J=function(_){return _},K=function(_){return _},W=function(_){return _},xr=function(_){return we("verbatim",{openBrace:_,closeBrace:_})},se=function(){return we("body")},He=function(_,V){return _?{...V,noLeadingWhitespace:!0}:V},hr=function(_,V){return we("optional",{..._,defaultArg:V})},We=function(_){return we("optional",_)},ye=function(){return we("optionalStar")},st=function(_){return we("optional",{defaultArg:_})},Mr=function(){return we("optional")},ht=function(_){return we("embellishment",{embellishmentTokens:_})},Or=function(_,V){return we("embellishment",{embellishmentTokens:_,defaultArg:V})},q=function(_){return we("optionalToken",{token:_})},D=function(_,V){return we("mandatory",{..._,defaultArg:V})},H=function(_){return we("mandatory",_)},te=function(_){return we("until",{stopTokens:_})},ce=function(_){return[_]},ze=function(_){return _.content},br=function(){return we("mandatory")},ir=function(_,V){return{openBrace:_,closeBrace:V}},mr=function(_){return _.content.map(Le).join("")},ar=function(_){return[_]},yr=function(_){return _.filter(V=>!V.match(/^\s*$/))},pr=function(_){return{type:"group",content:_}},_r=function(){return""},Y=0,ue=[{line:1,column:1}],Be=0,er=[],Ee=0,Rr;if("startRule"in a){if(!(a.startRule in b))throw new Error(`Can't start parsing from rule "`+a.startRule+'".');v=b[a.startRule]}function cr(_,V){return{type:"literal",text:_,ignoreCase:V}}function l(_,V,ge){return{type:"class",parts:_,inverted:V,ignoreCase:ge}}function m(){return{type:"any"}}function o(){return{type:"end"}}function c(_){var V=ue[_],ge;if(V)return V;for(ge=_-1;!ue[ge];)ge--;for(V=ue[ge],V={line:V.line,column:V.column};ge<_;)n.charCodeAt(ge)===10?(V.line++,V.column=1):V.column++,ge++;return ue[_]=V,V}function d(_,V,ge){var Me=c(_),Ve=c(V),Gr={source:p,start:{offset:_,line:Me.line,column:Me.column},end:{offset:V,line:Ve.line,column:Ve.column}};return Gr}function I(_){Y<Be||(Y>Be&&(Be=Y,er=[]),er.push(_))}function N(_,V,ge){return new t(t.buildMessage(_,V),_,V,ge)}function y(){var _,V,ge,Me;for(_=Y,V=[],ge=Y,Rt(),Me=u(),Me!==e?ge=J(Me):(Y=ge,ge=e);ge!==e;)V.push(ge),ge=Y,Rt(),Me=u(),Me!==e?ge=J(Me):(Y=ge,ge=e);return ge=Rt(),_=K(V),_}function u(){var _,V;return _=Y,n.charCodeAt(Y)===43?Y++:Ee===0&&I(Lr),V=_e(),V===e&&(V=Nr(),V===e&&(V=F(),V===e&&(V=Kr(),V===e&&(V=fe(),V===e&&(V=ur()))))),V!==e?_=W(V):(Y=_,_=e),_}function F(){var _,V,ge;return _=Y,n.charCodeAt(Y)===118?(V=$,Y++):(V=e,Ee===0&&I(Xr)),V!==e?(n.length>Y?(ge=n.charAt(Y),Y++):(ge=e,Ee===0&&I(kr)),ge!==e?_=xr(ge):(Y=_,_=e)):(Y=_,_=e),_}function fe(){var _,V;return _=Y,n.charCodeAt(Y)===98?(V=L,Y++):(V=e,Ee===0&&I(xe)),V!==e&&(V=se()),_=V,_}function _e(){var _,V,ge;return _=Y,n.charCodeAt(Y)===33?(V=R,Y++):(V=e,Ee===0&&I(ve)),V===e&&(V=null),ge=Ye(),ge===e&&(ge=Xe(),ge===e&&(ge=ee(),ge===e&&(ge=jr(),ge===e&&(ge=at())))),ge!==e?_=He(V,ge):(Y=_,_=e),_}function ee(){var _,V,ge,Me;return _=Y,n.charCodeAt(Y)===68?(V=A,Y++):(V=e,Ee===0&&I(X)),V!==e?(ge=Te(),Me=St(),Me!==e?_=hr(ge,Me):(Y=_,_=e)):(Y=_,_=e),_===e&&(_=Y,n.charCodeAt(Y)===100?(V=E,Y++):(V=e,Ee===0&&I(Fr)),V!==e?(ge=Te(),_=We(ge)):(Y=_,_=e)),_}function Ye(){var _,V;return _=Y,n.charCodeAt(Y)===115?(V=O,Y++):(V=e,Ee===0&&I(Br)),V!==e&&(V=ye()),_=V,_}function Xe(){var _,V,ge;return _=Y,n.charCodeAt(Y)===79?(V=Z,Y++):(V=e,Ee===0&&I(nr)),V!==e?(Rt(),ge=St(),ge!==e?_=st(ge):(Y=_,_=e)):(Y=_,_=e),_===e&&(_=Y,n.charCodeAt(Y)===111?(V=$e,Y++):(V=e,Ee===0&&I(tr)),V!==e&&(V=Mr()),_=V),_}function jr(){var _,V,ge,Me;return _=Y,n.charCodeAt(Y)===101?(V=le,Y++):(V=e,Ee===0&&I(ie)),V!==e?(Rt(),ge=Tr(),ge!==e?_=ht(ge):(Y=_,_=e)):(Y=_,_=e),_===e&&(_=Y,n.charCodeAt(Y)===69?(V=M,Y++):(V=e,Ee===0&&I(Ke)),V!==e?(Rt(),ge=Tr(),ge!==e?(Rt(),Me=Tr(),Me!==e?_=Or(ge,Me):(Y=_,_=e)):(Y=_,_=e)):(Y=_,_=e)),_}function at(){var _,V,ge;return _=Y,n.charCodeAt(Y)===116?(V=j,Y++):(V=e,Ee===0&&I(Pr)),V!==e?(n.length>Y?(ge=n.charAt(Y),Y++):(ge=e,Ee===0&&I(kr)),ge!==e?_=q(ge):(Y=_,_=e)):(Y=_,_=e),_}function Kr(){var _,V,ge,Me;return _=Y,n.charCodeAt(Y)===82?(V=Se,Y++):(V=e,Ee===0&&I(rt)),V!==e?(ge=Te(),Me=St(),Me!==e?_=D(ge,Me):(Y=_,_=e)):(Y=_,_=e),_===e&&(_=Y,n.charCodeAt(Y)===114?(V=Ce,Y++):(V=e,Ee===0&&I(Zr)),V!==e?(ge=Te(),_=H(ge)):(Y=_,_=e)),_}function ur(){var _,V,ge;return _=Y,n.charCodeAt(Y)===117?(V=ke,Y++):(V=e,Ee===0&&I(wr)),V!==e?(ge=Ur(),ge!==e?_=te(ge):(Y=_,_=e)):(Y=_,_=e),_}function Ur(){var _,V,ge;return _=Y,V=Y,Ee++,gr.test(n.charAt(Y))?(ge=n.charAt(Y),Y++):(ge=e,Ee===0&&I(it)),Ee--,ge===e?V=void 0:(Y=V,V=e),V!==e?(n.length>Y?(ge=n.charAt(Y),Y++):(ge=e,Ee===0&&I(kr)),ge!==e?_=ce(ge):(Y=_,_=e)):(Y=_,_=e),_===e&&(_=Y,V=vt(),V!==e&&(V=ze(V)),_=V),_}function Nr(){var _,V;return _=Y,n.charCodeAt(Y)===109?(V=Pe,Y++):(V=e,Ee===0&&I(tt)),V!==e&&(V=br()),_=V,_}function Te(){var _,V,ge,Me,Ve,Gr;return _=Y,V=Y,ge=Y,Me=Y,Ee++,Ve=k(),Ee--,Ve===e?Me=void 0:(Y=Me,Me=e),Me!==e?(Ve=Q(),Ve===e&&(n.length>Y?(Ve=n.charAt(Y),Y++):(Ve=e,Ee===0&&I(kr))),Ve!==e?(Me=[Me,Ve],ge=Me):(Y=ge,ge=e)):(Y=ge,ge=e),ge===e&&(ge=null),V=n.substring(V,Y),ge=Y,Me=Y,Ve=Y,Ee++,Gr=k(),Ee--,Gr===e?Ve=void 0:(Y=Ve,Ve=e),Ve!==e?(Gr=Q(),Gr===e&&(n.length>Y?(Gr=n.charAt(Y),Y++):(Gr=e,Ee===0&&I(kr))),Gr!==e?(Ve=[Ve,Gr],Me=Ve):(Y=Me,Me=e)):(Y=Me,Me=e),Me===e&&(Me=null),ge=n.substring(ge,Y),_=ir(V,ge),_}function St(){var _,V;return _=U(),_===e&&(_=Y,V=vt(),V!==e&&(V=mr(V)),_=V),_}function Tr(){var _,V,ge,Me;if(_=Y,V=U(),V!==e&&(V=ar(V)),_=V,_===e)if(_=Y,n.charCodeAt(Y)===123?(V=g,Y++):(V=e,Ee===0&&I(ne)),V!==e){for(ge=[],Me=St(),Me===e&&(Me=k());Me!==e;)ge.push(Me),Me=St(),Me===e&&(Me=k());n.charCodeAt(Y)===125?(Me=Qe,Y++):(Me=e,Ee===0&&I(de)),Me!==e?_=yr(ge):(Y=_,_=e)}else Y=_,_=e;return _}function vt(){var _,V,ge,Me,Ve,Gr,ot,bt;if(_=Y,n.charCodeAt(Y)===123?(V=g,Y++):(V=e,Ee===0&&I(ne)),V!==e){for(ge=[],Me=Y,Ve=Y,Gr=Y,Ee++,n.charCodeAt(Y)===125?(ot=Qe,Y++):(ot=e,Ee===0&&I(de)),Ee--,ot===e?Gr=void 0:(Y=Gr,Gr=e),Gr!==e?(ot=Y,Ee++,bt=vt(),Ee--,bt===e?ot=void 0:(Y=ot,ot=e),ot!==e?(bt=U(),bt===e&&(bt=k()),bt!==e?(Gr=[Gr,ot,bt],Ve=Gr):(Y=Ve,Ve=e)):(Y=Ve,Ve=e)):(Y=Ve,Ve=e),Ve!==e?Me=n.substring(Me,Y):Me=Ve,Me===e&&(Me=vt());Me!==e;)ge.push(Me),Me=Y,Ve=Y,Gr=Y,Ee++,n.charCodeAt(Y)===125?(ot=Qe,Y++):(ot=e,Ee===0&&I(de)),Ee--,ot===e?Gr=void 0:(Y=Gr,Gr=e),Gr!==e?(ot=Y,Ee++,bt=vt(),Ee--,bt===e?ot=void 0:(Y=ot,ot=e),ot!==e?(bt=U(),bt===e&&(bt=k()),bt!==e?(Gr=[Gr,ot,bt],Ve=Gr):(Y=Ve,Ve=e)):(Y=Ve,Ve=e)):(Y=Ve,Ve=e),Ve!==e?Me=n.substring(Me,Y):Me=Ve,Me===e&&(Me=vt());n.charCodeAt(Y)===125?(Me=Qe,Y++):(Me=e,Ee===0&&I(de)),Me!==e?_=pr(ge):(Y=_,_=e)}else Y=_,_=e;return _}function Rt(){var _,V,ge;for(_=Y,V=[],ge=k();ge!==e;)V.push(ge),ge=k();return V=_r(),_=V,_}function k(){var _;return n.charCodeAt(Y)===32?(_=$r,Y++):(_=e,Ee===0&&I(be)),_===e&&(n.charCodeAt(Y)===10?(_=Cr,Y++):(_=e,Ee===0&&I(Ze)),_===e&&(n.charCodeAt(Y)===13?(_=me,Y++):(_=e,Ee===0&&I(dr)))),_}function Q(){var _,V,ge,Me,Ve;if(_=Y,V=Y,n.charCodeAt(Y)===92?(ge=Dr,Y++):(ge=e,Ee===0&&I(he)),ge!==e){if(Me=[],Ie.test(n.charAt(Y))?(Ve=n.charAt(Y),Y++):(Ve=e,Ee===0&&I(Jr)),Ve!==e)for(;Ve!==e;)Me.push(Ve),Ie.test(n.charAt(Y))?(Ve=n.charAt(Y),Y++):(Ve=e,Ee===0&&I(Jr));else Me=e;Me!==e?(ge=[ge,Me],V=ge):(Y=V,V=e)}else Y=V,V=e;return V!==e?_=n.substring(_,Y):_=V,_===e&&(_=Y,V=Y,n.charCodeAt(Y)===92?(ge=Dr,Y++):(ge=e,Ee===0&&I(he)),ge!==e?(Me=Y,Ee++,Ie.test(n.charAt(Y))?(Ve=n.charAt(Y),Y++):(Ve=e,Ee===0&&I(Jr)),Ee--,Ve===e?Me=void 0:(Y=Me,Me=e),Me!==e?(n.length>Y?(Ve=n.charAt(Y),Y++):(Ve=e,Ee===0&&I(kr)),Ve!==e?(ge=[ge,Me,Ve],V=ge):(Y=V,V=e)):(Y=V,V=e)):(Y=V,V=e),V!==e?_=n.substring(_,Y):_=V),_}function U(){var _,V,ge,Me;return _=Q(),_===e&&(_=Y,V=Y,Ee++,Er.test(n.charAt(Y))?(ge=n.charAt(Y),Y++):(ge=e,Ee===0&&I(Qr)),Ee--,ge===e?V=void 0:(Y=V,V=e),V!==e?(ge=Y,Ee++,Me=k(),Ee--,Me===e?ge=void 0:(Y=ge,ge=e),ge!==e?(n.length>Y?(Me=n.charAt(Y),Y++):(Me=e,Ee===0&&I(kr)),Me!==e?_=Me:(Y=_,_=e)):(Y=_,_=e)):(Y=_,_=e)),_}const Fe={optional:{openBrace:"[",closeBrace:"]"},mandatory:{openBrace:"{",closeBrace:"}"}};function we(_,V){const ge=Fe[_]||{};return{type:_,...ge,...V}}function Le(_){return typeof _!="object"||!_?_:_.type==="group"?`{${_.content.map(Le).join("")}}`:_}if(Rr=v(),Rr!==e&&Y===n.length)return Rr;throw Rr!==e&&Y<n.length&&I(o()),N(er,Be<n.length?n.charAt(Be):null,Be<n.length?d(Be,Be+1):d(Be,Be))}return{SyntaxError:t,parse:i}}();(function(){function r(n,a){function e(){this.constructor=n}e.prototype=a.prototype,n.prototype=new e}function t(n,a,e,p){var b=Error.call(this,n);return Object.setPrototypeOf&&Object.setPrototypeOf(b,t.prototype),b.expected=a,b.found=e,b.location=p,b.name="SyntaxError",b}r(t,Error);function s(n,a,e){return e=e||" ",n.length>a?n:(a-=n.length,e+=e.repeat(a),n+e.slice(0,a))}t.prototype.format=function(n){var a="Error: "+this.message;if(this.location){var e=null,p;for(p=0;p<n.length;p++)if(n[p].source===this.location.source){e=n[p].text.split(/\r\n|\n|\r/g);break}var b=this.location.start,v=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(b):b,$=this.location.source+":"+v.line+":"+v.column;if(e){var L=this.location.end,R=s("",v.line.toString().length," "),A=e[b.line-1],E=b.line===L.line?L.column:A.length+1,O=E-b.column||1;a+=`
 --> `+$+`
`+R+` |
`+v.line+" | "+A+`
`+R+" | "+s("",b.column-1," ")+s("",O,"^")}else a+=`
 at `+$}return a},t.buildMessage=function(n,a){var e={literal:function(A){return'"'+b(A.text)+'"'},class:function(A){var E=A.parts.map(function(O){return Array.isArray(O)?v(O[0])+"-"+v(O[1]):v(O)});return"["+(A.inverted?"^":"")+E.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(A){return A.description}};function p(A){return A.charCodeAt(0).toString(16).toUpperCase()}function b(A){return A.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+p(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+p(E)})}function v(A){return A.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+p(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+p(E)})}function $(A){return e[A.type](A)}function L(A){var E=A.map($),O,Z;if(E.sort(),E.length>0){for(O=1,Z=1;O<E.length;O++)E[O-1]!==E[O]&&(E[Z]=E[O],Z++);E.length=Z}switch(E.length){case 1:return E[0];case 2:return E[0]+" or "+E[1];default:return E.slice(0,-1).join(", ")+", or "+E[E.length-1]}}function R(A){return A?'"'+b(A)+'"':"end of input"}return"Expected "+L(n)+" but "+R(a)+" found."};function i(n,a){a=a!==void 0?a:{};var e={},p=a.grammarSource,b={body:tt},v=tt,$=Ke(),L=function(){return[]},R=function(D,H){return{itemParts:[],...D,trailingComment:H,trailingComma:!0}},A=function(D,H){return{...D,trailingComment:H}},E=function(D,H){return q(D,H)},O=function(D){return q(null,D)},Z=function(D){return{cell:D}},$e=function(){return{}},le=function(D){return D},M=function(D){return D},j=function(D,H){return{trailingComment:H,leadingParbreak:D.parbreak>0}},Se=function(D){return{whitespace:D.filter(H=>a.isWhitespace(H)).length,parbreak:D.filter(H=>a.isParbreak(H)).length}},Ce=function(){return!a.allowParenGroups},ke=function(D){return a.isSameLineComment(D)},Pe=function(D){return D},g=function(D){return a.isOwnLineComment(D)},Qe=function(D){return D},$r=function(D){return a.isWhitespace(D)},Cr=function(D){return D},me=function(D){return a.isParbreak(D)},Dr=function(D){return D},gr=function(D){return a.isComma(D)},Ie=function(D){return D},Er=function(D){return a.isEquals(D)},Lr=function(D){return D},Xr=function(D){return a.isChar(D,"(")},kr=function(D){return D},xe=function(D){return a.isChar(D,")")},ve=function(D){return D},X=0,Fr=[{line:1,column:1}],Br=0,nr=[],tr=0,ie;if("startRule"in a){if(!(a.startRule in b))throw new Error(`Can't start parsing from rule "`+a.startRule+'".');v=b[a.startRule]}function Ke(){return{type:"any"}}function Pr(){return{type:"end"}}function rt(D){var H=Fr[D],te;if(H)return H;for(te=D-1;!Fr[te];)te--;for(H=Fr[te],H={line:H.line,column:H.column};te<D;)n.charCodeAt(te)===10?(H.line++,H.column=1):H.column++,te++;return Fr[D]=H,H}function Zr(D,H,te){var ce=rt(D),ze=rt(H),br={source:p,start:{offset:D,line:ce.line,column:ce.column},end:{offset:H,line:ze.line,column:ze.column}};return br}function wr(D){X<Br||(X>Br&&(Br=X,nr=[]),nr.push(D))}function it(D,H,te){return new t(t.buildMessage(D,H),D,H,te)}function tt(){var D,H,te;if(D=[],H=Jr(),H===e&&(H=ne(),H===e&&(H=de())),H!==e)for(;H!==e;)D.push(H),H=Jr(),H===e&&(H=ne(),H===e&&(H=de()));else D=e;if(D===e){for(D=X,H=[],te=hr();te!==e;)H.push(te),te=hr();te=Or(),te!==e?D=L():(X=D,D=e)}return D}function ne(){var D,H,te,ce,ze,br,ir;if(D=X,W(),H=be(),H===e&&(H=null),W(),te=ye(),te!==e){for(ce=[],ze=hr();ze!==e;)ce.push(ze),ze=hr();for(ze=he(),ze===e&&(ze=null),br=[],ir=hr();ir!==e;)br.push(ir),ir=hr();D=R(H,ze)}else X=D,D=e;return D}function de(){var D,H,te;return D=X,W(),H=be(),H!==e?(te=he(),te===e&&(te=null),D=A(H,te)):(X=D,D=e),D}function be(){var D,H,te,ce;if(D=X,H=dr(),H!==e){for(te=[],ce=Ze();ce!==e;)te.push(ce),ce=Ze();D=E(H,te)}else X=D,D=e;if(D===e){if(D=X,H=[],te=Ze(),te!==e)for(;te!==e;)H.push(te),te=Ze();else H=e;H!==e&&(H=O(H)),D=H}return D}function Ze(){var D,H,te,ce,ze;for(D=X,H=[],te=We();te!==e;)H.push(te),te=We();if(te=st(),te!==e){for(ce=[],ze=We();ze!==e;)ce.push(ze),ze=We();ze=dr(),ze!==e?D=Z(ze):(X=D,D=e)}else X=D,D=e;if(D===e){for(D=X,H=[],te=We();te!==e;)H.push(te),te=We();te=st(),te!==e?D=$e():(X=D,D=e)}return D}function dr(){var D,H,te,ce,ze,br,ir,mr,ar,yr;for(D=X,H=[],te=hr();te!==e;)H.push(te),te=hr();if(te=X,ce=[],ze=J(),ze===e)if(ze=X,br=hr(),br===e&&(br=We()),br!==e){for(ir=X,tr++,mr=X,ar=[],yr=hr(),yr===e&&(yr=We());yr!==e;)ar.push(yr),yr=hr(),yr===e&&(yr=We());yr=J(),yr!==e?(ar=[ar,yr],mr=ar):(X=mr,mr=e),tr--,mr!==e?(X=ir,ir=void 0):ir=e,ir!==e?(br=[br,ir],ze=br):(X=ze,ze=e)}else X=ze,ze=e;if(ze!==e){for(;ze!==e;)if(ce.push(ze),ze=J(),ze===e)if(ze=X,br=hr(),br===e&&(br=We()),br!==e){for(ir=X,tr++,mr=X,ar=[],yr=hr(),yr===e&&(yr=We());yr!==e;)ar.push(yr),yr=hr(),yr===e&&(yr=We());yr=J(),yr!==e?(ar=[ar,yr],mr=ar):(X=mr,mr=e),tr--,mr!==e?(X=ir,ir=void 0):ir=e,ir!==e?(br=[br,ir],ze=br):(X=ze,ze=e)}else X=ze,ze=e}else ce=e;if(ce!==e?te=n.substring(te,X):te=ce,te!==e){for(ce=[],ze=hr();ze!==e;)ce.push(ze),ze=hr();D=le(te)}else X=D,D=e;return D}function he(){var D,H,te;for(D=X,H=[],te=hr();te!==e;)H.push(te),te=hr();return te=se(),te!==e?D=M(te):(X=D,D=e),D}function Jr(){var D,H,te;return D=X,H=W(),te=He(),te!==e?D=j(H,te):(X=D,D=e),D}function Qr(){var D,H,te,ce;return D=X,H=X,te=X,tr++,ce=K(),tr--,ce===e?te=void 0:(X=te,te=e),te!==e?(n.length>X?(ce=n.charAt(X),X++):(ce=e,tr===0&&wr($)),ce!==e?(te=[te,ce],H=te):(X=H,H=e)):(X=H,H=e),H!==e?D=n.substring(D,X):D=H,D}function J(){var D,H,te,ce;return D=X,H=X,te=X,tr++,ce=hr(),ce===e&&(ce=We()),tr--,ce===e?te=void 0:(X=te,te=e),te!==e?(ce=xr(),ce===e&&(ce=Qr()),ce!==e?(te=[te,ce],H=te):(X=H,H=e)):(X=H,H=e),H!==e?D=n.substring(D,X):D=H,D}function K(){var D;return D=ye(),D===e&&(D=st(),D===e&&(D=he(),D===e&&(D=He()))),D}function W(){var D,H,te;for(D=X,H=[],te=hr(),te===e&&(te=We());te!==e;)H.push(te),te=hr(),te===e&&(te=We());return H=Se(H),D=H,D}function xr(){var D,H,te,ce,ze,br,ir,mr,ar;if(D=X,H=Ce(),H?H=e:H=void 0,H!==e){if(te=X,ce=X,ze=Mr(),ze!==e){for(br=[],ir=X,mr=X,tr++,ar=ht(),tr--,ar===e?mr=void 0:(X=mr,mr=e),mr!==e?(n.length>X?(ar=n.charAt(X),X++):(ar=e,tr===0&&wr($)),ar!==e?(mr=[mr,ar],ir=mr):(X=ir,ir=e)):(X=ir,ir=e);ir!==e;)br.push(ir),ir=X,mr=X,tr++,ar=ht(),tr--,ar===e?mr=void 0:(X=mr,mr=e),mr!==e?(n.length>X?(ar=n.charAt(X),X++):(ar=e,tr===0&&wr($)),ar!==e?(mr=[mr,ar],ir=mr):(X=ir,ir=e)):(X=ir,ir=e);ir=ht(),ir!==e?(ze=[ze,br,ir],ce=ze):(X=ce,ce=e)}else X=ce,ce=e;ce!==e?te=n.substring(te,X):te=ce,te!==e?(H=[H,te],D=H):(X=D,D=e)}else X=D,D=e;return D}function se(){var D,H,te;return D=X,n.length>X?(H=n.charAt(X),X++):(H=e,tr===0&&wr($)),H!==e?(te=ke(H),te?te=void 0:te=e,te!==e?D=Pe(H):(X=D,D=e)):(X=D,D=e),D}function He(){var D,H,te;return D=X,n.length>X?(H=n.charAt(X),X++):(H=e,tr===0&&wr($)),H!==e?(te=g(H),te?te=void 0:te=e,te!==e?D=Qe(H):(X=D,D=e)):(X=D,D=e),D}function hr(){var D,H,te;return D=X,n.length>X?(H=n.charAt(X),X++):(H=e,tr===0&&wr($)),H!==e?(te=$r(H),te?te=void 0:te=e,te!==e?D=Cr(H):(X=D,D=e)):(X=D,D=e),D}function We(){var D,H,te;return D=X,n.length>X?(H=n.charAt(X),X++):(H=e,tr===0&&wr($)),H!==e?(te=me(H),te?te=void 0:te=e,te!==e?D=Dr(H):(X=D,D=e)):(X=D,D=e),D}function ye(){var D,H,te;return D=X,n.length>X?(H=n.charAt(X),X++):(H=e,tr===0&&wr($)),H!==e?(te=gr(H),te?te=void 0:te=e,te!==e?D=Ie(H):(X=D,D=e)):(X=D,D=e),D}function st(){var D,H,te;return D=X,n.length>X?(H=n.charAt(X),X++):(H=e,tr===0&&wr($)),H!==e?(te=Er(H),te?te=void 0:te=e,te!==e?D=Lr(H):(X=D,D=e)):(X=D,D=e),D}function Mr(){var D,H,te;return D=X,n.length>X?(H=n.charAt(X),X++):(H=e,tr===0&&wr($)),H!==e?(te=Xr(H),te?te=void 0:te=e,te!==e?D=kr(H):(X=D,D=e)):(X=D,D=e),D}function ht(){var D,H,te;return D=X,n.length>X?(H=n.charAt(X),X++):(H=e,tr===0&&wr($)),H!==e?(te=xe(H),te?te=void 0:te=e,te!==e?D=ve(H):(X=D,D=e)):(X=D,D=e),D}function Or(){var D,H;return D=X,tr++,n.length>X?(H=n.charAt(X),X++):(H=e,tr===0&&wr($)),tr--,H===e?D=void 0:(X=D,D=e),D}function q(D,H){const te=[D||[]];for(const ce of H)te.push(ce.cell||[]);return{itemParts:te}}if(!a.isWhitespace)try{Object.assign(a,{isChar:(D,H)=>D.type==="string"&&D.content===H,isComma(D){return D.type==="string"&&D.content===","},isEquals(D){return D.type==="string"&&D.content==="="},isParbreak(D){return D.type==="parbreak"},isWhitespace(D){return D.type==="whitespace"},isSameLineComment:D=>D.type==="comment"&&D.sameline,isOwnLineComment:D=>D.type==="comment"&&!D.sameline,isComment:D=>D.type==="comment",allowParenGroups:!0})}catch(D){console.warn("Error when initializing parser",D)}if(ie=v(),ie!==e&&X===n.length)return ie;throw ie!==e&&X<n.length&&wr(Pr()),it(nr,Br<n.length?n.charAt(Br):null,Br<n.length?Zr(Br,Br+1):Zr(Br,Br))}return{SyntaxError:t,parse:i}})();(function(){function r(n,a){function e(){this.constructor=n}e.prototype=a.prototype,n.prototype=new e}function t(n,a,e,p){var b=Error.call(this,n);return Object.setPrototypeOf&&Object.setPrototypeOf(b,t.prototype),b.expected=a,b.found=e,b.location=p,b.name="SyntaxError",b}r(t,Error);function s(n,a,e){return e=e||" ",n.length>a?n:(a-=n.length,e+=e.repeat(a),n+e.slice(0,a))}t.prototype.format=function(n){var a="Error: "+this.message;if(this.location){var e=null,p;for(p=0;p<n.length;p++)if(n[p].source===this.location.source){e=n[p].text.split(/\r\n|\n|\r/g);break}var b=this.location.start,v=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(b):b,$=this.location.source+":"+v.line+":"+v.column;if(e){var L=this.location.end,R=s("",v.line.toString().length," "),A=e[b.line-1],E=b.line===L.line?L.column:A.length+1,O=E-b.column||1;a+=`
 --> `+$+`
`+R+` |
`+v.line+" | "+A+`
`+R+" | "+s("",b.column-1," ")+s("",O,"^")}else a+=`
 at `+$}return a},t.buildMessage=function(n,a){var e={literal:function(A){return'"'+b(A.text)+'"'},class:function(A){var E=A.parts.map(function(O){return Array.isArray(O)?v(O[0])+"-"+v(O[1]):v(O)});return"["+(A.inverted?"^":"")+E.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(A){return A.description}};function p(A){return A.charCodeAt(0).toString(16).toUpperCase()}function b(A){return A.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+p(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+p(E)})}function v(A){return A.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+p(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+p(E)})}function $(A){return e[A.type](A)}function L(A){var E=A.map($),O,Z;if(E.sort(),E.length>0){for(O=1,Z=1;O<E.length;O++)E[O-1]!==E[O]&&(E[Z]=E[O],Z++);E.length=Z}switch(E.length){case 1:return E[0];case 2:return E[0]+" or "+E[1];default:return E.slice(0,-1).join(", ")+", or "+E[E.length-1]}}function R(A){return A?'"'+b(A)+'"':"end of input"}return"Expected "+L(n)+" but "+R(a)+" found."};function i(n,a){a=a!==void 0?a:{};var e={},p=a.grammarSource,b={body:gr},v=gr,$=g(),L=function(xe){return[].concat(...xe).filter(ve=>!!ve)},R=function(){return[]},A=function(xe){return a.isHash(xe)},E=function(xe){return xe},O=function(xe){return a.isNumber(xe)},Z=function(xe){return xe},$e=function(){return{type:"string",content:"#"}},le=function(xe){const ve=a.splitNumber(xe);return[{type:"hash_number",number:ve.number},ve.rest]},M=0,j=[{line:1,column:1}],Se=0,Ce=[],ke=0,Pe;if("startRule"in a){if(!(a.startRule in b))throw new Error(`Can't start parsing from rule "`+a.startRule+'".');v=b[a.startRule]}function g(){return{type:"any"}}function Qe(){return{type:"end"}}function $r(xe){var ve=j[xe],X;if(ve)return ve;for(X=xe-1;!j[X];)X--;for(ve=j[X],ve={line:ve.line,column:ve.column};X<xe;)n.charCodeAt(X)===10?(ve.line++,ve.column=1):ve.column++,X++;return j[xe]=ve,ve}function Cr(xe,ve,X){var Fr=$r(xe),Br=$r(ve),nr={source:p,start:{offset:xe,line:Fr.line,column:Fr.column},end:{offset:ve,line:Br.line,column:Br.column}};return nr}function me(xe){M<Se||(M>Se&&(Se=M,Ce=[]),Ce.push(xe))}function Dr(xe,ve,X){return new t(t.buildMessage(xe,ve),xe,ve,X)}function gr(){var xe,ve,X;if(xe=M,ve=[],X=Lr(),X===e&&(X=Xr(),X===e&&(n.length>M?(X=n.charAt(M),M++):(X=e,ke===0&&me($)))),X!==e)for(;X!==e;)ve.push(X),X=Lr(),X===e&&(X=Xr(),X===e&&(n.length>M?(X=n.charAt(M),M++):(X=e,ke===0&&me($))));else ve=e;return ve!==e&&(ve=L(ve)),xe=ve,xe===e&&(xe=M,ve=kr(),ve!==e&&(ve=R()),xe=ve),xe}function Ie(){var xe,ve,X;return xe=M,n.length>M?(ve=n.charAt(M),M++):(ve=e,ke===0&&me($)),ve!==e?(X=A(ve),X?X=void 0:X=e,X!==e?xe=E(ve):(M=xe,xe=e)):(M=xe,xe=e),xe}function Er(){var xe,ve,X;return xe=M,n.length>M?(ve=n.charAt(M),M++):(ve=e,ke===0&&me($)),ve!==e?(X=O(ve),X?X=void 0:X=e,X!==e?xe=Z(ve):(M=xe,xe=e)):(M=xe,xe=e),xe}function Lr(){var xe,ve,X;return xe=M,ve=Ie(),ve!==e?(X=Ie(),X!==e?xe=$e():(M=xe,xe=e)):(M=xe,xe=e),xe}function Xr(){var xe,ve,X;return xe=M,ve=Ie(),ve!==e?(X=Er(),X!==e?xe=le(X):(M=xe,xe=e)):(M=xe,xe=e),xe}function kr(){var xe,ve;return xe=M,ke++,n.length>M?(ve=n.charAt(M),M++):(ve=e,ke===0&&me($)),ke--,ve===e?xe=void 0:(M=xe,xe=e),xe}if(!a.isHash)try{Object.assign(a,{isHash:xe=>xe.type==="string"&&xe.content==="#",isNumber:xe=>xe.type==="string"&&0<+xe.content.charAt(0),splitNumber:xe=>{const ve=+xe.content.charAt(0);return xe.content.length>1?{number:ve,rest:{type:"string",content:xe.content.slice(1)}}:{number:ve}}})}catch(xe){console.warn("Error when initializing parser",xe)}if(Pe=v(),Pe!==e&&M===n.length)return Pe;throw Pe!==e&&M<n.length&&me(Qe()),Dr(Ce,Se<n.length?n.charAt(Se):null,Se<n.length?Cr(Se,Se+1):Cr(Se,Se))}return{SyntaxError:t,parse:i}})();(function(){function r(n,a){function e(){this.constructor=n}e.prototype=a.prototype,n.prototype=new e}function t(n,a,e,p){var b=Error.call(this,n);return Object.setPrototypeOf&&Object.setPrototypeOf(b,t.prototype),b.expected=a,b.found=e,b.location=p,b.name="SyntaxError",b}r(t,Error);function s(n,a,e){return e=e||" ",n.length>a?n:(a-=n.length,e+=e.repeat(a),n+e.slice(0,a))}t.prototype.format=function(n){var a="Error: "+this.message;if(this.location){var e=null,p;for(p=0;p<n.length;p++)if(n[p].source===this.location.source){e=n[p].text.split(/\r\n|\n|\r/g);break}var b=this.location.start,v=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(b):b,$=this.location.source+":"+v.line+":"+v.column;if(e){var L=this.location.end,R=s("",v.line.toString().length," "),A=e[b.line-1],E=b.line===L.line?L.column:A.length+1,O=E-b.column||1;a+=`
 --> `+$+`
`+R+` |
`+v.line+" | "+A+`
`+R+" | "+s("",b.column-1," ")+s("",O,"^")}else a+=`
 at `+$}return a},t.buildMessage=function(n,a){var e={literal:function(A){return'"'+b(A.text)+'"'},class:function(A){var E=A.parts.map(function(O){return Array.isArray(O)?v(O[0])+"-"+v(O[1]):v(O)});return"["+(A.inverted?"^":"")+E.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(A){return A.description}};function p(A){return A.charCodeAt(0).toString(16).toUpperCase()}function b(A){return A.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+p(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+p(E)})}function v(A){return A.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+p(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+p(E)})}function $(A){return e[A.type](A)}function L(A){var E=A.map($),O,Z;if(E.sort(),E.length>0){for(O=1,Z=1;O<E.length;O++)E[O-1]!==E[O]&&(E[Z]=E[O],Z++);E.length=Z}switch(E.length){case 1:return E[0];case 2:return E[0]+" or "+E[1];default:return E.slice(0,-1).join(", ")+", or "+E[E.length-1]}}function R(A){return A?'"'+b(A)+'"':"end of input"}return"Expected "+L(n)+" but "+R(a)+" found."};function i(n,a){a=a!==void 0?a:{};var e={},p=a.grammarSource,b={body:Br},v=Br,$=Xr(),L=function(ne){return[].concat(...ne).filter(de=>!!de)},R=function(){return[]},A=function(ne){return a.isRecognized(ne)},E=function(ne){return a.isRecognized(ne)},O=function(ne,de){const be=a.split(de);return a.isRecognized([ne,be[0]])},Z=function(ne,de){const be=a.split(de);return[a.isRecognized([ne,be[0]]),be[1]]},$e=function(ne,de){return a.isRecognized([ne,de])},le=function(ne,de){return a.isRecognized([ne,de])},M=function(ne){return a.isRecognized(ne)},j=function(ne){return a.isRecognized(ne)},Se=function(ne){return a.isRecognized([ne])},Ce=function(ne){return a.isRecognized([ne])},ke=function(ne){return a.isMacro(ne)},Pe=function(ne){return ne},g=function(ne){return a.isWhitespace(ne)},Qe=function(ne){return ne},$r=function(ne){return a.isSplitable(ne)},Cr=function(ne){return ne},me=0,Dr=[{line:1,column:1}],gr=0,Ie=[],Er=0,Lr;if("startRule"in a){if(!(a.startRule in b))throw new Error(`Can't start parsing from rule "`+a.startRule+'".');v=b[a.startRule]}function Xr(){return{type:"any"}}function kr(){return{type:"end"}}function xe(ne){var de=Dr[ne],be;if(de)return de;for(be=ne-1;!Dr[be];)be--;for(de=Dr[be],de={line:de.line,column:de.column};be<ne;)n.charCodeAt(be)===10?(de.line++,de.column=1):de.column++,be++;return Dr[ne]=de,de}function ve(ne,de,be){var Ze=xe(ne),dr=xe(de),he={source:p,start:{offset:ne,line:Ze.line,column:Ze.column},end:{offset:de,line:dr.line,column:dr.column}};return he}function X(ne){me<gr||(me>gr&&(gr=me,Ie=[]),Ie.push(ne))}function Fr(ne,de,be){return new t(t.buildMessage(ne,de),ne,de,be)}function Br(){var ne,de,be;if(ne=me,de=[],be=nr(),be===e&&(be=tr(),be===e&&(be=rt(),be===e&&(n.length>me?(be=n.charAt(me),me++):(be=e,Er===0&&X($))))),be!==e)for(;be!==e;)de.push(be),be=nr(),be===e&&(be=tr(),be===e&&(be=rt(),be===e&&(n.length>me?(be=n.charAt(me),me++):(be=e,Er===0&&X($)))));else de=e;return de!==e&&(de=L(de)),ne=de,ne===e&&(ne=me,de=tt(),de!==e&&(de=R()),ne=de),ne}function nr(){var ne,de,be,Ze,dr;return ne=me,de=me,n.length>me?(be=n.charAt(me),me++):(be=e,Er===0&&X($)),be!==e?(n.length>me?(Ze=n.charAt(me),me++):(Ze=e,Er===0&&X($)),Ze!==e?(n.length>me?(dr=n.charAt(me),me++):(dr=e,Er===0&&X($)),dr!==e?(be=[be,Ze,dr],de=be):(me=de,de=e)):(me=de,de=e)):(me=de,de=e),de!==e?(be=A(de),be?be=void 0:be=e,be!==e?ne=E(de):(me=ne,ne=e)):(me=ne,ne=e),ne}function tr(){var ne;return ne=Ke(),ne===e&&(ne=ie(),ne===e&&(ne=Pr())),ne}function ie(){var ne,de,be,Ze,dr;if(ne=me,de=Zr(),de!==e){for(be=[],Ze=wr();Ze!==e;)be.push(Ze),Ze=wr();Ze=it(),Ze!==e?(dr=O(de,Ze),dr?dr=void 0:dr=e,dr!==e?ne=Z(de,Ze):(me=ne,ne=e)):(me=ne,ne=e)}else me=ne,ne=e;return ne}function Ke(){var ne,de,be,Ze,dr;if(ne=me,de=Zr(),de!==e){for(be=[],Ze=wr();Ze!==e;)be.push(Ze),Ze=wr();n.length>me?(Ze=n.charAt(me),me++):(Ze=e,Er===0&&X($)),Ze!==e?(dr=$e(de,Ze),dr?dr=void 0:dr=e,dr!==e?ne=le(de,Ze):(me=ne,ne=e)):(me=ne,ne=e)}else me=ne,ne=e;return ne}function Pr(){var ne,de,be,Ze;return ne=me,de=me,n.length>me?(be=n.charAt(me),me++):(be=e,Er===0&&X($)),be!==e?(n.length>me?(Ze=n.charAt(me),me++):(Ze=e,Er===0&&X($)),Ze!==e?(be=[be,Ze],de=be):(me=de,de=e)):(me=de,de=e),de!==e?(be=M(de),be?be=void 0:be=e,be!==e?ne=j(de):(me=ne,ne=e)):(me=ne,ne=e),ne}function rt(){var ne,de,be;return ne=me,n.length>me?(de=n.charAt(me),me++):(de=e,Er===0&&X($)),de!==e?(be=Se(de),be?be=void 0:be=e,be!==e?ne=Ce(de):(me=ne,ne=e)):(me=ne,ne=e),ne}function Zr(){var ne,de,be;return ne=me,n.length>me?(de=n.charAt(me),me++):(de=e,Er===0&&X($)),de!==e?(be=ke(de),be?be=void 0:be=e,be!==e?ne=Pe(de):(me=ne,ne=e)):(me=ne,ne=e),ne}function wr(){var ne,de,be;return ne=me,n.length>me?(de=n.charAt(me),me++):(de=e,Er===0&&X($)),de!==e?(be=g(de),be?be=void 0:be=e,be!==e?ne=Qe(de):(me=ne,ne=e)):(me=ne,ne=e),ne}function it(){var ne,de,be;return ne=me,n.length>me?(de=n.charAt(me),me++):(de=e,Er===0&&X($)),de!==e?(be=$r(de),be?be=void 0:be=e,be!==e?ne=Cr(de):(me=ne,ne=e)):(me=ne,ne=e),ne}function tt(){var ne,de;return ne=me,Er++,n.length>me?(de=n.charAt(me),me++):(de=e,Er===0&&X($)),Er--,de===e?ne=void 0:(me=ne,ne=e),ne}if(!a.isWhitespace)try{Object.assign(a,{isMacro:ne=>ne.type==="macro",isWhitespace:ne=>ne.type==="whitespace",isRecognized:ne=>ne.length==2&&ne[0].content==="^"&&ne[1].content==="o"?{type:"string",content:"ô"}:null,isSplitable:ne=>ne.type==="string"&&ne.content.length>1,split:ne=>[{type:"string",content:ne.content.charAt(0)},{type:"string",content:ne.content.slice(1)}]})}catch(ne){console.warn("Error when initializing parser",ne)}if(Lr=v(),Lr!==e&&me===n.length)return Lr;throw Lr!==e&&me<n.length&&X(kr()),Fr(Ie,gr<n.length?n.charAt(gr):null,gr<n.length?ve(gr,gr+1):ve(gr,gr))}return{SyntaxError:t,parse:i}})();(function(){function r(n,a){function e(){this.constructor=n}e.prototype=a.prototype,n.prototype=new e}function t(n,a,e,p){var b=Error.call(this,n);return Object.setPrototypeOf&&Object.setPrototypeOf(b,t.prototype),b.expected=a,b.found=e,b.location=p,b.name="SyntaxError",b}r(t,Error);function s(n,a,e){return e=e||" ",n.length>a?n:(a-=n.length,e+=e.repeat(a),n+e.slice(0,a))}t.prototype.format=function(n){var a="Error: "+this.message;if(this.location){var e=null,p;for(p=0;p<n.length;p++)if(n[p].source===this.location.source){e=n[p].text.split(/\r\n|\n|\r/g);break}var b=this.location.start,v=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(b):b,$=this.location.source+":"+v.line+":"+v.column;if(e){var L=this.location.end,R=s("",v.line.toString().length," "),A=e[b.line-1],E=b.line===L.line?L.column:A.length+1,O=E-b.column||1;a+=`
 --> `+$+`
`+R+` |
`+v.line+" | "+A+`
`+R+" | "+s("",b.column-1," ")+s("",O,"^")}else a+=`
 at `+$}return a},t.buildMessage=function(n,a){var e={literal:function(A){return'"'+b(A.text)+'"'},class:function(A){var E=A.parts.map(function(O){return Array.isArray(O)?v(O[0])+"-"+v(O[1]):v(O)});return"["+(A.inverted?"^":"")+E.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(A){return A.description}};function p(A){return A.charCodeAt(0).toString(16).toUpperCase()}function b(A){return A.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+p(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+p(E)})}function v(A){return A.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+p(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+p(E)})}function $(A){return e[A.type](A)}function L(A){var E=A.map($),O,Z;if(E.sort(),E.length>0){for(O=1,Z=1;O<E.length;O++)E[O-1]!==E[O]&&(E[Z]=E[O],Z++);E.length=Z}switch(E.length){case 1:return E[0];case 2:return E[0]+" or "+E[1];default:return E.slice(0,-1).join(", ")+", or "+E[E.length-1]}}function R(A){return A?'"'+b(A)+'"':"end of input"}return"Expected "+L(n)+" but "+R(a)+" found."};function i(n,a){a=a!==void 0?a:{};var e={},p=a.grammarSource,b={start:Tr},v=Tr,$=";",L=",",R=":",A="/",E=">",O="!",Z=".",$e="!![",le="]",M="!!",j="+",Se="-",Ce=/^[a-zA-Z0-9]/,ke=/^[0-9]/,Pe=/^[ \t\n\r]/,g=/^[0-9a-fA-F]/,Qe=at(),$r=Xe(";",!1),Cr=Xe(",",!1),me=ur("model list"),Dr=Xe(":",!1),gr=Xe("/",!1),Ie=ur("model"),Er=ur("color spec list"),Lr=ur("color spec"),Xr=ur("color"),kr=ur("function expression"),xe=Xe(">",!1),ve=ur("function"),X=ur("extended expression"),Fr=ur("core model"),Br=ur("expr"),nr=Xe("!",!1),tr=ur("mix expr"),ie=ur("name"),Ke=Xe(".",!1),Pr=jr([["a","z"],["A","Z"],["0","9"]],!1,!1),rt=ur("postfix"),Zr=Xe("!![",!1),wr=Xe("]",!1),it=Xe("!!",!1),tt=ur("prefix"),ne=ur("plus"),de=Xe("+",!1),be=ur("minus"),Ze=Xe("-",!1),dr=ur("num"),he=jr([["0","9"]],!1,!1),Jr=ur("positive float"),Qr=ur("divisor"),J=ur("int"),K=jr([" ","	",`
`,"\r"],!1,!1),W=jr([["0","9"],["a","f"],["A","F"]],!1,!1),xr=function(C){return C},se=function(C){return C},He=function(C){return C},hr=function(C){return C},We=function(C){return C},ye=function(C){return{type:"invalid_spec",content:C}},st=function(C,T){return T},Mr=function(C,T){return{type:"color_set",content:[C].concat(T)}},ht=function(C,T){return{type:"color_set_item",name:C,spec_list:T}},Or=function(C,T){return{type:"model_list",contents:T,core_model:C}},q=function(C){return{type:"model_list",contents:C,core_model:null}},D=function(C,T){return T},H=function(C,T){return[C].concat(T)},te=function(C,T){return T},ce=function(C,T){return{type:"spec_list",content:[C].concat(T)}},ze=function(C){return{type:"hex_spec",content:[C]}},br=function(C,T){return T},ir=function(C,T){return T},mr=function(C,T){return{type:"num_spec",content:T?[C].concat(T):[C]}},ar=function(C,T){return{type:"color",color:C,functions:T}},yr=function(C,T){return T},pr=function(C,T){return{type:"function",name:C,args:T}},_r=function(C,T,re,oe){return{type:"extended_expr",core_model:C,div:T,expressions:[re].concat(oe)}},Y=function(C,T,re){return{type:"extended_expr",core_model:C,div:null,expressions:[T].concat(re)}},ue=function(C,T){return{type:"weighted_expr",color:C,weight:T}},Be=function(C){return C},er=function(C,T,re,oe){return{type:"expr",prefix:C,name:T,mix_expr:re,postfix:oe}},Ee=function(C,T){return{type:"complete_mix",mix_percent:C,name:T}},Rr=function(C){return{type:"partial_mix",mix_percent:C}},cr=function(C,T){return C.concat(T||[])},l=function(C){return{type:"postfix",num:C}},m=function(C){return{type:"postfix",plusses:C}},o=function(C){return parseInt(C,10)},c=function(C){return parseFloat(C)},d=function(C){return C},I=function(C){return-C},N=function(C,T){return C?-T:T},y=function(C){return C.toUpperCase()},u=0,F=[{line:1,column:1}],fe=0,_e=[],ee=0,Ye;if("startRule"in a){if(!(a.startRule in b))throw new Error(`Can't start parsing from rule "`+a.startRule+'".');v=b[a.startRule]}function Xe(C,T){return{type:"literal",text:C,ignoreCase:T}}function jr(C,T,re){return{type:"class",parts:C,inverted:T,ignoreCase:re}}function at(){return{type:"any"}}function Kr(){return{type:"end"}}function ur(C){return{type:"other",description:C}}function Ur(C){var T=F[C],re;if(T)return T;for(re=C-1;!F[re];)re--;for(T=F[re],T={line:T.line,column:T.column};re<C;)n.charCodeAt(re)===10?(T.line++,T.column=1):T.column++,re++;return F[C]=T,T}function Nr(C,T,re){var oe=Ur(C),De=Ur(T),Ne={source:p,start:{offset:C,line:oe.line,column:oe.column},end:{offset:T,line:De.line,column:De.column}};return Ne}function Te(C){u<fe||(u>fe&&(fe=u,_e=[]),_e.push(C))}function St(C,T,re){return new t(t.buildMessage(C,T),C,T,re)}function Tr(){var C,T,re,oe;if(C=u,T=we(),T!==e?(re=kn(),re!==e?C=xr(T):(u=C,C=e)):(u=C,C=e),C===e&&(C=u,T=Fe(),T!==e?(re=kn(),re!==e?C=se(T):(u=C,C=e)):(u=C,C=e),C===e&&(C=u,T=Le(),T!==e?(re=kn(),re!==e?C=He(T):(u=C,C=e)):(u=C,C=e),C===e&&(C=u,T=k(),T!==e?(re=kn(),re!==e?C=hr(T):(u=C,C=e)):(u=C,C=e),C===e&&(C=u,T=vt(),T!==e?(re=kn(),re!==e?C=We(T):(u=C,C=e)):(u=C,C=e),C===e))))){for(C=u,T=u,re=[],n.length>u?(oe=n.charAt(u),u++):(oe=e,ee===0&&Te(Qe));oe!==e;)re.push(oe),n.length>u?(oe=n.charAt(u),u++):(oe=e,ee===0&&Te(Qe));T=n.substring(T,u),T=ye(T),C=T}return C}function vt(){var C,T,re,oe,De,Ne;if(C=u,T=Rt(),T!==e){for(re=[],oe=u,n.charCodeAt(u)===59?(De=$,u++):(De=e,ee===0&&Te($r)),De!==e?(Ne=Rt(),Ne!==e?oe=st(T,Ne):(u=oe,oe=e)):(u=oe,oe=e);oe!==e;)re.push(oe),oe=u,n.charCodeAt(u)===59?(De=$,u++):(De=e,ee===0&&Te($r)),De!==e?(Ne=Rt(),Ne!==e?oe=st(T,Ne):(u=oe,oe=e)):(u=oe,oe=e);C=Mr(T,re)}else u=C,C=e;return C}function Rt(){var C,T,re,oe;return C=u,T=pn(),T!==e?(n.charCodeAt(u)===44?(re=L,u++):(re=e,ee===0&&Te(Cr)),re!==e?(oe=Fe(),oe!==e?C=ht(T,oe):(u=C,C=e)):(u=C,C=e)):(u=C,C=e),C}function k(){var C,T,re,oe;return ee++,C=u,T=ot(),T!==e?(n.charCodeAt(u)===58?(re=R,u++):(re=e,ee===0&&Te(Dr)),re!==e?(oe=Q(),oe!==e?C=Or(T,oe):(u=C,C=e)):(u=C,C=e)):(u=C,C=e),C===e&&(C=u,T=Q(),T!==e&&(T=q(T)),C=T),ee--,C===e&&(T=e,ee===0&&Te(me)),C}function Q(){var C,T,re,oe,De,Ne;if(C=u,T=U(),T!==e){for(re=[],oe=u,n.charCodeAt(u)===47?(De=A,u++):(De=e,ee===0&&Te(gr)),De!==e?(Ne=U(),Ne!==e?oe=D(T,Ne):(u=oe,oe=e)):(u=oe,oe=e);oe!==e;)re.push(oe),oe=u,n.charCodeAt(u)===47?(De=A,u++):(De=e,ee===0&&Te(gr)),De!==e?(Ne=U(),Ne!==e?oe=D(T,Ne):(u=oe,oe=e)):(u=oe,oe=e);C=H(T,re)}else u=C,C=e;return C}function U(){var C;return ee++,C=ot(),ee--,C===e&&ee===0&&Te(Ie),C}function Fe(){var C,T,re,oe,De,Ne;if(ee++,C=u,T=we(),T!==e){for(re=[],oe=u,n.charCodeAt(u)===47?(De=A,u++):(De=e,ee===0&&Te(gr)),De!==e?(Ne=we(),Ne!==e?oe=te(T,Ne):(u=oe,oe=e)):(u=oe,oe=e);oe!==e;)re.push(oe),oe=u,n.charCodeAt(u)===47?(De=A,u++):(De=e,ee===0&&Te(gr)),De!==e?(Ne=we(),Ne!==e?oe=te(T,Ne):(u=oe,oe=e)):(u=oe,oe=e);C=ce(T,re)}else u=C,C=e;return ee--,C===e&&(T=e,ee===0&&Te(Er)),C}function we(){var C,T,re,oe,De,Ne,Wr,_t,vn;if(ee++,C=u,T=u,re=u,oe=mn(),oe!==e?(De=mn(),De!==e?(Ne=mn(),Ne!==e?(Wr=mn(),Wr!==e?(_t=mn(),_t!==e?(vn=mn(),vn!==e?(oe=[oe,De,Ne,Wr,_t,vn],re=oe):(u=re,re=e)):(u=re,re=e)):(u=re,re=e)):(u=re,re=e)):(u=re,re=e)):(u=re,re=e),re!==e?T=n.substring(T,u):T=re,T!==e&&(T=ze(T)),C=T,C===e)if(C=u,T=dn(),T!==e){if(re=[],oe=u,n.charCodeAt(u)===44?(De=L,u++):(De=e,ee===0&&Te(Cr)),De!==e?(Ne=dn(),Ne!==e?oe=br(T,Ne):(u=oe,oe=e)):(u=oe,oe=e),oe!==e)for(;oe!==e;)re.push(oe),oe=u,n.charCodeAt(u)===44?(De=L,u++):(De=e,ee===0&&Te(Cr)),De!==e?(Ne=dn(),Ne!==e?oe=br(T,Ne):(u=oe,oe=e)):(u=oe,oe=e);else re=e;if(re===e)if(re=[],oe=u,De=yi(),De!==e?(Ne=dn(),Ne!==e?oe=ir(T,Ne):(u=oe,oe=e)):(u=oe,oe=e),oe!==e)for(;oe!==e;)re.push(oe),oe=u,De=yi(),De!==e?(Ne=dn(),Ne!==e?oe=ir(T,Ne):(u=oe,oe=e)):(u=oe,oe=e);else re=e;re===e&&(re=null),C=mr(T,re)}else u=C,C=e;return ee--,C===e&&(T=e,ee===0&&Te(Lr)),C}function Le(){var C,T,re,oe;if(ee++,C=u,T=_(),T!==e){for(re=[],oe=V();oe!==e;)re.push(oe),oe=V();C=ar(T,re)}else u=C,C=e;return ee--,C===e&&(T=e,ee===0&&Te(Xr)),C}function _(){var C;return C=Me(),C===e&&(C=bt(),C===e&&(C=pn())),C}function V(){var C,T,re,oe,De,Ne,Wr;if(ee++,C=u,n.charCodeAt(u)===62?(T=E,u++):(T=e,ee===0&&Te(xe)),T!==e)if(re=ge(),re!==e){for(oe=[],De=u,n.charCodeAt(u)===44?(Ne=L,u++):(Ne=e,ee===0&&Te(Cr)),Ne!==e?(Wr=bi(),Wr!==e?De=yr(re,Wr):(u=De,De=e)):(u=De,De=e);De!==e;)oe.push(De),De=u,n.charCodeAt(u)===44?(Ne=L,u++):(Ne=e,ee===0&&Te(Cr)),Ne!==e?(Wr=bi(),Wr!==e?De=yr(re,Wr):(u=De,De=e)):(u=De,De=e);C=pr(re,oe)}else u=C,C=e;else u=C,C=e;return ee--,C===e&&(T=e,ee===0&&Te(kr)),C}function ge(){var C;return ee++,C=pn(),ee--,C===e&&ee===0&&Te(ve),C}function Me(){var C,T,re,oe,De,Ne,Wr,_t;if(ee++,C=u,T=ot(),T!==e)if(n.charCodeAt(u)===44?(re=L,u++):(re=e,ee===0&&Te(Cr)),re!==e)if(oe=Ji(),oe!==e)if(n.charCodeAt(u)===58?(De=R,u++):(De=e,ee===0&&Te(Dr)),De!==e)if(Ne=Ve(),Ne!==e){for(Wr=[],_t=Gr();_t!==e;)Wr.push(_t),_t=Gr();C=_r(T,oe,Ne,Wr)}else u=C,C=e;else u=C,C=e;else u=C,C=e;else u=C,C=e;else u=C,C=e;if(C===e)if(C=u,T=ot(),T!==e)if(n.charCodeAt(u)===58?(re=R,u++):(re=e,ee===0&&Te(Dr)),re!==e)if(oe=Ve(),oe!==e){for(De=[],Ne=Gr();Ne!==e;)De.push(Ne),Ne=Gr();C=Y(T,oe,De)}else u=C,C=e;else u=C,C=e;else u=C,C=e;return ee--,C===e&&(T=e,ee===0&&Te(X)),C}function Ve(){var C,T,re,oe;return C=u,T=bt(),T!==e?(n.charCodeAt(u)===44?(re=L,u++):(re=e,ee===0&&Te(Cr)),re!==e?(oe=dn(),oe!==e?C=ue(T,oe):(u=C,C=e)):(u=C,C=e)):(u=C,C=e),C}function Gr(){var C,T,re;return C=u,n.charCodeAt(u)===59?(T=$,u++):(T=e,ee===0&&Te($r)),T!==e?(re=Ve(),re!==e?C=Be(re):(u=C,C=e)):(u=C,C=e),C}function ot(){var C;return ee++,C=pn(),ee--,C===e&&ee===0&&Te(Fr),C}function bt(){var C,T,re,oe,De;return ee++,C=u,T=Zi(),re=pn(),re!==e?(oe=Xi(),De=Ki(),De===e&&(De=null),C=er(T,re,oe,De)):(u=C,C=e),ee--,C===e&&(T=e,ee===0&&Te(Br)),C}function di(){var C,T,re,oe,De;return C=u,n.charCodeAt(u)===33?(T=O,u++):(T=e,ee===0&&Te(nr)),T!==e?(re=gn(),re!==e?(n.charCodeAt(u)===33?(oe=O,u++):(oe=e,ee===0&&Te(nr)),oe!==e?(De=pn(),De!==e?C=Ee(re,De):(u=C,C=e)):(u=C,C=e)):(u=C,C=e)):(u=C,C=e),C}function Vi(){var C,T,re;return C=u,n.charCodeAt(u)===33?(T=O,u++):(T=e,ee===0&&Te(nr)),T!==e?(re=gn(),re!==e?C=Rr(re):(u=C,C=e)):(u=C,C=e),C}function Xi(){var C,T,re;for(ee++,C=u,T=[],re=di();re!==e;)T.push(re),re=di();return re=Vi(),re===e&&(re=null),C=cr(T,re),ee--,T=e,ee===0&&Te(tr),C}function pn(){var C,T,re;if(ee++,n.charCodeAt(u)===46?(C=Z,u++):(C=e,ee===0&&Te(Ke)),C===e){if(C=u,T=[],Ce.test(n.charAt(u))?(re=n.charAt(u),u++):(re=e,ee===0&&Te(Pr)),re!==e)for(;re!==e;)T.push(re),Ce.test(n.charAt(u))?(re=n.charAt(u),u++):(re=e,ee===0&&Te(Pr));else T=e;T!==e?C=n.substring(C,u):C=T}return ee--,C===e&&(T=e,ee===0&&Te(ie)),C}function Ki(){var C,T,re,oe,De;if(ee++,C=u,n.substr(u,3)===$e?(T=$e,u+=3):(T=e,ee===0&&Te(Zr)),T!==e?(re=vi(),re!==e?(n.charCodeAt(u)===93?(oe=le,u++):(oe=e,ee===0&&Te(wr)),oe!==e?C=l(re):(u=C,C=e)):(u=C,C=e)):(u=C,C=e),C===e)if(C=u,n.substr(u,2)===M?(T=M,u+=2):(T=e,ee===0&&Te(it)),T!==e){if(re=u,oe=[],De=mi(),De!==e)for(;De!==e;)oe.push(De),De=mi();else oe=e;oe!==e?re=n.substring(re,u):re=oe,re!==e?C=m(re):(u=C,C=e)}else u=C,C=e;return ee--,C===e&&(T=e,ee===0&&Te(rt)),C}function Zi(){var C;return ee++,C=Yn(),C===e&&(C=null),ee--,ee===0&&Te(tt),C}function mi(){var C,T,re;if(ee++,C=u,T=[],n.charCodeAt(u)===43?(re=j,u++):(re=e,ee===0&&Te(de)),re!==e)for(;re!==e;)T.push(re),n.charCodeAt(u)===43?(re=j,u++):(re=e,ee===0&&Te(de));else T=e;return T!==e?C=n.substring(C,u):C=T,ee--,C===e&&(T=e,ee===0&&Te(ne)),C}function Yn(){var C,T,re;if(ee++,C=u,T=[],n.charCodeAt(u)===45?(re=Se,u++):(re=e,ee===0&&Te(Ze)),re!==e)for(;re!==e;)T.push(re),n.charCodeAt(u)===45?(re=Se,u++):(re=e,ee===0&&Te(Ze));else T=e;return T!==e?C=n.substring(C,u):C=T,ee--,C===e&&(T=e,ee===0&&Te(be)),C}function vi(){var C,T,re,oe;if(ee++,C=u,T=u,re=[],ke.test(n.charAt(u))?(oe=n.charAt(u),u++):(oe=e,ee===0&&Te(he)),oe!==e)for(;oe!==e;)re.push(oe),ke.test(n.charAt(u))?(oe=n.charAt(u),u++):(oe=e,ee===0&&Te(he));else re=e;return re!==e?T=n.substring(T,u):T=re,T!==e&&(T=o(T)),C=T,ee--,C===e&&(T=e,ee===0&&Te(dr)),C}function gn(){var C,T,re,oe,De,Ne,Wr,_t,vn,bn;if(ee++,C=u,T=u,re=u,oe=u,De=[],ke.test(n.charAt(u))?(Ne=n.charAt(u),u++):(Ne=e,ee===0&&Te(he)),Ne!==e)for(;Ne!==e;)De.push(Ne),ke.test(n.charAt(u))?(Ne=n.charAt(u),u++):(Ne=e,ee===0&&Te(he));else De=e;if(De!==e?oe=n.substring(oe,u):oe=De,oe!==e){if(De=u,Ne=u,n.charCodeAt(u)===46?(Wr=Z,u++):(Wr=e,ee===0&&Te(Ke)),Wr!==e){for(_t=u,vn=[],ke.test(n.charAt(u))?(bn=n.charAt(u),u++):(bn=e,ee===0&&Te(he));bn!==e;)vn.push(bn),ke.test(n.charAt(u))?(bn=n.charAt(u),u++):(bn=e,ee===0&&Te(he));_t=n.substring(_t,u),Wr=[Wr,_t],Ne=Wr}else u=Ne,Ne=e;Ne===e&&(Ne=null),De=n.substring(De,u),oe=[oe,De],re=oe}else u=re,re=e;if(re!==e?T=n.substring(T,u):T=re,T===e){if(T=u,re=u,n.charCodeAt(u)===46?(oe=Z,u++):(oe=e,ee===0&&Te(Ke)),oe!==e){if(De=u,Ne=[],ke.test(n.charAt(u))?(Wr=n.charAt(u),u++):(Wr=e,ee===0&&Te(he)),Wr!==e)for(;Wr!==e;)Ne.push(Wr),ke.test(n.charAt(u))?(Wr=n.charAt(u),u++):(Wr=e,ee===0&&Te(he));else Ne=e;Ne!==e?De=n.substring(De,u):De=Ne,De!==e?(oe=[oe,De],re=oe):(u=re,re=e)}else u=re,re=e;re!==e?T=n.substring(T,u):T=re}return T!==e&&(T=c(T)),C=T,ee--,C===e&&(T=e,ee===0&&Te(Jr)),C}function Ji(){var C;return ee++,C=gn(),ee--,C===e&&ee===0&&Te(Qr),C}function dn(){var C,T,re;return C=gn(),C===e&&(C=u,n.charCodeAt(u)===43?(T=j,u++):(T=e,ee===0&&Te(de)),T!==e?(re=gn(),re!==e?C=d(re):(u=C,C=e)):(u=C,C=e),C===e&&(C=u,n.charCodeAt(u)===45?(T=Se,u++):(T=e,ee===0&&Te(Ze)),T!==e?(re=gn(),re!==e?C=I(re):(u=C,C=e)):(u=C,C=e))),C}function bi(){var C,T,re;return ee++,C=u,T=Yn(),T===e&&(T=null),re=vi(),re!==e?C=N(T,re):(u=C,C=e),ee--,C===e&&(T=e,ee===0&&Te(J)),C}function yi(){var C,T;if(C=[],Pe.test(n.charAt(u))?(T=n.charAt(u),u++):(T=e,ee===0&&Te(K)),T!==e)for(;T!==e;)C.push(T),Pe.test(n.charAt(u))?(T=n.charAt(u),u++):(T=e,ee===0&&Te(K));else C=e;return C}function mn(){var C,T;return C=u,g.test(n.charAt(u))?(T=n.charAt(u),u++):(T=e,ee===0&&Te(W)),T!==e&&(T=y(T)),C=T,C}function kn(){var C,T;return C=u,ee++,n.length>u?(T=n.charAt(u),u++):(T=e,ee===0&&Te(Qe)),ee--,T===e?C=void 0:(u=C,C=e),C}if(Ye=v(),Ye!==e&&u===n.length)return Ye;throw Ye!==e&&u<n.length&&Te(Kr()),St(_e,fe<n.length?n.charAt(fe):null,fe<n.length?Nr(fe,fe+1):Nr(fe,fe))}return{SyntaxError:t,parse:i}})();(function(){function r(n,a){function e(){this.constructor=n}e.prototype=a.prototype,n.prototype=new e}function t(n,a,e,p){var b=Error.call(this,n);return Object.setPrototypeOf&&Object.setPrototypeOf(b,t.prototype),b.expected=a,b.found=e,b.location=p,b.name="SyntaxError",b}r(t,Error);function s(n,a,e){return e=e||" ",n.length>a?n:(a-=n.length,e+=e.repeat(a),n+e.slice(0,a))}t.prototype.format=function(n){var a="Error: "+this.message;if(this.location){var e=null,p;for(p=0;p<n.length;p++)if(n[p].source===this.location.source){e=n[p].text.split(/\r\n|\n|\r/g);break}var b=this.location.start,v=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(b):b,$=this.location.source+":"+v.line+":"+v.column;if(e){var L=this.location.end,R=s("",v.line.toString().length," "),A=e[b.line-1],E=b.line===L.line?L.column:A.length+1,O=E-b.column||1;a+=`
 --> `+$+`
`+R+` |
`+v.line+" | "+A+`
`+R+" | "+s("",b.column-1," ")+s("",O,"^")}else a+=`
 at `+$}return a},t.buildMessage=function(n,a){var e={literal:function(A){return'"'+b(A.text)+'"'},class:function(A){var E=A.parts.map(function(O){return Array.isArray(O)?v(O[0])+"-"+v(O[1]):v(O)});return"["+(A.inverted?"^":"")+E.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(A){return A.description}};function p(A){return A.charCodeAt(0).toString(16).toUpperCase()}function b(A){return A.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+p(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+p(E)})}function v(A){return A.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+p(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+p(E)})}function $(A){return e[A.type](A)}function L(A){var E=A.map($),O,Z;if(E.sort(),E.length>0){for(O=1,Z=1;O<E.length;O++)E[O-1]!==E[O]&&(E[Z]=E[O],Z++);E.length=Z}switch(E.length){case 1:return E[0];case 2:return E[0]+" or "+E[1];default:return E.slice(0,-1).join(", ")+", or "+E[E.length-1]}}function R(A){return A?'"'+b(A)+'"':"end of input"}return"Expected "+L(n)+" but "+R(a)+" found."};function i(n,a){a=a!==void 0?a:{};var e={},p=a.grammarSource,b={body:ce},v=ce,$=Or("decl_start"),L=Or("decl_end"),R=Or("vert"),A=Mr(),E=Or("l"),O=Or("r"),Z=Or("c"),$e=Or("p"),le=Or("m"),M=Or("b"),j=Or("w"),Se=Or("W"),Ce=Or("X"),ke=Or("!"),Pe=Or("@"),g=Or("<"),Qe=Or(">"),$r=Or("group"),Cr=Or("whitespace"),me=function(y){return y},Dr=function(y){return y},gr=function(){return[]},Ie=function(y,u,F,fe,_e){return{type:"column",pre_dividers:y,post_dividers:_e,before_start_code:u,before_end_code:fe,alignment:F}},Er=function(){return{type:"vert_divider"}},Lr=function(y,u){return{type:"bang_divider",content:u[0].content}},Xr=function(y){return{type:"at_divider",content:y[0].content}},kr=function(y){return y},xe=function(y){return{type:"decl_code",code:y[0].content}},ve=function(y){return{type:"decl_code",code:y[0].content}},X=function(){return{type:"alignment",alignment:"left"}},Fr=function(){return{type:"alignment",alignment:"center"}},Br=function(){return{type:"alignment",alignment:"right"}},nr=function(){return{type:"alignment",alignment:"X"}},tr=function(){return"top"},ie=function(){return"default"},Ke=function(){return"bottom"},Pr=function(y,u){return{type:"alignment",alignment:"parbox",baseline:y,size:u[0].content}},rt=function(y,u){return{type:"alignment",alignment:"parbox",baseline:y[0].content,size:u[0].content}},Zr=function(y){return a.matchChar(y,"|")},wr=function(y){return a.matchChar(y,"l")},it=function(y){return a.matchChar(y,"r")},tt=function(y){return a.matchChar(y,"c")},ne=function(y){return a.matchChar(y,"p")},de=function(y){return a.matchChar(y,"m")},be=function(y){return a.matchChar(y,"b")},Ze=function(y){return a.matchChar(y,"w")},dr=function(y){return a.matchChar(y,"W")},he=function(y){return a.matchChar(y,"X")},Jr=function(y){return a.matchChar(y,"!")},Qr=function(y){return a.matchChar(y,"@")},J=function(y){return a.matchChar(y,"<")},K=function(y){return a.matchChar(y,">")},W=function(y){return a.isGroup(y)},xr=function(y){return a.isWhitespace(y)},se=0,He=[{line:1,column:1}],hr=0,We=[],ye=0,st;if("startRule"in a){if(!(a.startRule in b))throw new Error(`Can't start parsing from rule "`+a.startRule+'".');v=b[a.startRule]}function Mr(){return{type:"any"}}function ht(){return{type:"end"}}function Or(y){return{type:"other",description:y}}function q(y){var u=He[y],F;if(u)return u;for(F=y-1;!He[F];)F--;for(u=He[F],u={line:u.line,column:u.column};F<y;)n.charCodeAt(F)===10?(u.line++,u.column=1):u.column++,F++;return He[y]=u,u}function D(y,u,F){var fe=q(y),_e=q(u),ee={source:p,start:{offset:y,line:fe.line,column:fe.column},end:{offset:u,line:_e.line,column:_e.column}};return ee}function H(y){se<hr||(se>hr&&(hr=se,We=[]),We.push(y))}function te(y,u,F){return new t(t.buildMessage(y,u),y,u,F)}function ce(){var y,u,F,fe,_e,ee;if(y=se,u=[],F=se,fe=ze(),fe!==e){for(_e=[],ee=I();ee!==e;)_e.push(ee),ee=I();F=me(fe)}else se=F,F=e;if(F!==e)for(;F!==e;)if(u.push(F),F=se,fe=ze(),fe!==e){for(_e=[],ee=I();ee!==e;)_e.push(ee),ee=I();F=me(fe)}else se=F,F=e;else u=e;return u!==e&&(u=Dr(u)),y=u,y===e&&(y=se,u=N(),u!==e&&(u=gr()),y=u),y}function ze(){var y,u,F,fe,_e,ee,Ye;for(y=se,u=[],F=br();F!==e;)u.push(F),F=br();if(F=ir(),F===e&&(F=null),fe=ar(),fe!==e){for(_e=mr(),_e===e&&(_e=null),ee=[],Ye=br();Ye!==e;)ee.push(Ye),Ye=br();y=Ie(u,F,fe,_e,ee)}else se=y,y=e;return y}function br(){var y,u,F,fe,_e;for(y=se,u=[],F=I();F!==e;)u.push(F),F=I();if(F=se,fe=yr(),fe!==e&&(fe=Er()),F=fe,F===e&&(F=se,fe=l(),fe!==e?(_e=d(),_e!==e?F=Lr(fe,_e):(se=F,F=e)):(se=F,F=e),F===e&&(F=se,fe=m(),fe!==e?(_e=d(),_e!==e?F=Xr(_e):(se=F,F=e)):(se=F,F=e))),F!==e){for(fe=[],_e=I();_e!==e;)fe.push(_e),_e=I();y=kr(F)}else se=y,y=e;return y}function ir(){var y,u,F;return ye++,y=se,u=c(),u!==e?(F=d(),F!==e?y=xe(F):(se=y,y=e)):(se=y,y=e),ye--,y===e&&(u=e,ye===0&&H($)),y}function mr(){var y,u,F;return ye++,y=se,u=o(),u!==e?(F=d(),F!==e?y=ve(F):(se=y,y=e)):(se=y,y=e),ye--,y===e&&(u=e,ye===0&&H(L)),y}function ar(){var y,u,F,fe,_e,ee;if(y=se,u=pr(),u!==e&&(u=X()),y=u,y===e&&(y=se,u=Y(),u!==e&&(u=Fr()),y=u,y===e&&(y=se,u=_r(),u!==e&&(u=Br()),y=u,y===e&&(y=se,u=cr(),u!==e&&(u=nr()),y=u,y===e)))){if(y=se,u=se,F=ue(),F!==e&&(F=tr()),u=F,u===e&&(u=se,F=Be(),F!==e&&(F=ie()),u=F,u===e&&(u=se,F=er(),F!==e&&(F=Ke()),u=F)),u!==e){for(F=[],fe=I();fe!==e;)F.push(fe),fe=I();fe=d(),fe!==e?y=Pr(u,fe):(se=y,y=e)}else se=y,y=e;if(y===e)if(y=se,u=Ee(),u===e&&(u=Rr()),u!==e){for(F=[],fe=I();fe!==e;)F.push(fe),fe=I();if(fe=d(),fe!==e){for(_e=[],ee=I();ee!==e;)_e.push(ee),ee=I();ee=d(),ee!==e?y=rt(fe,ee):(se=y,y=e)}else se=y,y=e}else se=y,y=e}return y}function yr(){var y,u,F;return ye++,y=se,n.length>se?(u=n.charAt(se),se++):(u=e,ye===0&&H(A)),u!==e?(F=Zr(u),F?F=void 0:F=e,F!==e?(u=[u,F],y=u):(se=y,y=e)):(se=y,y=e),ye--,y===e&&(u=e,ye===0&&H(R)),y}function pr(){var y,u,F;return ye++,y=se,n.length>se?(u=n.charAt(se),se++):(u=e,ye===0&&H(A)),u!==e?(F=wr(u),F?F=void 0:F=e,F!==e?(u=[u,F],y=u):(se=y,y=e)):(se=y,y=e),ye--,y===e&&(u=e,ye===0&&H(E)),y}function _r(){var y,u,F;return ye++,y=se,n.length>se?(u=n.charAt(se),se++):(u=e,ye===0&&H(A)),u!==e?(F=it(u),F?F=void 0:F=e,F!==e?(u=[u,F],y=u):(se=y,y=e)):(se=y,y=e),ye--,y===e&&(u=e,ye===0&&H(O)),y}function Y(){var y,u,F;return ye++,y=se,n.length>se?(u=n.charAt(se),se++):(u=e,ye===0&&H(A)),u!==e?(F=tt(u),F?F=void 0:F=e,F!==e?(u=[u,F],y=u):(se=y,y=e)):(se=y,y=e),ye--,y===e&&(u=e,ye===0&&H(Z)),y}function ue(){var y,u,F;return ye++,y=se,n.length>se?(u=n.charAt(se),se++):(u=e,ye===0&&H(A)),u!==e?(F=ne(u),F?F=void 0:F=e,F!==e?(u=[u,F],y=u):(se=y,y=e)):(se=y,y=e),ye--,y===e&&(u=e,ye===0&&H($e)),y}function Be(){var y,u,F;return ye++,y=se,n.length>se?(u=n.charAt(se),se++):(u=e,ye===0&&H(A)),u!==e?(F=de(u),F?F=void 0:F=e,F!==e?(u=[u,F],y=u):(se=y,y=e)):(se=y,y=e),ye--,y===e&&(u=e,ye===0&&H(le)),y}function er(){var y,u,F;return ye++,y=se,n.length>se?(u=n.charAt(se),se++):(u=e,ye===0&&H(A)),u!==e?(F=be(u),F?F=void 0:F=e,F!==e?(u=[u,F],y=u):(se=y,y=e)):(se=y,y=e),ye--,y===e&&(u=e,ye===0&&H(M)),y}function Ee(){var y,u,F;return ye++,y=se,n.length>se?(u=n.charAt(se),se++):(u=e,ye===0&&H(A)),u!==e?(F=Ze(u),F?F=void 0:F=e,F!==e?(u=[u,F],y=u):(se=y,y=e)):(se=y,y=e),ye--,y===e&&(u=e,ye===0&&H(j)),y}function Rr(){var y,u,F;return ye++,y=se,n.length>se?(u=n.charAt(se),se++):(u=e,ye===0&&H(A)),u!==e?(F=dr(u),F?F=void 0:F=e,F!==e?(u=[u,F],y=u):(se=y,y=e)):(se=y,y=e),ye--,y===e&&(u=e,ye===0&&H(Se)),y}function cr(){var y,u,F;return ye++,y=se,n.length>se?(u=n.charAt(se),se++):(u=e,ye===0&&H(A)),u!==e?(F=he(u),F?F=void 0:F=e,F!==e?(u=[u,F],y=u):(se=y,y=e)):(se=y,y=e),ye--,y===e&&(u=e,ye===0&&H(Ce)),y}function l(){var y,u,F;return ye++,y=se,n.length>se?(u=n.charAt(se),se++):(u=e,ye===0&&H(A)),u!==e?(F=Jr(u),F?F=void 0:F=e,F!==e?(u=[u,F],y=u):(se=y,y=e)):(se=y,y=e),ye--,y===e&&(u=e,ye===0&&H(ke)),y}function m(){var y,u,F;return ye++,y=se,n.length>se?(u=n.charAt(se),se++):(u=e,ye===0&&H(A)),u!==e?(F=Qr(u),F?F=void 0:F=e,F!==e?(u=[u,F],y=u):(se=y,y=e)):(se=y,y=e),ye--,y===e&&(u=e,ye===0&&H(Pe)),y}function o(){var y,u,F;return ye++,y=se,n.length>se?(u=n.charAt(se),se++):(u=e,ye===0&&H(A)),u!==e?(F=J(u),F?F=void 0:F=e,F!==e?(u=[u,F],y=u):(se=y,y=e)):(se=y,y=e),ye--,y===e&&(u=e,ye===0&&H(g)),y}function c(){var y,u,F;return ye++,y=se,n.length>se?(u=n.charAt(se),se++):(u=e,ye===0&&H(A)),u!==e?(F=K(u),F?F=void 0:F=e,F!==e?(u=[u,F],y=u):(se=y,y=e)):(se=y,y=e),ye--,y===e&&(u=e,ye===0&&H(Qe)),y}function d(){var y,u,F;return ye++,y=se,n.length>se?(u=n.charAt(se),se++):(u=e,ye===0&&H(A)),u!==e?(F=W(u),F?F=void 0:F=e,F!==e?(u=[u,F],y=u):(se=y,y=e)):(se=y,y=e),ye--,y===e&&(u=e,ye===0&&H($r)),y}function I(){var y,u,F;return ye++,y=se,n.length>se?(u=n.charAt(se),se++):(u=e,ye===0&&H(A)),u!==e?(F=xr(u),F?F=void 0:F=e,F!==e?(u=[u,F],y=u):(se=y,y=e)):(se=y,y=e),ye--,y===e&&(u=e,ye===0&&H(Cr)),y}function N(){var y,u;return y=se,ye++,n.length>se?(u=n.charAt(se),se++):(u=e,ye===0&&H(A)),ye--,u===e?y=void 0:(se=y,y=e),y}if(!a.isHash)try{Object.assign(a,{matchChar:(y,u)=>y.type==="string"&&y.content===u,isGroup:y=>y.type==="group",isWhitespace:y=>y.type==="whitespace"})}catch(y){console.warn("Error when initializing parser",y)}if(st=v(),st!==e&&se===n.length)return st;throw st!==e&&se<n.length&&H(ht()),te(We,hr<n.length?n.charAt(hr):null,hr<n.length?D(hr,hr+1):D(hr,hr))}return{SyntaxError:t,parse:i}})();(function(){function r(n,a){function e(){this.constructor=n}e.prototype=a.prototype,n.prototype=new e}function t(n,a,e,p){var b=Error.call(this,n);return Object.setPrototypeOf&&Object.setPrototypeOf(b,t.prototype),b.expected=a,b.found=e,b.location=p,b.name="SyntaxError",b}r(t,Error);function s(n,a,e){return e=e||" ",n.length>a?n:(a-=n.length,e+=e.repeat(a),n+e.slice(0,a))}t.prototype.format=function(n){var a="Error: "+this.message;if(this.location){var e=null,p;for(p=0;p<n.length;p++)if(n[p].source===this.location.source){e=n[p].text.split(/\r\n|\n|\r/g);break}var b=this.location.start,v=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(b):b,$=this.location.source+":"+v.line+":"+v.column;if(e){var L=this.location.end,R=s("",v.line.toString().length," "),A=e[b.line-1],E=b.line===L.line?L.column:A.length+1,O=E-b.column||1;a+=`
 --> `+$+`
`+R+` |
`+v.line+" | "+A+`
`+R+" | "+s("",b.column-1," ")+s("",O,"^")}else a+=`
 at `+$}return a},t.buildMessage=function(n,a){var e={literal:function(A){return'"'+b(A.text)+'"'},class:function(A){var E=A.parts.map(function(O){return Array.isArray(O)?v(O[0])+"-"+v(O[1]):v(O)});return"["+(A.inverted?"^":"")+E.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(A){return A.description}};function p(A){return A.charCodeAt(0).toString(16).toUpperCase()}function b(A){return A.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+p(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+p(E)})}function v(A){return A.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+p(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+p(E)})}function $(A){return e[A.type](A)}function L(A){var E=A.map($),O,Z;if(E.sort(),E.length>0){for(O=1,Z=1;O<E.length;O++)E[O-1]!==E[O]&&(E[Z]=E[O],Z++);E.length=Z}switch(E.length){case 1:return E[0];case 2:return E[0]+" or "+E[1];default:return E.slice(0,-1).join(", ")+", or "+E[E.length-1]}}function R(A){return A?'"'+b(A)+'"':"end of input"}return"Expected "+L(n)+" but "+R(a)+" found."};function i(n,a){a=a!==void 0?a:{};var e={},p=a.grammarSource,b={body:Mr},v=Mr,$=He("item"),L=xr(),R=He("equation"),A=He("trailing comment"),E=He("comment only line"),O=He("non-var token"),Z=He("token"),$e=He("same line comment"),le=He("own line comment"),M=He(","),j=He("@"),Se=He("variable token"),Ce=He("+/-"),ke=He("="),Pe=function(l,m){return l.concat(m||[])},g=function(){return[]},Qe=function(l,m,o,c){return{type:"item",op:l,variable:o,content:m.concat(o,c)}},$r=function(l,m){return{type:"item",op:l,variable:null,content:m}},Cr=function(l,m,o){return{...l,sep:[].concat(m),trailingComment:o}},me=function(l,m){return{...l,trailingComment:m}},Dr=function(l,m){return{type:"line",equation:l,annotation:m,sep:null}},gr=function(l,m){return l?{type:"annotation",marker:l,content:m}:null},Ie=function(l,m,o){return{type:"equation",left:l,right:o,equals:m}},Er=function(l){return l},Lr=function(l){return{type:"line",trailingComment:l}},Xr=function(l,m){return[l].concat(m||[])},kr=function(l){return l},xe=function(l){return l},ve=function(l){return l},X=function(l){return a.isSameLineComment(l)},Fr=function(l){return l},Br=function(l){return a.isOwnLineComment(l)},nr=function(l){return l},tr=function(l){return a.isWhitespace(l)},ie=function(l){return l},Ke=function(l){return a.isSep(l)},Pr=function(l){return l},rt=function(l){return a.isAt(l)},Zr=function(l){return l},wr=function(l){return a.isVar(l)},it=function(l){return l},tt=function(l){return a.isOperation(l)},ne=function(l){return l},de=function(l){return a.isEquals(l)},be=function(l){return l},Ze=function(l){return a.isSubscript(l)},dr=function(l){return l},he=0,Jr=[{line:1,column:1}],Qr=0,J=[],K=0,W;if("startRule"in a){if(!(a.startRule in b))throw new Error(`Can't start parsing from rule "`+a.startRule+'".');v=b[a.startRule]}function xr(){return{type:"any"}}function se(){return{type:"end"}}function He(l){return{type:"other",description:l}}function hr(l){var m=Jr[l],o;if(m)return m;for(o=l-1;!Jr[o];)o--;for(m=Jr[o],m={line:m.line,column:m.column};o<l;)n.charCodeAt(o)===10?(m.line++,m.column=1):m.column++,o++;return Jr[l]=m,m}function We(l,m,o){var c=hr(l),d=hr(m),I={source:p,start:{offset:l,line:c.line,column:c.column},end:{offset:m,line:d.line,column:d.column}};return I}function ye(l){he<Qr||(he>Qr&&(Qr=he,J=[]),J.push(l))}function st(l,m,o){return new t(t.buildMessage(l,m),l,m,o)}function Mr(){var l,m,o;for(l=he,m=[],o=ze(),o===e&&(o=Or(),o===e&&(o=q()));o!==e;)m.push(o),o=ze(),o===e&&(o=Or(),o===e&&(o=q()));return o=D(),o===e&&(o=cr()),o!==e?l=Pe(m,o):(he=l,l=e),l===e&&(l=he,m=cr(),m!==e&&(m=g()),l=m),l}function ht(){var l,m,o,c,d,I,N,y,u,F;for(K++,l=he,m=er(),m===e&&(m=null),o=[],c=_r();c!==e;)o.push(c),c=_r();for(c=[],d=ir();d!==e;)c.push(d),d=ir();for(d=[],I=_r();I!==e;)d.push(I),I=_r();if(I=br(),I!==e){for(N=[],y=_r();y!==e;)N.push(y),y=_r();for(y=[],u=ar();u!==e;)y.push(u),u=ar();for(u=[],F=_r();F!==e;)u.push(F),F=_r();l=Qe(m,c,I,y)}else he=l,l=e;if(l===e){for(l=he,m=er(),m===e&&(m=null),o=[],c=_r();c!==e;)o.push(c),c=_r();if(c=[],d=ir(),d!==e)for(;d!==e;)c.push(d),d=ir();else c=e;if(c!==e){for(d=[],I=_r();I!==e;)d.push(I),I=_r();l=$r(m,c)}else he=l,l=e}return K--,l===e&&(m=e,K===0&&ye($)),l}function Or(){var l,m,o,c;return l=he,m=D(),m!==e?(o=Y(),o!==e?(c=ce(),c===e&&(c=null),l=Cr(m,o,c)):(he=l,l=e)):(he=l,l=e),l}function q(){var l,m,o;return l=he,m=D(),m!==e?(o=ce(),o!==e?l=me(m,o):(he=l,l=e)):(he=l,l=e),l}function D(){var l,m,o,c;return l=he,m=he,K++,n.length>he?(o=n.charAt(he),he++):(o=e,K===0&&ye(L)),K--,o!==e?(he=m,m=void 0):m=e,m!==e?(o=te(),c=H(),c===e&&(c=null),l=Dr(o,c)):(he=l,l=e),l}function H(){var l,m,o,c;if(l=he,m=ue(),m!==e){for(o=[],c=mr();c!==e;)o.push(c),c=mr();l=gr(m,o)}else he=l,l=e;return l}function te(){var l,m,o,c,d;for(K++,l=he,m=[],o=ht();o!==e;)m.push(o),o=ht();for(o=Ee(),o===e&&(o=null),c=[],d=ar(),d===e&&(d=er());d!==e;)c.push(d),d=ar(),d===e&&(d=er());return l=Ie(m,o,c),K--,m=e,K===0&&ye(R),l}function ce(){var l,m,o;for(K++,l=he,m=[],o=_r();o!==e;)m.push(o),o=_r();return o=yr(),o!==e?l=Er(o):(he=l,l=e),K--,l===e&&(m=e,K===0&&ye(A)),l}function ze(){var l,m,o;for(K++,l=he,m=[],o=_r();o!==e;)m.push(o),o=_r();return o=pr(),o!==e?l=Lr(o):(he=l,l=e),K--,l===e&&(m=e,K===0&&ye(E)),l}function br(){var l,m,o,c;if(l=he,m=Be(),m!==e){for(o=[],c=_r();c!==e;)o.push(c),c=_r();c=Rr(),c===e&&(c=null),l=Xr(m,c)}else he=l,l=e;return l}function ir(){var l,m,o;return K++,l=he,m=he,K++,o=br(),K--,o===e?m=void 0:(he=m,m=e),m!==e?(o=ar(),o!==e?l=kr(o):(he=l,l=e)):(he=l,l=e),K--,l===e&&(m=e,K===0&&ye(O)),l}function mr(){var l,m,o;return l=he,m=he,K++,o=Y(),o===e&&(o=ce(),o===e&&(o=pr())),K--,o===e?m=void 0:(he=m,m=e),m!==e?(n.length>he?(o=n.charAt(he),he++):(o=e,K===0&&ye(L)),o!==e?l=xe(o):(he=l,l=e)):(he=l,l=e),l}function ar(){var l,m,o;return K++,l=he,m=he,K++,o=Y(),o===e&&(o=ue(),o===e&&(o=er(),o===e&&(o=Ee(),o===e&&(o=ce(),o===e&&(o=pr()))))),K--,o===e?m=void 0:(he=m,m=e),m!==e?(n.length>he?(o=n.charAt(he),he++):(o=e,K===0&&ye(L)),o!==e?l=ve(o):(he=l,l=e)):(he=l,l=e),K--,l===e&&(m=e,K===0&&ye(Z)),l}function yr(){var l,m,o;return K++,l=he,n.length>he?(m=n.charAt(he),he++):(m=e,K===0&&ye(L)),m!==e?(o=X(m),o?o=void 0:o=e,o!==e?l=Fr(m):(he=l,l=e)):(he=l,l=e),K--,l===e&&(m=e,K===0&&ye($e)),l}function pr(){var l,m,o;return K++,l=he,n.length>he?(m=n.charAt(he),he++):(m=e,K===0&&ye(L)),m!==e?(o=Br(m),o?o=void 0:o=e,o!==e?l=nr(m):(he=l,l=e)):(he=l,l=e),K--,l===e&&(m=e,K===0&&ye(le)),l}function _r(){var l,m,o;return l=he,n.length>he?(m=n.charAt(he),he++):(m=e,K===0&&ye(L)),m!==e?(o=tr(m),o?o=void 0:o=e,o!==e?l=ie(m):(he=l,l=e)):(he=l,l=e),l}function Y(){var l,m,o;return K++,l=he,n.length>he?(m=n.charAt(he),he++):(m=e,K===0&&ye(L)),m!==e?(o=Ke(m),o?o=void 0:o=e,o!==e?l=Pr(m):(he=l,l=e)):(he=l,l=e),K--,l===e&&(m=e,K===0&&ye(M)),l}function ue(){var l,m,o;return K++,l=he,n.length>he?(m=n.charAt(he),he++):(m=e,K===0&&ye(L)),m!==e?(o=rt(m),o?o=void 0:o=e,o!==e?l=Zr(m):(he=l,l=e)):(he=l,l=e),K--,l===e&&(m=e,K===0&&ye(j)),l}function Be(){var l,m,o;return K++,l=he,n.length>he?(m=n.charAt(he),he++):(m=e,K===0&&ye(L)),m!==e?(o=wr(m),o?o=void 0:o=e,o!==e?l=it(m):(he=l,l=e)):(he=l,l=e),K--,l===e&&(m=e,K===0&&ye(Se)),l}function er(){var l,m,o,c,d;for(K++,l=he,m=[],o=_r();o!==e;)m.push(o),o=_r();if(n.length>he?(o=n.charAt(he),he++):(o=e,K===0&&ye(L)),o!==e){for(c=[],d=_r();d!==e;)c.push(d),d=_r();d=tt(o),d?d=void 0:d=e,d!==e?l=ne(o):(he=l,l=e)}else he=l,l=e;return K--,l===e&&(m=e,K===0&&ye(Ce)),l}function Ee(){var l,m,o;return K++,l=he,n.length>he?(m=n.charAt(he),he++):(m=e,K===0&&ye(L)),m!==e?(o=de(m),o?o=void 0:o=e,o!==e?l=be(m):(he=l,l=e)):(he=l,l=e),K--,l===e&&(m=e,K===0&&ye(ke)),l}function Rr(){var l,m,o;return l=he,n.length>he?(m=n.charAt(he),he++):(m=e,K===0&&ye(L)),m!==e?(o=Ze(m),o?o=void 0:o=e,o!==e?l=dr(m):(he=l,l=e)):(he=l,l=e),l}function cr(){var l,m;return l=he,K++,n.length>he?(m=n.charAt(he),he++):(m=e,K===0&&ye(L)),K--,m===e?l=void 0:(he=l,l=e),l}if(!a.isWhitespace)try{Object.assign(a,{isSep:l=>l.type==="string"&&l.content===",",isVar:l=>l.type==="string"&&l.content.match(/[a-zA-Z]/),isOperation:l=>l.type==="string"&&l.content.match(/[+-]/),isEquals:l=>l.type==="string"&&l.content==="=",isAt:l=>l.type==="string"&&l.content==="@",isSubscript:l=>l.content==="_",isWhitespace:l=>l.type==="whitespace",isSameLineComment:l=>l.type==="comment"&&l.sameline,isOwnLineComment:l=>l.type==="comment"&&!l.sameline})}catch(l){console.warn("Error when initializing parser",l)}if(W=v(),W!==e&&he===n.length)return W;throw W!==e&&he<n.length&&ye(se()),st(J,Qr<n.length?n.charAt(Qr):null,Qr<n.length?We(Qr,Qr+1):We(Qr,Qr))}return{SyntaxError:t,parse:i}})();(function(){function r(n,a){function e(){this.constructor=n}e.prototype=a.prototype,n.prototype=new e}function t(n,a,e,p){var b=Error.call(this,n);return Object.setPrototypeOf&&Object.setPrototypeOf(b,t.prototype),b.expected=a,b.found=e,b.location=p,b.name="SyntaxError",b}r(t,Error);function s(n,a,e){return e=e||" ",n.length>a?n:(a-=n.length,e+=e.repeat(a),n+e.slice(0,a))}t.prototype.format=function(n){var a="Error: "+this.message;if(this.location){var e=null,p;for(p=0;p<n.length;p++)if(n[p].source===this.location.source){e=n[p].text.split(/\r\n|\n|\r/g);break}var b=this.location.start,v=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(b):b,$=this.location.source+":"+v.line+":"+v.column;if(e){var L=this.location.end,R=s("",v.line.toString().length," "),A=e[b.line-1],E=b.line===L.line?L.column:A.length+1,O=E-b.column||1;a+=`
 --> `+$+`
`+R+` |
`+v.line+" | "+A+`
`+R+" | "+s("",b.column-1," ")+s("",O,"^")}else a+=`
 at `+$}return a},t.buildMessage=function(n,a){var e={literal:function(A){return'"'+b(A.text)+'"'},class:function(A){var E=A.parts.map(function(O){return Array.isArray(O)?v(O[0])+"-"+v(O[1]):v(O)});return"["+(A.inverted?"^":"")+E.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(A){return A.description}};function p(A){return A.charCodeAt(0).toString(16).toUpperCase()}function b(A){return A.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+p(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+p(E)})}function v(A){return A.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+p(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+p(E)})}function $(A){return e[A.type](A)}function L(A){var E=A.map($),O,Z;if(E.sort(),E.length>0){for(O=1,Z=1;O<E.length;O++)E[O-1]!==E[O]&&(E[Z]=E[O],Z++);E.length=Z}switch(E.length){case 1:return E[0];case 2:return E[0]+" or "+E[1];default:return E.slice(0,-1).join(", ")+", or "+E[E.length-1]}}function R(A){return A?'"'+b(A)+'"':"end of input"}return"Expected "+L(n)+" but "+R(a)+" found."};function i(n,a){a=a!==void 0?a:{};var e={},p=a.grammarSource,b={root:br},v=br,$="plus",L="minus",R="pt",A="mm",E="cm",O="in",Z="ex",$e="em",le="bp",M="pc",j="dd",Se="cc",Ce="nd",ke="nc",Pe="sp",g="filll",Qe="fill",$r="fil",Cr=".",me="+",Dr="-",gr=/^[0-9]/,Ie=Or(),Er=Mr("plus",!1),Lr=Mr("minus",!1),Xr=Mr("pt",!1),kr=Mr("mm",!1),xe=Mr("cm",!1),ve=Mr("in",!1),X=Mr("ex",!1),Fr=Mr("em",!1),Br=Mr("bp",!1),nr=Mr("pc",!1),tr=Mr("dd",!1),ie=Mr("cc",!1),Ke=Mr("nd",!1),Pr=Mr("nc",!1),rt=Mr("sp",!1),Zr=Mr("filll",!1),wr=Mr("fill",!1),it=Mr("fil",!1),tt=D("number"),ne=ht([["0","9"]],!1,!1),de=Mr(".",!1),be=Mr("+",!1),Ze=Mr("-",!1),dr=function(ue,Be,er){return{type:"glue",fixed:ue,stretchable:Be,shrinkable:er,position:st()}},he=function(ue){return ue},Jr=function(ue,Be){return{type:"dim",value:ue,unit:Be}},Qr=function(ue,Be){return{type:"dim",value:ue,unit:Be}},J=function(ue,Be){return{type:"dim",value:ue,unit:Be}},K=function(ue){return parseFloat(ue)},W=0,xr=0,se=[{line:1,column:1}],He=0,hr=[],We=0,ye;if("startRule"in a){if(!(a.startRule in b))throw new Error(`Can't start parsing from rule "`+a.startRule+'".');v=b[a.startRule]}function st(){return te(xr,W)}function Mr(ue,Be){return{type:"literal",text:ue,ignoreCase:Be}}function ht(ue,Be,er){return{type:"class",parts:ue,inverted:Be,ignoreCase:er}}function Or(){return{type:"any"}}function q(){return{type:"end"}}function D(ue){return{type:"other",description:ue}}function H(ue){var Be=se[ue],er;if(Be)return Be;for(er=ue-1;!se[er];)er--;for(Be=se[er],Be={line:Be.line,column:Be.column};er<ue;)n.charCodeAt(er)===10?(Be.line++,Be.column=1):Be.column++,er++;return se[ue]=Be,Be}function te(ue,Be,er){var Ee=H(ue),Rr=H(Be),cr={source:p,start:{offset:ue,line:Ee.line,column:Ee.column},end:{offset:Be,line:Rr.line,column:Rr.column}};return cr}function ce(ue){W<He||(W>He&&(He=W,hr=[]),hr.push(ue))}function ze(ue,Be,er){return new t(t.buildMessage(ue,Be),ue,Be,er)}function br(){var ue,Be,er,Ee,Rr;if(ue=W,Be=W,er=ir(),er!==e?(Ee=mr(),Ee===e&&(Ee=null),Rr=ar(),Rr===e&&(Rr=null),xr=Be,Be=dr(er,Ee,Rr)):(W=Be,Be=e),Be!==e){for(er=[],n.length>W?(Ee=n.charAt(W),W++):(Ee=e,We===0&&ce(Ie));Ee!==e;)er.push(Ee),n.length>W?(Ee=n.charAt(W),W++):(Ee=e,We===0&&ce(Ie));xr=ue,ue=he(Be)}else W=ue,ue=e;return ue}function ir(){var ue,Be,er;return ue=W,Be=_r(),Be!==e?(er=yr(),er!==e?(xr=ue,ue=Jr(Be,er)):(W=ue,ue=e)):(W=ue,ue=e),ue}function mr(){var ue,Be,er,Ee;return ue=W,n.substr(W,4)===$?(Be=$,W+=4):(Be=e,We===0&&ce(Er)),Be!==e?(er=_r(),er!==e?(Ee=pr(),Ee!==e?(xr=ue,ue=Qr(er,Ee)):(W=ue,ue=e)):(W=ue,ue=e)):(W=ue,ue=e),ue}function ar(){var ue,Be,er,Ee;return ue=W,n.substr(W,5)===L?(Be=L,W+=5):(Be=e,We===0&&ce(Lr)),Be!==e?(er=_r(),er!==e?(Ee=pr(),Ee!==e?(xr=ue,ue=J(er,Ee)):(W=ue,ue=e)):(W=ue,ue=e)):(W=ue,ue=e),ue}function yr(){var ue;return n.substr(W,2)===R?(ue=R,W+=2):(ue=e,We===0&&ce(Xr)),ue===e&&(n.substr(W,2)===A?(ue=A,W+=2):(ue=e,We===0&&ce(kr)),ue===e&&(n.substr(W,2)===E?(ue=E,W+=2):(ue=e,We===0&&ce(xe)),ue===e&&(n.substr(W,2)===O?(ue=O,W+=2):(ue=e,We===0&&ce(ve)),ue===e&&(n.substr(W,2)===Z?(ue=Z,W+=2):(ue=e,We===0&&ce(X)),ue===e&&(n.substr(W,2)===$e?(ue=$e,W+=2):(ue=e,We===0&&ce(Fr)),ue===e&&(n.substr(W,2)===le?(ue=le,W+=2):(ue=e,We===0&&ce(Br)),ue===e&&(n.substr(W,2)===M?(ue=M,W+=2):(ue=e,We===0&&ce(nr)),ue===e&&(n.substr(W,2)===j?(ue=j,W+=2):(ue=e,We===0&&ce(tr)),ue===e&&(n.substr(W,2)===Se?(ue=Se,W+=2):(ue=e,We===0&&ce(ie)),ue===e&&(n.substr(W,2)===Ce?(ue=Ce,W+=2):(ue=e,We===0&&ce(Ke)),ue===e&&(n.substr(W,2)===ke?(ue=ke,W+=2):(ue=e,We===0&&ce(Pr)),ue===e&&(n.substr(W,2)===Pe?(ue=Pe,W+=2):(ue=e,We===0&&ce(rt)))))))))))))),ue}function pr(){var ue;return ue=yr(),ue===e&&(n.substr(W,5)===g?(ue=g,W+=5):(ue=e,We===0&&ce(Zr)),ue===e&&(n.substr(W,4)===Qe?(ue=Qe,W+=4):(ue=e,We===0&&ce(wr)),ue===e&&(n.substr(W,3)===$r?(ue=$r,W+=3):(ue=e,We===0&&ce(it))))),ue}function _r(){var ue,Be,er,Ee,Rr,cr,l,m,o;for(We++,ue=W,Be=W,er=W,Ee=Y(),Ee===e&&(Ee=null),Rr=W,cr=[],gr.test(n.charAt(W))?(l=n.charAt(W),W++):(l=e,We===0&&ce(ne));l!==e;)cr.push(l),gr.test(n.charAt(W))?(l=n.charAt(W),W++):(l=e,We===0&&ce(ne));if(n.charCodeAt(W)===46?(l=Cr,W++):(l=e,We===0&&ce(de)),l!==e){if(m=[],gr.test(n.charAt(W))?(o=n.charAt(W),W++):(o=e,We===0&&ce(ne)),o!==e)for(;o!==e;)m.push(o),gr.test(n.charAt(W))?(o=n.charAt(W),W++):(o=e,We===0&&ce(ne));else m=e;m!==e?(cr=[cr,l,m],Rr=cr):(W=Rr,Rr=e)}else W=Rr,Rr=e;if(Rr===e)if(Rr=[],gr.test(n.charAt(W))?(cr=n.charAt(W),W++):(cr=e,We===0&&ce(ne)),cr!==e)for(;cr!==e;)Rr.push(cr),gr.test(n.charAt(W))?(cr=n.charAt(W),W++):(cr=e,We===0&&ce(ne));else Rr=e;return Rr!==e?(Ee=[Ee,Rr],er=Ee):(W=er,er=e),er!==e?Be=n.substring(Be,W):Be=er,Be!==e&&(xr=ue,Be=K(Be)),ue=Be,We--,ue===e&&(Be=e,We===0&&ce(tt)),ue}function Y(){var ue;return n.charCodeAt(W)===43?(ue=me,W++):(ue=e,We===0&&ce(be)),ue===e&&(n.charCodeAt(W)===45?(ue=Dr,W++):(ue=e,We===0&&ce(Ze))),ue}if(ye=v(),ye!==e&&W===n.length)return ye;throw ye!==e&&W<n.length&&ce(q()),ze(hr,He<n.length?n.charAt(He):null,He<n.length?te(He,He+1):te(He,He))}return{SyntaxError:t,parse:i}})();(function(){function r(n,a){function e(){this.constructor=n}e.prototype=a.prototype,n.prototype=new e}function t(n,a,e,p){var b=Error.call(this,n);return Object.setPrototypeOf&&Object.setPrototypeOf(b,t.prototype),b.expected=a,b.found=e,b.location=p,b.name="SyntaxError",b}r(t,Error);function s(n,a,e){return e=e||" ",n.length>a?n:(a-=n.length,e+=e.repeat(a),n+e.slice(0,a))}t.prototype.format=function(n){var a="Error: "+this.message;if(this.location){var e=null,p;for(p=0;p<n.length;p++)if(n[p].source===this.location.source){e=n[p].text.split(/\r\n|\n|\r/g);break}var b=this.location.start,v=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(b):b,$=this.location.source+":"+v.line+":"+v.column;if(e){var L=this.location.end,R=s("",v.line.toString().length," "),A=e[b.line-1],E=b.line===L.line?L.column:A.length+1,O=E-b.column||1;a+=`
 --> `+$+`
`+R+` |
`+v.line+" | "+A+`
`+R+" | "+s("",b.column-1," ")+s("",O,"^")}else a+=`
 at `+$}return a},t.buildMessage=function(n,a){var e={literal:function(A){return'"'+b(A.text)+'"'},class:function(A){var E=A.parts.map(function(O){return Array.isArray(O)?v(O[0])+"-"+v(O[1]):v(O)});return"["+(A.inverted?"^":"")+E.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(A){return A.description}};function p(A){return A.charCodeAt(0).toString(16).toUpperCase()}function b(A){return A.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+p(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+p(E)})}function v(A){return A.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+p(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+p(E)})}function $(A){return e[A.type](A)}function L(A){var E=A.map($),O,Z;if(E.sort(),E.length>0){for(O=1,Z=1;O<E.length;O++)E[O-1]!==E[O]&&(E[Z]=E[O],Z++);E.length=Z}switch(E.length){case 1:return E[0];case 2:return E[0]+" or "+E[1];default:return E.slice(0,-1).join(", ")+", or "+E[E.length-1]}}function R(A){return A?'"'+b(A)+'"':"end of input"}return"Expected "+L(n)+" but "+R(a)+" found."};function i(n,a){a=a!==void 0?a:{};var e={},p=a.grammarSource,b={path_spec:Y,foreach_body:er},v=Y,$=br(),L=mr("comment"),R=mr("floating comment"),A=mr("operation"),E=mr("="),O=function(k){return k},Z=function(k){return{type:"path_spec",content:k}},$e=function(k,Q,U){return{op:Q,comment:U}},le=function(k,Q,U,Fe){const we=[k,...Q.map(_=>_.comment),U].filter(_=>_),Le=Q.map(_=>_.op.content.content).join(" ");return{type:"animation",comments:we,attribute:Le,content:Fe.content}},M=function(k,Q){return{...Q,start:k,type:"foreach"}},j=function(k,Q,U,Fe,we,Le,_,V){const ge=[k,Fe,we,_].filter(Me=>Me);return{type:"foreach_body",variables:Q,options:U&&U.content,list:Le,command:V,comments:ge}},Se=function(k,Q,U,Fe){const we=[k,U].filter(Le=>Le);return{type:"svg_operation",options:Q&&Q.content,content:Fe,comments:we}},Ce=function(k,Q,U,Fe,we,Le){return{coord:Le,comment:we}},ke=function(k,Q,U,Fe,we,Le){const _=[k,Q,Fe,we&&we.comment,Le].filter(V=>V);return{type:"curve_to",controls:we?[U,we.coord]:[U],comments:_}},Pe=function(){return{type:"line_to",command:"|-"}},g=function(){return{type:"line_to",command:"-|"}},Qe=function(){return{type:"line_to",command:"--"}},$r=function(k,Q){return{type:"coordinate",content:Q,prefix:k}},Cr=function(k){return{type:"square_brace_group",content:k}},me=function(k){return{type:"unknown",content:k}},Dr=function(k){return a.isComment(k)},gr=function(k){return k},Ie=function(k){return a.isWhitespace(k)},Er=function(k){return k},Lr=function(k){return k},Xr=function(k){return a.isOperation(k)},kr=function(k){return{type:"operation",content:k}},xe=function(k){return a.isChar(k,"=")},ve=function(k){return k},X=function(k){return a.isChar(k,"[")},Fr=function(k){return k},Br=function(k){return a.isChar(k,"]")},nr=function(k){return k},tr=function(k){return a.isChar(k,"(")},ie=function(k){return k},Ke=function(k){return a.isChar(k,")")},Pr=function(k){return k},rt=function(k){return a.isChar(k,"+")},Zr=function(k){return k},wr=function(k){return a.isChar(k,"-")},it=function(k){return k},tt=function(k){return a.isChar(k,"|")},ne=function(k){return k},de=function(k){return a.isChar(k,".")},be=function(k){return k},Ze=function(k){return a.isChar(k,"controls")},dr=function(k){return k},he=function(k){return a.isChar(k,"and")},Jr=function(k){return k},Qr=function(k){return a.isChar(k,"svg")},J=function(k){return k},K=function(k){return a.isGroup(k)},W=function(k){return k},xr=function(k){return a.isAnyMacro(k)},se=function(k){return k},He=function(k){return a.isChar(k,"foreach")},hr=function(k){return k},We=function(k){return a.isMacro(k,"foreach")},ye=function(k){return k},st=function(k){return a.isChar(k,"in")},Mr=function(k){return k},ht=function(k){return a.isChar(k,":")},Or=function(k){return k},q=0,D=[{line:1,column:1}],H=0,te=[],ce=0,ze;if("startRule"in a){if(!(a.startRule in b))throw new Error(`Can't start parsing from rule "`+a.startRule+'".');v=b[a.startRule]}function br(){return{type:"any"}}function ir(){return{type:"end"}}function mr(k){return{type:"other",description:k}}function ar(k){var Q=D[k],U;if(Q)return Q;for(U=k-1;!D[U];)U--;for(Q=D[U],Q={line:Q.line,column:Q.column};U<k;)n.charCodeAt(U)===10?(Q.line++,Q.column=1):Q.column++,U++;return D[k]=Q,Q}function yr(k,Q,U){var Fe=ar(k),we=ar(Q),Le={source:p,start:{offset:k,line:Fe.line,column:Fe.column},end:{offset:Q,line:we.line,column:we.column}};return Le}function pr(k){q<H||(q>H&&(H=q,te=[]),te.push(k))}function _r(k,Q,U){return new t(t.buildMessage(k,Q),k,Q,U)}function Y(){var k,Q,U,Fe,we,Le;if(k=q,Q=[],U=q,Fe=m(),Fe===e&&(Fe=l(),Fe===e&&(Fe=Rr(),Fe===e&&(Fe=cr(),Fe===e&&(Fe=Ee(),Fe===e&&(Fe=Be(),Fe===e&&(Fe=y(),Fe===e&&(Fe=d(),Fe===e&&(Fe=ue(),Fe===e&&(Fe=c()))))))))),Fe!==e){for(we=[],Le=I();Le!==e;)we.push(Le),Le=I();U=O(Fe)}else q=U,U=e;if(U!==e)for(;U!==e;)if(Q.push(U),U=q,Fe=m(),Fe===e&&(Fe=l(),Fe===e&&(Fe=Rr(),Fe===e&&(Fe=cr(),Fe===e&&(Fe=Ee(),Fe===e&&(Fe=Be(),Fe===e&&(Fe=y(),Fe===e&&(Fe=d(),Fe===e&&(Fe=ue(),Fe===e&&(Fe=c()))))))))),Fe!==e){for(we=[],Le=I();Le!==e;)we.push(Le),Le=I();U=O(Fe)}else q=U,U=e;else Q=e;return Q!==e&&(Q=Z(Q)),k=Q,k}function ue(){var k,Q,U,Fe,we,Le,_;if(k=q,Q=Rt(),Q!==e){if(U=N(),Fe=[],we=q,Le=y(),Le!==e?(_=N(),we=$e(U,Le,_)):(q=we,we=e),we!==e)for(;we!==e;)Fe.push(we),we=q,Le=y(),Le!==e?(_=N(),we=$e(U,Le,_)):(q=we,we=e);else Fe=e;Fe!==e?(we=u(),we!==e?(Le=N(),_=Nr(),_!==e?k=le(U,Fe,Le,_):(q=k,k=e)):(q=k,k=e)):(q=k,k=e)}else q=k,k=e;return k}function Be(){var k,Q,U;return k=q,Q=St(),Q===e&&(Q=Tr()),Q!==e?(U=er(),U!==e?k=M(Q,U):(q=k,k=e)):(q=k,k=e),k}function er(){var k,Q,U,Fe,we,Le,_,V,ge,Me;for(k=q,Q=N(),U=q,Fe=[],we=q,Le=q,ce++,_=vt(),_===e&&(_=m()),ce--,_===e?Le=void 0:(q=Le,Le=e),Le!==e?(n.length>q?(_=n.charAt(q),q++):(_=e,ce===0&&pr($)),_!==e?(Le=[Le,_],we=Le):(q=we,we=e)):(q=we,we=e);we!==e;)Fe.push(we),we=q,Le=q,ce++,_=vt(),_===e&&(_=m()),ce--,_===e?Le=void 0:(q=Le,Le=e),Le!==e?(n.length>q?(_=n.charAt(q),q++):(_=e,ce===0&&pr($)),_!==e?(Le=[Le,_],we=Le):(q=we,we=e)):(q=we,we=e);return U=n.substring(U,q),Fe=m(),Fe===e&&(Fe=null),we=N(),Le=vt(),Le!==e?(_=N(),V=Nr(),V===e&&(V=Te()),V!==e?(ge=N(),Me=Be(),Me===e&&(Me=Nr(),Me===e&&(Me=Te())),Me!==e?k=j(Q,U,Fe,we,_,V,ge,Me):(q=k,k=e)):(q=k,k=e)):(q=k,k=e),k}function Ee(){var k,Q,U,Fe,we,Le;return k=q,Q=Ur(),Q!==e?(U=N(),Fe=m(),Fe===e&&(Fe=null),we=N(),Le=Nr(),Le!==e?k=Se(U,Fe,we,Le):(q=k,k=e)):(q=k,k=e),k}function Rr(){var k,Q,U,Fe,we,Le,_,V,ge,Me,Ve;return k=q,Q=o(),Q!==e?(U=N(),Fe=Kr(),Fe!==e?(we=N(),Le=l(),Le!==e?(_=N(),V=q,ge=ur(),ge!==e?(Me=N(),Ve=l(),Ve!==e?V=Ce(U,we,Le,_,Me,Ve):(q=V,V=e)):(q=V,V=e),V===e&&(V=null),ge=N(),Me=o(),Me!==e?k=ke(U,we,Le,_,V,ge):(q=k,k=e)):(q=k,k=e)):(q=k,k=e)):(q=k,k=e),k}function cr(){var k,Q,U;return k=q,Q=jr(),Q!==e?(U=Xe(),U!==e?k=Pe():(q=k,k=e)):(q=k,k=e),k===e&&(k=q,Q=Xe(),Q!==e?(U=jr(),U!==e?k=g():(q=k,k=e)):(q=k,k=e),k===e&&(k=q,Q=Xe(),Q!==e?(U=Xe(),U!==e?k=Qe():(q=k,k=e)):(q=k,k=e))),k}function l(){var k,Q,U,Fe,we,Le,_,V;if(k=q,Q=q,U=q,Fe=Ye(),Fe!==e?(we=Ye(),we===e&&(we=null),Fe=[Fe,we],U=Fe):(q=U,U=e),U===e&&(U=null),Q=n.substring(Q,q),U=_e(),U!==e){for(Fe=q,we=[],Le=q,_=q,ce++,V=ee(),ce--,V===e?_=void 0:(q=_,_=e),_!==e?(n.length>q?(V=n.charAt(q),q++):(V=e,ce===0&&pr($)),V!==e?(_=[_,V],Le=_):(q=Le,Le=e)):(q=Le,Le=e);Le!==e;)we.push(Le),Le=q,_=q,ce++,V=ee(),ce--,V===e?_=void 0:(q=_,_=e),_!==e?(n.length>q?(V=n.charAt(q),q++):(V=e,ce===0&&pr($)),V!==e?(_=[_,V],Le=_):(q=Le,Le=e)):(q=Le,Le=e);Fe=n.substring(Fe,q),we=ee(),we!==e?k=$r(Q,Fe):(q=k,k=e)}else q=k,k=e;return k}function m(){var k,Q,U,Fe,we,Le,_;if(k=q,Q=F(),Q!==e){for(U=q,Fe=[],we=q,Le=q,ce++,_=fe(),ce--,_===e?Le=void 0:(q=Le,Le=e),Le!==e?(n.length>q?(_=n.charAt(q),q++):(_=e,ce===0&&pr($)),_!==e?(Le=[Le,_],we=Le):(q=we,we=e)):(q=we,we=e);we!==e;)Fe.push(we),we=q,Le=q,ce++,_=fe(),ce--,_===e?Le=void 0:(q=Le,Le=e),Le!==e?(n.length>q?(_=n.charAt(q),q++):(_=e,ce===0&&pr($)),_!==e?(Le=[Le,_],we=Le):(q=we,we=e)):(q=we,we=e);U=n.substring(U,q),Fe=fe(),Fe!==e?k=Cr(U):(q=k,k=e)}else q=k,k=e;return k}function o(){var k,Q,U;return k=q,Q=at(),Q!==e?(U=at(),U!==e?(Q=[Q,U],k=Q):(q=k,k=e)):(q=k,k=e),k}function c(){var k,Q;return k=q,n.length>q?(Q=n.charAt(q),q++):(Q=e,ce===0&&pr($)),Q!==e&&(Q=me(Q)),k=Q,k}function d(){var k,Q,U;return ce++,k=q,n.length>q?(Q=n.charAt(q),q++):(Q=e,ce===0&&pr($)),Q!==e?(U=Dr(Q),U?U=void 0:U=e,U!==e?k=gr(Q):(q=k,k=e)):(q=k,k=e),ce--,k===e&&(Q=e,ce===0&&pr(L)),k}function I(){var k,Q,U;return k=q,n.length>q?(Q=n.charAt(q),q++):(Q=e,ce===0&&pr($)),Q!==e?(U=Ie(Q),U?U=void 0:U=e,U!==e?k=Er(Q):(q=k,k=e)):(q=k,k=e),k}function N(){var k,Q,U,Fe,we;for(ce++,k=q,Q=[],U=I();U!==e;)Q.push(U),U=I();for(U=d(),U===e&&(U=null),Fe=[],we=I();we!==e;)Fe.push(we),we=I();return k=Lr(U),ce--,Q=e,ce===0&&pr(R),k}function y(){var k,Q,U;return ce++,k=q,n.length>q?(Q=n.charAt(q),q++):(Q=e,ce===0&&pr($)),Q!==e?(U=Xr(Q),U?U=void 0:U=e,U!==e?k=kr(Q):(q=k,k=e)):(q=k,k=e),ce--,k===e&&(Q=e,ce===0&&pr(A)),k}function u(){var k,Q,U;return ce++,k=q,n.length>q?(Q=n.charAt(q),q++):(Q=e,ce===0&&pr($)),Q!==e?(U=xe(Q),U?U=void 0:U=e,U!==e?k=ve(Q):(q=k,k=e)):(q=k,k=e),ce--,k===e&&(Q=e,ce===0&&pr(E)),k}function F(){var k,Q,U;return k=q,n.length>q?(Q=n.charAt(q),q++):(Q=e,ce===0&&pr($)),Q!==e?(U=X(Q),U?U=void 0:U=e,U!==e?k=Fr(Q):(q=k,k=e)):(q=k,k=e),k}function fe(){var k,Q,U;return k=q,n.length>q?(Q=n.charAt(q),q++):(Q=e,ce===0&&pr($)),Q!==e?(U=Br(Q),U?U=void 0:U=e,U!==e?k=nr(Q):(q=k,k=e)):(q=k,k=e),k}function _e(){var k,Q,U;return k=q,n.length>q?(Q=n.charAt(q),q++):(Q=e,ce===0&&pr($)),Q!==e?(U=tr(Q),U?U=void 0:U=e,U!==e?k=ie(Q):(q=k,k=e)):(q=k,k=e),k}function ee(){var k,Q,U;return k=q,n.length>q?(Q=n.charAt(q),q++):(Q=e,ce===0&&pr($)),Q!==e?(U=Ke(Q),U?U=void 0:U=e,U!==e?k=Pr(Q):(q=k,k=e)):(q=k,k=e),k}function Ye(){var k,Q,U;return k=q,n.length>q?(Q=n.charAt(q),q++):(Q=e,ce===0&&pr($)),Q!==e?(U=rt(Q),U?U=void 0:U=e,U!==e?k=Zr(Q):(q=k,k=e)):(q=k,k=e),k}function Xe(){var k,Q,U;return k=q,n.length>q?(Q=n.charAt(q),q++):(Q=e,ce===0&&pr($)),Q!==e?(U=wr(Q),U?U=void 0:U=e,U!==e?k=it(Q):(q=k,k=e)):(q=k,k=e),k}function jr(){var k,Q,U;return k=q,n.length>q?(Q=n.charAt(q),q++):(Q=e,ce===0&&pr($)),Q!==e?(U=tt(Q),U?U=void 0:U=e,U!==e?k=ne(Q):(q=k,k=e)):(q=k,k=e),k}function at(){var k,Q,U;return k=q,n.length>q?(Q=n.charAt(q),q++):(Q=e,ce===0&&pr($)),Q!==e?(U=de(Q),U?U=void 0:U=e,U!==e?k=be(Q):(q=k,k=e)):(q=k,k=e),k}function Kr(){var k,Q,U;return k=q,n.length>q?(Q=n.charAt(q),q++):(Q=e,ce===0&&pr($)),Q!==e?(U=Ze(Q),U?U=void 0:U=e,U!==e?k=dr(Q):(q=k,k=e)):(q=k,k=e),k}function ur(){var k,Q,U;return k=q,n.length>q?(Q=n.charAt(q),q++):(Q=e,ce===0&&pr($)),Q!==e?(U=he(Q),U?U=void 0:U=e,U!==e?k=Jr(Q):(q=k,k=e)):(q=k,k=e),k}function Ur(){var k,Q,U;return k=q,n.length>q?(Q=n.charAt(q),q++):(Q=e,ce===0&&pr($)),Q!==e?(U=Qr(Q),U?U=void 0:U=e,U!==e?k=J(Q):(q=k,k=e)):(q=k,k=e),k}function Nr(){var k,Q,U;return k=q,n.length>q?(Q=n.charAt(q),q++):(Q=e,ce===0&&pr($)),Q!==e?(U=K(Q),U?U=void 0:U=e,U!==e?k=W(Q):(q=k,k=e)):(q=k,k=e),k}function Te(){var k,Q,U;return k=q,n.length>q?(Q=n.charAt(q),q++):(Q=e,ce===0&&pr($)),Q!==e?(U=xr(Q),U?U=void 0:U=e,U!==e?k=se(Q):(q=k,k=e)):(q=k,k=e),k}function St(){var k,Q,U;return k=q,n.length>q?(Q=n.charAt(q),q++):(Q=e,ce===0&&pr($)),Q!==e?(U=He(Q),U?U=void 0:U=e,U!==e?k=hr(Q):(q=k,k=e)):(q=k,k=e),k}function Tr(){var k,Q,U;return k=q,n.length>q?(Q=n.charAt(q),q++):(Q=e,ce===0&&pr($)),Q!==e?(U=We(Q),U?U=void 0:U=e,U!==e?k=ye(Q):(q=k,k=e)):(q=k,k=e),k}function vt(){var k,Q,U;return k=q,n.length>q?(Q=n.charAt(q),q++):(Q=e,ce===0&&pr($)),Q!==e?(U=st(Q),U?U=void 0:U=e,U!==e?k=Mr(Q):(q=k,k=e)):(q=k,k=e),k}function Rt(){var k,Q,U;return k=q,n.length>q?(Q=n.charAt(q),q++):(Q=e,ce===0&&pr($)),Q!==e?(U=ht(Q),U?U=void 0:U=e,U!==e?k=Or(Q):(q=k,k=e)):(q=k,k=e),k}if(!a.isWhitespace)try{Object.assign(a,{isChar:(k,Q)=>k.type==="string"&&k.content===Q,isOperation:k=>k.type==="string"&&k.content.match(/[a-zA-Z]/),isWhitespace:k=>k.type==="whitespace"||k.type==="parbreak",isSameLineComment:k=>k.type==="comment"&&k.sameline,isOwnLineComment:k=>k.type==="comment"&&!k.sameline,isComment:k=>k.type==="comment",isGroup:k=>k.type==="group",isMacro:(k,Q)=>k.type==="macro"&&k.content===Q,isAnyMacro:k=>k.type==="macro"})}catch(k){console.warn("Error when initializing parser",k)}if(ze=v(),ze!==e&&q===n.length)return ze;throw ze!==e&&q<n.length&&pr(ir()),_r(te,H<n.length?n.charAt(H):null,H<n.length?yr(H,H+1):yr(H,H))}return{SyntaxError:t,parse:i}})();const Bo=oc,uc=lc,bs={};function En(r=""){return bs[r]=bs[r]||uc.parse(r),bs[r]}var lo={exports:{}},Ts={exports:{}},Ps={exports:{}},qs={exports:{}};(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={END_WORD:"$",END_WORD_REPLACER:"9a219a89-91cd-42e2-abd5-eb113af08ca8",PERMS_MIN_LEN:2},r.exports=t.default})(qs,qs.exports);var hi=qs.exports;(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var s=hi,i=n(s);function n(e){return e&&e.__esModule?e:{default:e}}function a(e,p,b,v){var $=p===i.default.END_WORD,L=b===v.length-1;return $&&!L?(e[i.default.END_WORD]=1,e[i.default.END_WORD_REPLACER]={},e=e[i.default.END_WORD_REPLACER]):(e[p]=e[p]||{},e=e[p]),L&&(e[i.default.END_WORD]=1),e}r.exports=t.default})(Ps,Ps.exports);var To=Ps.exports;(function(r,t){Object.defineProperty(t,"__esModule",{value:!0});var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p};t.default=e;var i=To,n=a(i);function a(p){return p&&p.__esModule?p:{default:p}}function e(p){if(!Array.isArray(p))throw"Expected parameter Array, received "+(typeof p>"u"?"undefined":s(p));var b=p.reduce(function(v,$){return $.toLowerCase().split("").reduce(n.default,v),v},{});return b}r.exports=t.default})(Ts,Ts.exports);var cc=Ts.exports,js={exports:{}},Ns={exports:{}};(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={objectCopy:function(i){return typeof i>"u"?{}:JSON.parse(JSON.stringify(i))},stringify:function(i){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return typeof i>"u"?"":JSON.stringify(i,null,n)}},r.exports=t.default})(Ns,Ns.exports);var Po=Ns.exports;(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var s=Po;i(s);function i(a){return a&&a.__esModule?a:{default:a}}function n(a,e){var p=e.toLowerCase().split(""),b=p.every(function(v,$){return a[v]?a=a[v]:!1});return{prefixFound:b,prefixNode:a}}r.exports=t.default})(js,js.exports);var fc=js.exports,Gs={exports:{}};(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=e;var s=hi,i=n(s);function n(p){return p&&p.__esModule?p:{default:p}}var a=function(b,v){for(var $=0;$<v.length&&!(b<v[$]);)$+=1;return v.splice($,0,b),v};function e(p,b,v){var $=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],L=b;for(var R in p){var A=R;R===i.default.END_WORD&&typeof p[R]=="number"?(v?a(L,$):$.push(L),L=""):R===i.default.END_WORD_REPLACER&&(A=i.default.END_WORD),e(p[R],b+A,v,$)}return $}r.exports=t.default})(Gs,Gs.exports);var hc=Gs.exports,Hs={exports:{}};(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var s=hi,i=n(s);function n(e){return e&&e.__esModule?e:{default:e}}function a(e,p){var b=p,v=Object.keys(e),$=v[Math.floor(Math.random()*v.length)];return $===i.default.END_WORD?b:a(e[$],p+$)}r.exports=t.default})(Hs,Hs.exports);var pc=Hs.exports,zs={exports:{}};(function(r,t){Object.defineProperty(t,"__esModule",{value:!0});var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p};t.default=e;var i=hi,n=a(i);function a(p){return p&&p.__esModule?p:{default:p}}function e(p,b){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{type:"anagram"};if(typeof p!="string")throw"Permutations expects string letters, received "+(typeof p>"u"?"undefined":s(p));var $=[],L=function R(A,E){var O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",Z=A.length===0,$e=$.indexOf(O)!==-1,le=E[n.default.END_WORD]===1;Z&&le&&!$e&&$.push(O);for(var M=0,j=A.length;M<j;M++){var Se=A[M];if(v.type==="sub-anagram"&&le&&$.indexOf(O)===-1&&$.push(O),E[Se]){var Ce=A.substring(0,M)+A.substring(M+1,j);R(Ce,E[Se],O+Se,$)}}return $.sort()};return L(p,b)}r.exports=t.default})(zs,zs.exports);var gc=zs.exports;(function(r,t){Object.defineProperty(t,"__esModule",{value:!0});var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ce){return typeof Ce}:function(Ce){return Ce&&typeof Symbol=="function"&&Ce.constructor===Symbol&&Ce!==Symbol.prototype?"symbol":typeof Ce};t.default=function(Ce){if(!Array.isArray(Ce))throw"Expected parameter Array, received "+(typeof Ce>"u"?"undefined":s(Ce));var ke=(0,n.default)([].concat(j(Ce)));return{tree:function(){return ke},dump:function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return E.default.stringify(ke,g)},addWord:function(g){if(typeof g!="string"||g==="")throw"Expected parameter string, received "+(typeof g>"u"?"undefined":s(g));var Qe=function(){return e.default.apply(void 0,arguments)},$r=g.toLowerCase().split("");return $r.reduce(Qe,ke),this},removeWord:function(g){if(typeof g!="string"||g==="")throw"Expected parameter string, received "+(typeof g>"u"?"undefined":s(g));var Qe=(0,b.default)(ke,g),$r=Qe.prefixFound,Cr=Qe.prefixNode;return $r&&delete Cr[Z.default.END_WORD],this},isPrefix:function(g){if(typeof g!="string")throw"Expected string prefix, received "+(typeof g>"u"?"undefined":s(g));var Qe=(0,b.default)(ke,g),$r=Qe.prefixFound;return $r},getPrefix:function(g){var Qe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(typeof g!="string")throw"Expected string prefix, received "+(typeof g>"u"?"undefined":s(g));if(typeof Qe!="boolean")throw"Expected sort parameter as boolean, received "+(typeof Qe>"u"?"undefined":s(Qe));if(!this.isPrefix(g))return[];var $r=g.length?(0,b.default)(ke,g).prefixNode:ke;return(0,$.default)($r,g,Qe)},getRandomWordWithPrefix:function(g){if(typeof g!="string")throw"Expected string prefix, received "+(typeof g>"u"?"undefined":s(g));if(!this.isPrefix(g))return"";var Qe=(0,b.default)(ke,g),$r=Qe.prefixNode;return(0,R.default)($r,g)},countPrefix:function(g){var Qe=this.getPrefix(g);return Qe.length},getWords:function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this.getPrefix("",g)},hasWord:function(g){if(typeof g!="string")throw"Expected string word, received "+(typeof g>"u"?"undefined":s(g));var Qe=(0,b.default)(ke,g),$r=Qe.prefixFound,Cr=Qe.prefixNode;return $r?Cr[Z.default.END_WORD]===1:!1},getAnagrams:function(g){if(typeof g!="string")throw"Anagrams expected string letters, received "+(typeof g>"u"?"undefined":s(g));if(g.length<Se)throw"getAnagrams expects at least "+Se+" letters";return(0,le.default)(g,ke,{type:"anagram"})},getSubAnagrams:function(g){if(typeof g!="string")throw"Expected string letters, received "+(typeof g>"u"?"undefined":s(g));if(g.length<Se)throw"getSubAnagrams expects at least "+Se+" letters";return(0,le.default)(g,ke,{type:"sub-anagram"})}}};var i=cc,n=M(i),a=To,e=M(a),p=fc,b=M(p),v=hc,$=M(v),L=pc,R=M(L),A=Po,E=M(A),O=hi,Z=M(O),$e=gc,le=M($e);function M(Ce){return Ce&&Ce.__esModule?Ce:{default:Ce}}function j(Ce){if(Array.isArray(Ce)){for(var ke=0,Pe=Array(Ce.length);ke<Ce.length;ke++)Pe[ke]=Ce[ke];return Pe}else return Array.from(Ce)}var Se=Z.default.PERMS_MIN_LEN;r.exports=t.default})(lo,lo.exports);function Bi(r,t,s){const{startIndex:i,onlySkipWhitespaceAndComments:n,allowSubstringMatches:a}=s||{};typeof t=="string"&&(t={type:"string",content:t});for(let e=i||0;e<r.length;e++){const p=r[e];if(p.type===t.type)switch(p.type){case"comment":case"displaymath":case"inlinemath":case"root":case"parbreak":case"whitespace":case"verb":case"verbatim":case"group":return e;case"macro":if(p.content===t.content)return e;break;case"environment":case"mathenv":if(hn(p.env)===hn(t.env))return e;break;case"string":if(p.content===t.content||a&&p.content.indexOf(t.content)>=0)return e;break}if(n&&!Ue.whitespace(p)&&!Ue.comment(p))return null}return null}function en(r,t,s=0){if(typeof t=="string"||!t.type)throw new Error(`argSpec must be an already-parsed argument specification, not "${JSON.stringify(t)}"`);let i=null,n=s;const a=t.noLeadingWhitespace?()=>{}:()=>{for(;n<r.length&&Ue.whitespace(r[n]);)n++},e=t.openBrace||"",p=t.closeBrace||"",b=(t.type==="mandatory"||t.type==="optional")&&e==="{"&&p==="}";a();const v=r[n];if(v==null||Ue.comment(v)||Ue.parbreak(v))return{argument:i,nodesRemoved:0};switch(t.type){case"mandatory":if(b){let R=[v];Ue.group(v)&&(R=v.content),i=Mt(R,{openMark:e,closeMark:p}),n++;break}else{const R=Kn(r,n,e,p);if(R){i=Mt(r.slice(R[0]+1,R[1]),{openMark:e,closeMark:p}),n=R[1]+1;break}}case"optional":if(b&&Ue.group(v)){i=Mt(v.content,{openMark:e,closeMark:p}),n++;break}const L=Kn(r,n,e,p);if(L){i=Mt(r.slice(L[0]+1,L[1]),{openMark:e,closeMark:p}),n=L[1]+1;break}break;case"optionalStar":case"optionalToken":{const R=Kn(r,n,t.type==="optionalStar"?"*":t.token);R&&(i=Mt(v,{openMark:"",closeMark:""}),n=R[0]+1);break}case"until":{if(t.stopTokens.length>1){console.warn('"until" matches with multi-token stop conditions are not yet implemented');break}const R=t.stopTokens[0];let E=Kn(r,s,void 0,R===" "?{type:"whitespace"}:R);if(!E)break;i=Mt(r.slice(s,E[1]),{openMark:"",closeMark:R}),n=E[1],n<r.length&&n++;break}case"embellishment":{for(const R of t.embellishmentTokens){const A=Kn(r,n,R);if(!A)continue;let E=r[A[0]+1];i=Mt(Ue.group(E)?E.content:E,{openMark:R,closeMark:""}),n=A[1]+1;break}break}default:console.warn(`Don't know how to find an argument of argspec type "${t.type}"`)}const $=i?n-s:0;return r.splice(s,$),{argument:i,nodesRemoved:$}}function Ci(r,t){return Object.assign({},r,{content:t})}function Kn(r,t,s,i){const n=r[t];let a=t,e=t;if(s){if(!Ue.anyString(n)||!n.content.startsWith(s))return;if(a=t,n.content.length>s.length){const v=n.content;n.content=s,r.splice(a+1,0,Ci(n,v.slice(s.length)))}e=a+1}if(!i){const b=r[e];if(!b)return;if(Ue.anyString(b)&&b.content.length>1){const v=b.content;b.content=v[0],r.splice(e+1,0,Ci(b,v.slice(1)))}return[a,e]}if(e=Bi(r,i,{startIndex:e,allowSubstringMatches:!0}),e===null)return;const p=r[e];if(Ue.anyString(p)&&typeof i=="string"){const b=p.content;let v=b.indexOf(i);if(b.length>i.length){p.content=i;const $=b.slice(0,v),L=b.slice(v+i.length);$&&(r.splice(e,0,Ci(p,$)),e++),L&&r.splice(e+1,0,Ci(p,L))}}return[a,e]}function qo(r,t,s=0){if(typeof t=="function")return t(r,s);typeof t=="string"&&(t=En(t));const i=[];let n=0;for(const a of t)if(a.type==="embellishment"){const e=new Set(a.embellishmentTokens),p=Object.fromEntries(a.embellishmentTokens.map(($,L)=>{var R;const A="defaultArg"in a?(R=a.defaultArg)==null?void 0:R[L]:void 0;return[$,co(A)]}));let{argument:b,nodesRemoved:v}=en(r,uo(e),s);for(;b;){const $=b.openMark;e.delete($),p[$]=b,n+=v;const L=uo(e);({argument:b,nodesRemoved:v}=en(r,L,s))}i.push(...a.embellishmentTokens.map($=>p[$]))}else{const{argument:e,nodesRemoved:p}=en(r,a,s),b="defaultArg"in a?a.defaultArg:void 0;i.push(e||co(b)),n+=p}return{args:i,nodesRemoved:n}}function uo(r){return{type:"embellishment",embellishmentTokens:[...r]}}function co(r){const t=Mt([],{openMark:"",closeMark:""});return r!=null&&Qi(t,{defaultArg:r}),t}function Qs(r,t){let s;const i=Ue.createMacroMatcher(t);function n(){for(;s>=0&&!i(r[s]);)s--}for(s=r.length-1;s>=0;){if(n(),s<0)return;const a=s,e=r[a],p=e.content,b=t[p];Qi(e,b.renderInfo);const v=b.argumentParser||b.signature;if(v==null){s--;continue}if(e.args!=null){s=a-1;continue}s++;const{args:$}=qo(r,v,s);e.args=$,s=a-1}}const dc=En("m")[0],mc=En("o")[0],ys={},vc=(r,t)=>{const{argument:s,nodesRemoved:i}=en(r,mc,t);let n=null,a=0;const e=r[t];if(Ue.group(e)){const p=en(r,dc,t);n=p.argument,a=p.nodesRemoved}else if(Ue.string(e)&&e.content.length===1){const p=e.content;ys[p]=ys[p]||En(`r${p}${p}`)[0];const b=en(r,ys[p],t);n=b.argument,a=b.nodesRemoved}return{args:[s||Mt(null),n||Mt(null)],nodesRemoved:i+a}},bc={lstset:{signature:"m"},lstinline:{argumentParser:vc},lstinputlisting:{signature:"o m"},lstdefinestyle:{signature:"m m"},lstnewenvironment:{signature:"m o o m m"},lstMakeShortInline:{signature:"o m"},lstDeleteShortInline:{signature:"m"},lstdefineformat:{signature:"m m"},lstdefinelanguage:{signature:"o m o m o"},lstalias:{signature:"o m o m"},lstloadlanguages:{signature:"m"}},yc={},Ac={see:{signature:"m m"},seealso:{signature:"m m"},seename:{signature:"m"},alsoname:{signature:"m"},index:{signature:"m"}},$c={},wc={mathtoolsset:{signature:"m",renderInfo:{breakAround:!0,pgfkeysArgs:!0}},mathllap:{signature:"o m"},mathrlap:{signature:"o m"},mathclap:{signature:"o m"},clap:{signature:"m"},mathmbox:{signature:"m"},mathmakebox:{signature:"o o m"},cramped:{signature:"o m"},crampedllap:{signature:"o m"},crampedrlap:{signature:"o m"},crampedclap:{signature:"o m"},crampedsubstack:{signature:"o m"},smashoperator:{signature:"o m"},newtagform:{signature:"m o m m"},renewtagform:{signature:"m o m m"},usetagform:{signature:"m"},xleftrightarrow:{signature:"o m"},xLeftarrow:{signature:"o m"},xhookleftarrow:{signature:"o m"},xmapsto:{signature:"o m"},xRightarrow:{signature:"o m"},xLeftrightarrow:{signature:"o m"},xhookrightarrow:{signature:"o m"},underbracket:{signature:"o o m"},overbracket:{signature:"o o m"},underbrace:{signature:"m"},overbrace:{signature:"m"},shoveleft:{signature:"o m"},shoveright:{signature:"o m"},ArrowBetweenLines:{signature:"s o"},vdotswithin:{signature:"m"},shortdotswithin:{signature:"s m"},DeclarePairedDelimiter:{signature:"m m m",renderInfo:{breakAround:!0}},DeclarePairedDelimiterX:{signature:"m o m m m",renderInfo:{breakAround:!0}},DeclarePairedDelimiterXPP:{signature:"m o m m m m m",renderInfo:{breakAround:!0}},prescript:{signature:"m m m"},DeclareMathSizes:{signature:"m m m m"},newgathered:{signature:"m m m m"},renewgathered:{signature:"m m m m"},splitfrac:{signature:"m m"},splitdfrac:{signature:"m m"},xmathstrut:{signature:"o m"},newtheorem:{signature:"s m o m o",renderInfo:{breakAround:!0}},theoremstyle:{signature:"m",renderInfo:{breakAround:!0}},newtheoremstyle:{signature:"m m m m m m m m m",renderInfo:{breakAround:!0}},text:{signature:"m",renderInfo:{inMathMode:!1}},mathbb:{signature:"m"},mathscr:{signature:"m"},mathfrak:{signature:"m"},frak:{signature:"m"},Bdd:{signature:"m"},bold:{signature:"m"},operatorname:{signature:"s m"},DeclareMathOperator:{signature:"s m m",renderInfo:{breakAround:!0}}},xc={crampedsubarray:{signature:"m",renderInfo:{alignContent:!0,inMathMode:!0}},matrix:{renderInfo:{alignContent:!0,inMathMode:!0}},bmatrix:{renderInfo:{alignContent:!0,inMathMode:!0}},pmatrix:{renderInfo:{alignContent:!0,inMathMode:!0}},vmatrix:{renderInfo:{alignContent:!0,inMathMode:!0}},Bmatrix:{renderInfo:{alignContent:!0,inMathMode:!0}},Vmatrix:{renderInfo:{alignContent:!0,inMathMode:!0}},smallmatrix:{renderInfo:{alignContent:!0,inMathMode:!0}},psmallmatrix:{renderInfo:{alignContent:!0,inMathMode:!0}},vsmallmatrix:{renderInfo:{alignContent:!0,inMathMode:!0}},bsmallmatrix:{renderInfo:{alignContent:!0,inMathMode:!0}},Bsmallmatrix:{renderInfo:{alignContent:!0,inMathMode:!0}},Vsmallmatrix:{renderInfo:{alignContent:!0,inMathMode:!0}},"matrix*":{signature:"o",renderInfo:{alignContent:!0,inMathMode:!0}},"bmatrix*":{signature:"o",renderInfo:{alignContent:!0,inMathMode:!0}},"pmatrix*":{signature:"o",renderInfo:{alignContent:!0,inMathMode:!0}},"vmatrix*":{signature:"o",renderInfo:{alignContent:!0,inMathMode:!0}},"Bmatrix*":{signature:"o",renderInfo:{alignContent:!0,inMathMode:!0}},"Vmatrix*":{signature:"o",renderInfo:{alignContent:!0,inMathMode:!0}},"smallmatrix*":{signature:"o",renderInfo:{alignContent:!0,inMathMode:!0}},"psmallmatrix*":{signature:"o",renderInfo:{alignContent:!0,inMathMode:!0}},"bsmallmatrix*":{signature:"o",renderInfo:{alignContent:!0,inMathMode:!0}},"vsmallmatrix*":{signature:"o",renderInfo:{alignContent:!0,inMathMode:!0}},"Bsmallmatrix*":{signature:"o",renderInfo:{alignContent:!0,inMathMode:!0}},"Vsmallmatrix*":{signature:"o",renderInfo:{alignContent:!0,inMathMode:!0}},multilined:{signature:"o o",renderInfo:{inMathMode:!0}},cases:{renderInfo:{alignContent:!0,inMathMode:!0}},"cases*":{renderInfo:{alignContent:!0,inMathMode:!0}},dcases:{renderInfo:{alignContent:!0,inMathMode:!0}},"dcases*":{renderInfo:{alignContent:!0,inMathMode:!0}},rcases:{renderInfo:{alignContent:!0,inMathMode:!0}},"rcases*":{renderInfo:{alignContent:!0,inMathMode:!0}},drcases:{renderInfo:{alignContent:!0,inMathMode:!0}},"drcases*":{renderInfo:{alignContent:!0,inMathMode:!0}},spreadlines:{signature:"m",renderInfo:{inMathMode:!0}},lgathered:{signature:"o",renderInfo:{inMathMode:!0}},rgathered:{signature:"o",renderInfo:{inMathMode:!0}},"align*":{renderInfo:{inMathMode:!0,alignContent:!0}},align:{renderInfo:{inMathMode:!0,alignContent:!0}},aligned:{renderInfo:{inMathMode:!0,alignContent:!0}},"alignat*":{renderInfo:{inMathMode:!0,alignContent:!0}},alignat:{renderInfo:{inMathMode:!0,alignContent:!0}},"equation*":{renderInfo:{inMathMode:!0}},equation:{renderInfo:{inMathMode:!0}},"gather*":{renderInfo:{inMathMode:!0}},gather:{renderInfo:{inMathMode:!0}},"multline*":{renderInfo:{inMathMode:!0}},multline:{renderInfo:{inMathMode:!0}},"flalign*":{renderInfo:{inMathMode:!0,alignContent:!0}},flalign:{renderInfo:{inMathMode:!0,alignContent:!0}},split:{renderInfo:{inMathMode:!0}},displaymath:{renderInfo:{inMathMode:!0}},theorem:{signature:"o"},lemma:{signature:"o"},definition:{signature:"o"},proposition:{signature:"o"},corollary:{signature:"o"},remark:{signature:"!o"},example:{signature:"!o"},proof:{signature:"o"}},fo=En("m")[0],Ec=En("o")[0],As={},$s=(r,t)=>{const{argument:s,nodesRemoved:i}=en(r,Ec,t),{argument:n,nodesRemoved:a}=en(r,fo,t);let e=null,p=0;const b=r[t];if(Ue.group(b)){const v=en(r,fo,t);e=v.argument,p=v.nodesRemoved}else if(Ue.string(b)&&b.content.length===1){const v=b.content;As[v]=As[v]||En(`r${v}${v}`)[0];const $=en(r,As[v],t);e=$.argument,p=$.nodesRemoved}return{args:[s||Mt(null),n||Mt(null),e||Mt(null)],nodesRemoved:i+a+p}},kc={mint:{argumentParser:$s},mintinline:{argumentParser:$s},inputminted:{argumentParser:$s},usemintedstyle:{signature:"m"},setminted:{signature:"o m"},setmintedinline:{signature:"o m"},newmint:{signature:"o m m"},newminted:{signature:"o m m"},newmintinline:{signature:"o m m"},newmintedfile:{signature:"o m m"}},Cc={minted:{signature:"o m"}},Mc={NiceMatrixOptions:{signature:"m",renderInfo:{pgfkeysArgs:!0,breakAround:!0}}},Sc={NiceTabular:{signature:"o m !o",renderInfo:{pgfkeysArgs:!0,alignContent:!0}},NiceMatrixBlock:{signature:"!o",renderInfo:{pgfkeysArgs:!0,alignContent:!0}},NiceArrayWithDelims:{signature:"m m o m !o",renderInfo:{pgfkeysArgs:!0,alignContent:!0}},NiceArray:{signature:"o m !o",renderInfo:{pgfkeysArgs:!0,alignContent:!0}},pNiceArray:{signature:"o m !o",renderInfo:{pgfkeysArgs:!0,alignContent:!0}},bNiceArray:{signature:"o m !o",renderInfo:{pgfkeysArgs:!0,alignContent:!0}},BNiceArray:{signature:"o m !o",renderInfo:{pgfkeysArgs:!0,alignContent:!0}},vNiceArray:{signature:"o m !o",renderInfo:{pgfkeysArgs:!0,alignContent:!0}},VNiceArray:{signature:"o m !o",renderInfo:{pgfkeysArgs:!0,alignContent:!0}},NiceMatrix:{signature:"!o",renderInfo:{pgfkeysArgs:!0,alignContent:!0}},pNiceMatrix:{signature:"!o",renderInfo:{pgfkeysArgs:!0,alignContent:!0}},bNiceMatrix:{signature:"!o",renderInfo:{pgfkeysArgs:!0,alignContent:!0}},BNiceMatrix:{signature:"!o",renderInfo:{pgfkeysArgs:!0,alignContent:!0}},vNiceMatrix:{signature:"!o",renderInfo:{pgfkeysArgs:!0,alignContent:!0}},VNiceMatrix:{signature:"!o",renderInfo:{pgfkeysArgs:!0,alignContent:!0}}},Ic={systeme:{signature:"s o o m",renderInfo:{inMathMode:!0}},sysdelim:{signature:"m m"},syseqsep:{signature:"m"},sysalign:{signature:"m"},syssignspace:{signature:"m"},syseqspace:{signature:"m"},syslineskipcoeff:{signature:"m"},syseqivsign:{signature:"m"},sysaddeqsign:{signature:"m"},sysremoveeqsign:{signature:"m"},sysextracolonsign:{signature:"m"},syscodeextracol:{signature:"m"},sysautonum:{signature:"m"},syssubstitute:{signature:"m"}},Fc={};(function(){typeof globalThis!="object"&&(Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__)})();const _c=En("o")[0];function Mi(){return Mt([],{openMark:"",closeMark:""})}const jo=(r,t)=>{const s=t;let i=t,n=0;const a=Lc(r,i);let e=Mi();if(a!==i){const R=r.splice(i,a-i);Hn(R),e=Mt(R,{openMark:" ",closeMark:" "})}n+=a-i;const{argument:p,nodesRemoved:b}=en(r,_c,i);n+=b;const v=p||Mi();for(;Ue.whitespace(r[i]);)i++;const $=r[i];if(!$)return{args:[e,v,Mi()],nodesRemoved:0};if(Ue.group($)){const R=[e,v,Mt($.content)];return r.splice(s,i-s+1),{args:R,nodesRemoved:i-s+1+n}}const L=Bi(r,";",{startIndex:i});if(L!=null){const R=r.splice(s,L-s+1);return Hn(R),{args:[e,v,Mt(R)],nodesRemoved:s-L+1+n}}return{args:[e,v,Mi()],nodesRemoved:0}};function Lc(r,t){const s=Bi(r,":",{startIndex:t,allowSubstringMatches:!0,onlySkipWhitespaceAndComments:!0});if(!s)return t;let i=t,n=s+1;for(;n<r.length;n++){const a=r[n];if(Ue.string(a,"["))break;if(Ue.string(a,"=")){for(n++;Ue.whitespace(r[n])||Ue.comment(r[n]);)n++;if(!Ue.group(r[n]))break;i=n+1;const e=Bi(r,":",{startIndex:i,allowSubstringMatches:!0,onlySkipWhitespaceAndComments:!0});if(e==null)break;n=e+1}}return i}const Oc={pgfkeys:{signature:"m",renderInfo:{breakAround:!0,pgfkeysArgs:!0}},tikzoption:{signature:"m",renderInfo:{breakAround:!0,pgfkeysArgs:!0}},tikzstyle:{signature:"m",renderInfo:{breakAround:!0,pgfkeysArgs:!0}},usetikzlibrary:{signature:"m",renderInfo:{breakAround:!0,pgfkeysArgs:!0}},usepgfmodule:{signature:"m",renderInfo:{pgfkeysArgs:!0}},usepgflibrary:{signature:"m",renderInfo:{pgfkeysArgs:!0}},pgfplotsset:{signature:"m",renderInfo:{breakAround:!0,pgfkeysArgs:!0}},pgfplotstabletypeset:{signature:"o m",renderInfo:{breakAround:!0,pgfkeysArgs:!0}},tikz:{signature:"o o m",argumentParser:jo,renderInfo:{namedArguments:["animation","options","command"]}}},Rc={tikzpicture:{signature:"o",renderInfo:{pgfkeysArgs:!0,tikzEnvironment:!0},processContent:un},axis:{signature:"o",renderInfo:{pgfkeysArgs:!0,tikzEnvironment:!0},processContent:un},scope:{signature:"o",renderInfo:{pgfkeysArgs:!0,tikzEnvironment:!0},processContent:un},pgfonlayer:{signature:"m",renderInfo:{tikzEnvironment:!0},processContent:un},pgflowlevelscope:{signature:"m",renderInfo:{tikzEnvironment:!0},processContent:un},pgfviewboxscope:{signature:"m m m m m",renderInfo:{tikzEnvironment:!0},processContent:un},pgftransparencygroup:{signature:"o",renderInfo:{pgfkeysArgs:!0,tikzEnvironment:!0},processContent:un},behindforegroundpath:{signature:"m",processContent:un},pgfmetadecoration:{signature:"m",processContent:un},colormixin:{signature:"m",renderInfo:{pgfkeysArgs:!0}}};function un(r){return Qs(r,Dc),r}const Dc={pgfextra:{signature:"m"},beginpgfgraphicnamed:{signature:"m"},pgfrealjobname:{signature:"m"},pgfplotstreampoint:{signature:"m"},pgfplotstreampointoutlier:{signature:"m"},pgfplotstreamspecial:{signature:"m"},pgfplotxyfile:{signature:"m"},pgfplotxyzfile:{signature:"m"},pgfplotfunction:{signature:"mmm"},pgfplotgnuplot:{signature:"o m"},pgfplothandlerrecord:{signature:"m"},pgfdeclareplothandler:{signature:"m m m"},pgfdeclarelayer:{signature:"m"},pgfsetlayers:{signature:"m",renderInfo:{pgfkeysArgs:!0}},pgfonlayer:{signature:"m"},startpgfonlayer:{signature:"m"},pgfdeclarehorizontalshading:{signature:"o m m m "},pgfdeclareradialshading:{signature:"o m m m"},pgfdeclarefunctionalshading:{signature:"o m m m m m"},pgfshadecolortorgb:{signature:"m m"},pgfshadecolortocmyk:{signature:"m m"},pgfshadecolortogray:{signature:"m m"},pgfuseshading:{signature:"m"},pgfshadepath:{signature:"m m"},pgfsetadditionalshadetransform:{signature:"m"},pgfsetstrokeopacity:{signature:"m"},pgfsetfillopacity:{signature:"m"},pgfsetblendmode:{signature:"m"},pgfdeclarefading:{signature:"m m"},pgfsetfading:{signature:"m m"},pgfsetfadingforcurrentpath:{signature:"m m"},pgfsetfadingforcurrentpathstroked:{signature:"m m"},pgfanimateattribute:{signature:"m m"},pgfsnapshot:{signature:"m"},pgfqpoint:{signature:"m m"},pgfqpointxy:{signature:"m m"},pgfqpointxyz:{signature:"m m m"},pgfqpointscale:{signature:"m m"},pgfpathqmoveto:{signature:"m m"},pgfpathqlineto:{signature:"m m"},pgfpathqcurveto:{signature:"m m m m m m"},pgfpathqcircle:{signature:"m"},pgfqbox:{signature:"m"},pgfqboxsynced:{signature:"m"},pgfaliasimage:{signature:"m m"},pgfuseimage:{signature:"m"},pgfimage:{signature:"o m",renderInfo:{pgfkeysArgs:!0}},pgfdeclaremask:{signature:"o m m",renderInfo:{pgfkeysArgs:!0}},pgfdeclarepatternformonly:{signature:"o m m m m m"},pgfdeclarepatterninherentlycolored:{signature:"o m m m m m"},pgfsetfillpattern:{signature:"m m"},pgftransformshift:{signature:"m"},pgftransformxshift:{signature:"m"},pgftransformyshift:{signature:"m"},pgftransformscale:{signature:"m"},pgftransformxscale:{signature:"m"},pgftransformyscale:{signature:"m"},pgftransformxslant:{signature:"m"},pgftransformyslant:{signature:"m"},pgftransformrotate:{signature:"m"},pgftransformtriangle:{signature:"m m m"},pgftransformcm:{signature:"m m m m m"},pgftransformarrow:{signature:"m m"},pgftransformlineattime:{signature:"m m m"},pgftransformcurveattime:{signature:"m m m m m"},pgftransformarcaxesattime:{signature:"m m m m m m"},pgfgettransform:{signature:"m"},pgfsettransform:{signature:"m"},pgfgettransformentries:{signature:"m m m m m m"},pgfsettransformentries:{signature:"m m m m m m"},pgfpointtransformed:{signature:"m"},pgflowlevel:{signature:"m"},pgflowlevelobj:{signature:"m m"},pgflowlevelscope:{signature:"m"},startpgflowlevelscope:{signature:"m"},pgfviewboxscope:{signature:"m m m m m"},startpgfviewboxscope:{signature:"m m m m m"},pgftransformnonlinear:{signature:"m"},pgfpointtransformednonlinear:{signature:"m"},pgfsetcurvilinearbeziercurve:{signature:"m m m m"},pgfcurvilineardistancetotime:{signature:"m"},pgfpointcurvilinearbezierorthogonal:{signature:"m m"},pgfpointcurvilinearbezierpolar:{signature:"m m"},pgfmatrix:{signature:"m m m m m m m"},pgfsetmatrixcolumnsep:{signature:"m"},pgfmatrixnextcell:{signature:"o"},pgfsetmatrixrowsep:{signature:"m"},pgfmatrixendrow:{signature:"o"},pgfnode:{signature:"m m m m m"},pgfmultipartnode:{signature:"m m m m"},pgfcoordinate:{signature:"m m"},pgfnodealias:{signature:"m m"},pgfnoderename:{signature:"m m"},pgfpositionnodelater:{signature:"m"},pgfpositionnodenow:{signature:"m"},pgfnodepostsetupcode:{signature:"m m"},pgfpointanchor:{signature:"m m"},pgfpointshapeborder:{signature:"m m"},pgfdeclareshape:{signature:"m m"},saveddimen:{signature:"m m"},savedmacro:{signature:" m"},anchor:{signature:"m m"},deferredanchor:{signature:"m m"},anchorborder:{signature:"m"},backgroundpath:{signature:"m"},foregroundpath:{signature:"m"},behindbackgroundpath:{signature:"m"},beforebackgroundpath:{signature:"m"},beforeforegroundpath:{signature:"m"},behindforegroundpath:{signature:"m"},pgfdeclarearrow:{signature:"m"},pgfarrowssettipend:{signature:"m"},pgfarrowssetbackend:{signature:"m"},pgfarrowssetlineend:{signature:"m"},pgfarrowssetvisualbackend:{signature:"m"},pgfarrowssetvisualtipend:{signature:"m"},pgfarrowshullpoint:{signature:"m m"},pgfarrowsupperhullpoint:{signature:"m m"},pgfarrowssave:{signature:"m"},pgfarrowssavethe:{signature:"m"},pgfarrowsaddtooptions:{signature:"m"},pgfarrowsaddtolateoptions:{signature:"m"},pgfarrowsaddtolengthscalelist:{signature:"m"},pgfarrowsaddtowidthscalelist:{signature:"m"},pgfarrowsthreeparameters:{signature:"m"},pgfarrowslinewidthdependent:{signature:"m m m"},pgfarrowslengthdependent:{signature:"m"},pgfusepath:{signature:"m"},pgfsetlinewidth:{signature:"m"},pgfsetmiterlimit:{signature:"m"},pgfsetdash:{signature:"m m"},pgfsetstrokecolor:{signature:"m"},pgfsetcolor:{signature:"m"},pgfsetinnerlinewidth:{signature:"m"},pgfsetinnerstrokecolor:{signature:"m"},pgfsetarrowsstart:{signature:"m"},pgfsetarrowsend:{signature:"m"},pgfsetarrows:{signature:"m"},pgfsetshortenstart:{signature:"m"},pgfsetshortenend:{signature:"m"},pgfsetfillcolor:{signature:"m"},pgfdeclaredecoration:{signature:"m m m"},state:{signature:"m o m"},pgfdecoratepath:{signature:"m m"},startpgfdecoration:{signature:"m"},pgfdecoration:{signature:"m"},pgfdecoratecurrentpath:{signature:"m"},pgfsetdecorationsegmenttransformation:{signature:"m"},pgfdeclaremetadecorate:{signature:"m m m"},pgfmetadecoration:{signature:"m"},startpgfmetadecoration:{signature:"m"},pgfpathmoveto:{signature:"m"},pgfpathlineto:{signature:"m"},pgfpathcurveto:{signature:"m m m"},pgfpathquadraticcurveto:{signature:"m m"},pgfpathcurvebetweentime:{signature:"m m m m m m"},pgfpathcurvebetweentimecontinue:{signature:"m m m m m m"},pgfpatharc:{signature:"m m m"},pgfpatharcaxes:{signature:"m m m m"},pgfpatharcto:{signature:"m m m m m m"},pgfpatharctoprecomputed:{signature:"m m m m m m m m"},pgfpathellipse:{signature:"m m m"},pgfpathcircle:{signature:"m m"},pgfpathrectangle:{signature:"m m"},pgfpathrectanglecorners:{signature:"m m"},pgfpathgrid:{signature:" o m m"},pgfpathparabola:{signature:"m m"},pgfpathsine:{signature:"m"},pgfpathcosine:{signature:"m"},pgfsetcornersarced:{signature:"m"},"pgf@protocolsizes":{signature:"m m"},pgfpoint:{signature:"m m"},pgfpointpolar:{signature:"m m m"},pgfpointxy:{signature:"m m"},pgfsetxvec:{signature:"m"},pgfsetyvec:{signature:"m"},pgfpointpolarxy:{signature:"m m"},pgfpointxyz:{signature:"m m m"},pgfsetzvec:{signature:"m"},pgfpointcylindrical:{signature:"m m m"},pgfpointspherical:{signature:"m m m"},pgfpointadd:{signature:"m m"},pgfpointscale:{signature:"m m"},pgfpointdiff:{signature:"m m"},pgfpointnormalised:{signature:"m"},pgfpointlineattime:{signature:"m m m"},pgfpointlineatdistance:{signature:"m m m"},pgfpointarcaxesattime:{signature:"m m m m m m"},pgfpointcurveattime:{signature:"m m m m m"},pgfpointborderrectangle:{signature:"m m"},pgfpointborderellipse:{signature:"m m"},pgfpointintersectionoflines:{signature:"m m m m"},pgfpointintersectionofcircles:{signature:"m m m m m"},pgfintersectionofpaths:{signature:"m m"},pgfpointintersectionsolution:{signature:"m"},pgfextractx:{signature:"m m"},pgfextracty:{signature:"m m"},pgfgetlastxy:{signature:"m m"},"pgf@process":{signature:"m"},pgfsetbaseline:{signature:"m"},pgfsetbaselinepointnow:{signature:"m"},pgfsetbaselinepointlater:{signature:"m"},pgftext:{signature:"o m",renderInfo:{pgfkeysArgs:!0}},pgfuseid:{signature:"m"},pgfusetype:{signature:"m"},pgfidrefnextuse:{signature:"m m"},pgfidrefprevuse:{signature:"m m"},pgfaliasid:{signature:"m m"},pgfgaliasid:{signature:"m m"},pgfifidreferenced:{signature:"m m m"},pgfrdfabout:{signature:"m"},pgfrdfcontent:{signature:"m"},pgfrdfdatatype:{signature:"m"},pgfrdfhref:{signature:"m"},pgfrdfprefix:{signature:"m"},pgfrdfproperty:{signature:"m"},pgfrdfrel:{signature:"m"},pgfrdfresource:{signature:"m"},pgfrdfrev:{signature:"m"},pgfrdfsrc:{signature:"m"},pgfrdftypeof:{signature:"m"},pgfrdfvocab:{signature:"m"},pgferror:{signature:"m"},pgfwarning:{signature:"m"},path:{signature:"u;",renderInfo:{breakAround:!0,tikzPathCommand:!0}},draw:{signature:"u;",renderInfo:{breakAround:!0,tikzPathCommand:!0}},fill:{signature:"u;",renderInfo:{breakAround:!0,tikzPathCommand:!0}},filldraw:{signature:"u;",renderInfo:{breakAround:!0,tikzPathCommand:!0}},pattern:{signature:"u;",renderInfo:{breakAround:!0,tikzPathCommand:!0}},shade:{signature:"u;",renderInfo:{breakAround:!0,tikzPathCommand:!0}},clip:{signature:"u;",renderInfo:{breakAround:!0,tikzPathCommand:!0}},useasboundingbox:{signature:"u;",renderInfo:{breakAround:!0,tikzPathCommand:!0}},node:{signature:"u;",renderInfo:{breakAround:!0,tikzPathCommand:!0}},coordinate:{signature:"u;",renderInfo:{breakAround:!0,tikzPathCommand:!0}},graph:{signature:"u;",renderInfo:{breakAround:!0,tikzPathCommand:!0}},scoped:{signature:"o o m",argumentParser:jo,renderInfo:{namedArguments:["animation","options","command"],breakAround:!0}}};var No={exports:{}},Bc={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Go={exports:{}},Tc=function(t){return!t||typeof t=="string"?!1:t instanceof Array||Array.isArray(t)||t.length>=0&&(t.splice instanceof Function||Object.getOwnPropertyDescriptor(t,t.length-1)&&t.constructor.name!=="String")},Pc=Tc,qc=Array.prototype.concat,jc=Array.prototype.slice,ho=Go.exports=function(t){for(var s=[],i=0,n=t.length;i<n;i++){var a=t[i];Pc(a)?s=qc.call(s,jc.call(a)):s.push(a)}return s};ho.wrap=function(r){return function(){return r(ho(arguments))}};var Nc=Go.exports,ni=Bc,pi=Nc,Ho=Object.hasOwnProperty,zo=Object.create(null);for(var ws in ni)Ho.call(ni,ws)&&(zo[ni[ws]]=ws);var Qt=No.exports={to:{},get:{}};Qt.get=function(r){var t=r.substring(0,3).toLowerCase(),s,i;switch(t){case"hsl":s=Qt.get.hsl(r),i="hsl";break;case"hwb":s=Qt.get.hwb(r),i="hwb";break;default:s=Qt.get.rgb(r),i="rgb";break}return s?{model:i,value:s}:null};Qt.get.rgb=function(r){if(!r)return null;var t=/^#([a-f0-9]{3,4})$/i,s=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,i=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,n=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,a=/^(\w+)$/,e=[0,0,0,1],p,b,v;if(p=r.match(s)){for(v=p[2],p=p[1],b=0;b<3;b++){var $=b*2;e[b]=parseInt(p.slice($,$+2),16)}v&&(e[3]=parseInt(v,16)/255)}else if(p=r.match(t)){for(p=p[1],v=p[3],b=0;b<3;b++)e[b]=parseInt(p[b]+p[b],16);v&&(e[3]=parseInt(v+v,16)/255)}else if(p=r.match(i)){for(b=0;b<3;b++)e[b]=parseInt(p[b+1],0);p[4]&&(p[5]?e[3]=parseFloat(p[4])*.01:e[3]=parseFloat(p[4]))}else if(p=r.match(n)){for(b=0;b<3;b++)e[b]=Math.round(parseFloat(p[b+1])*2.55);p[4]&&(p[5]?e[3]=parseFloat(p[4])*.01:e[3]=parseFloat(p[4]))}else return(p=r.match(a))?p[1]==="transparent"?[0,0,0,0]:Ho.call(ni,p[1])?(e=ni[p[1]],e[3]=1,e):null:null;for(b=0;b<3;b++)e[b]=xn(e[b],0,255);return e[3]=xn(e[3],0,1),e};Qt.get.hsl=function(r){if(!r)return null;var t=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,s=r.match(t);if(s){var i=parseFloat(s[4]),n=(parseFloat(s[1])%360+360)%360,a=xn(parseFloat(s[2]),0,100),e=xn(parseFloat(s[3]),0,100),p=xn(isNaN(i)?1:i,0,1);return[n,a,e,p]}return null};Qt.get.hwb=function(r){if(!r)return null;var t=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,s=r.match(t);if(s){var i=parseFloat(s[4]),n=(parseFloat(s[1])%360+360)%360,a=xn(parseFloat(s[2]),0,100),e=xn(parseFloat(s[3]),0,100),p=xn(isNaN(i)?1:i,0,1);return[n,a,e,p]}return null};Qt.to.hex=function(){var r=pi(arguments);return"#"+Si(r[0])+Si(r[1])+Si(r[2])+(r[3]<1?Si(Math.round(r[3]*255)):"")};Qt.to.rgb=function(){var r=pi(arguments);return r.length<4||r[3]===1?"rgb("+Math.round(r[0])+", "+Math.round(r[1])+", "+Math.round(r[2])+")":"rgba("+Math.round(r[0])+", "+Math.round(r[1])+", "+Math.round(r[2])+", "+r[3]+")"};Qt.to.rgb.percent=function(){var r=pi(arguments),t=Math.round(r[0]/255*100),s=Math.round(r[1]/255*100),i=Math.round(r[2]/255*100);return r.length<4||r[3]===1?"rgb("+t+"%, "+s+"%, "+i+"%)":"rgba("+t+"%, "+s+"%, "+i+"%, "+r[3]+")"};Qt.to.hsl=function(){var r=pi(arguments);return r.length<4||r[3]===1?"hsl("+r[0]+", "+r[1]+"%, "+r[2]+"%)":"hsla("+r[0]+", "+r[1]+"%, "+r[2]+"%, "+r[3]+")"};Qt.to.hwb=function(){var r=pi(arguments),t="";return r.length>=4&&r[3]!==1&&(t=", "+r[3]),"hwb("+r[0]+", "+r[1]+"%, "+r[2]+"%"+t+")"};Qt.to.keyword=function(r){return zo[r.slice(0,3)]};function xn(r,t,s){return Math.min(Math.max(t,r),s)}function Si(r){var t=Math.round(r).toString(16).toUpperCase();return t.length<2?"0"+t:t}var Gc=No.exports,Hc={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};const oi=Hc,Qo={};for(const r of Object.keys(oi))Qo[oi[r]]=r;const rr={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};var Wo=rr;for(const r of Object.keys(rr)){if(!("channels"in rr[r]))throw new Error("missing channels property: "+r);if(!("labels"in rr[r]))throw new Error("missing channel labels property: "+r);if(rr[r].labels.length!==rr[r].channels)throw new Error("channel and label counts mismatch: "+r);const{channels:t,labels:s}=rr[r];delete rr[r].channels,delete rr[r].labels,Object.defineProperty(rr[r],"channels",{value:t}),Object.defineProperty(rr[r],"labels",{value:s})}rr.rgb.hsl=function(r){const t=r[0]/255,s=r[1]/255,i=r[2]/255,n=Math.min(t,s,i),a=Math.max(t,s,i),e=a-n;let p,b;a===n?p=0:t===a?p=(s-i)/e:s===a?p=2+(i-t)/e:i===a&&(p=4+(t-s)/e),p=Math.min(p*60,360),p<0&&(p+=360);const v=(n+a)/2;return a===n?b=0:v<=.5?b=e/(a+n):b=e/(2-a-n),[p,b*100,v*100]};rr.rgb.hsv=function(r){let t,s,i,n,a;const e=r[0]/255,p=r[1]/255,b=r[2]/255,v=Math.max(e,p,b),$=v-Math.min(e,p,b),L=function(R){return(v-R)/6/$+1/2};return $===0?(n=0,a=0):(a=$/v,t=L(e),s=L(p),i=L(b),e===v?n=i-s:p===v?n=1/3+t-i:b===v&&(n=2/3+s-t),n<0?n+=1:n>1&&(n-=1)),[n*360,a*100,v*100]};rr.rgb.hwb=function(r){const t=r[0],s=r[1];let i=r[2];const n=rr.rgb.hsl(r)[0],a=1/255*Math.min(t,Math.min(s,i));return i=1-1/255*Math.max(t,Math.max(s,i)),[n,a*100,i*100]};rr.rgb.cmyk=function(r){const t=r[0]/255,s=r[1]/255,i=r[2]/255,n=Math.min(1-t,1-s,1-i),a=(1-t-n)/(1-n)||0,e=(1-s-n)/(1-n)||0,p=(1-i-n)/(1-n)||0;return[a*100,e*100,p*100,n*100]};function zc(r,t){return(r[0]-t[0])**2+(r[1]-t[1])**2+(r[2]-t[2])**2}rr.rgb.keyword=function(r){const t=Qo[r];if(t)return t;let s=1/0,i;for(const n of Object.keys(oi)){const a=oi[n],e=zc(r,a);e<s&&(s=e,i=n)}return i};rr.keyword.rgb=function(r){return oi[r]};rr.rgb.xyz=function(r){let t=r[0]/255,s=r[1]/255,i=r[2]/255;t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,s=s>.04045?((s+.055)/1.055)**2.4:s/12.92,i=i>.04045?((i+.055)/1.055)**2.4:i/12.92;const n=t*.4124+s*.3576+i*.1805,a=t*.2126+s*.7152+i*.0722,e=t*.0193+s*.1192+i*.9505;return[n*100,a*100,e*100]};rr.rgb.lab=function(r){const t=rr.rgb.xyz(r);let s=t[0],i=t[1],n=t[2];s/=95.047,i/=100,n/=108.883,s=s>.008856?s**(1/3):7.787*s+16/116,i=i>.008856?i**(1/3):7.787*i+16/116,n=n>.008856?n**(1/3):7.787*n+16/116;const a=116*i-16,e=500*(s-i),p=200*(i-n);return[a,e,p]};rr.hsl.rgb=function(r){const t=r[0]/360,s=r[1]/100,i=r[2]/100;let n,a,e;if(s===0)return e=i*255,[e,e,e];i<.5?n=i*(1+s):n=i+s-i*s;const p=2*i-n,b=[0,0,0];for(let v=0;v<3;v++)a=t+1/3*-(v-1),a<0&&a++,a>1&&a--,6*a<1?e=p+(n-p)*6*a:2*a<1?e=n:3*a<2?e=p+(n-p)*(2/3-a)*6:e=p,b[v]=e*255;return b};rr.hsl.hsv=function(r){const t=r[0];let s=r[1]/100,i=r[2]/100,n=s;const a=Math.max(i,.01);i*=2,s*=i<=1?i:2-i,n*=a<=1?a:2-a;const e=(i+s)/2,p=i===0?2*n/(a+n):2*s/(i+s);return[t,p*100,e*100]};rr.hsv.rgb=function(r){const t=r[0]/60,s=r[1]/100;let i=r[2]/100;const n=Math.floor(t)%6,a=t-Math.floor(t),e=255*i*(1-s),p=255*i*(1-s*a),b=255*i*(1-s*(1-a));switch(i*=255,n){case 0:return[i,b,e];case 1:return[p,i,e];case 2:return[e,i,b];case 3:return[e,p,i];case 4:return[b,e,i];case 5:return[i,e,p]}};rr.hsv.hsl=function(r){const t=r[0],s=r[1]/100,i=r[2]/100,n=Math.max(i,.01);let a,e;e=(2-s)*i;const p=(2-s)*n;return a=s*n,a/=p<=1?p:2-p,a=a||0,e/=2,[t,a*100,e*100]};rr.hwb.rgb=function(r){const t=r[0]/360;let s=r[1]/100,i=r[2]/100;const n=s+i;let a;n>1&&(s/=n,i/=n);const e=Math.floor(6*t),p=1-i;a=6*t-e,e&1&&(a=1-a);const b=s+a*(p-s);let v,$,L;switch(e){default:case 6:case 0:v=p,$=b,L=s;break;case 1:v=b,$=p,L=s;break;case 2:v=s,$=p,L=b;break;case 3:v=s,$=b,L=p;break;case 4:v=b,$=s,L=p;break;case 5:v=p,$=s,L=b;break}return[v*255,$*255,L*255]};rr.cmyk.rgb=function(r){const t=r[0]/100,s=r[1]/100,i=r[2]/100,n=r[3]/100,a=1-Math.min(1,t*(1-n)+n),e=1-Math.min(1,s*(1-n)+n),p=1-Math.min(1,i*(1-n)+n);return[a*255,e*255,p*255]};rr.xyz.rgb=function(r){const t=r[0]/100,s=r[1]/100,i=r[2]/100;let n,a,e;return n=t*3.2406+s*-1.5372+i*-.4986,a=t*-.9689+s*1.8758+i*.0415,e=t*.0557+s*-.204+i*1.057,n=n>.0031308?1.055*n**(1/2.4)-.055:n*12.92,a=a>.0031308?1.055*a**(1/2.4)-.055:a*12.92,e=e>.0031308?1.055*e**(1/2.4)-.055:e*12.92,n=Math.min(Math.max(0,n),1),a=Math.min(Math.max(0,a),1),e=Math.min(Math.max(0,e),1),[n*255,a*255,e*255]};rr.xyz.lab=function(r){let t=r[0],s=r[1],i=r[2];t/=95.047,s/=100,i/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,s=s>.008856?s**(1/3):7.787*s+16/116,i=i>.008856?i**(1/3):7.787*i+16/116;const n=116*s-16,a=500*(t-s),e=200*(s-i);return[n,a,e]};rr.lab.xyz=function(r){const t=r[0],s=r[1],i=r[2];let n,a,e;a=(t+16)/116,n=s/500+a,e=a-i/200;const p=a**3,b=n**3,v=e**3;return a=p>.008856?p:(a-16/116)/7.787,n=b>.008856?b:(n-16/116)/7.787,e=v>.008856?v:(e-16/116)/7.787,n*=95.047,a*=100,e*=108.883,[n,a,e]};rr.lab.lch=function(r){const t=r[0],s=r[1],i=r[2];let n;n=Math.atan2(i,s)*360/2/Math.PI,n<0&&(n+=360);const e=Math.sqrt(s*s+i*i);return[t,e,n]};rr.lch.lab=function(r){const t=r[0],s=r[1],n=r[2]/360*2*Math.PI,a=s*Math.cos(n),e=s*Math.sin(n);return[t,a,e]};rr.rgb.ansi16=function(r,t=null){const[s,i,n]=r;let a=t===null?rr.rgb.hsv(r)[2]:t;if(a=Math.round(a/50),a===0)return 30;let e=30+(Math.round(n/255)<<2|Math.round(i/255)<<1|Math.round(s/255));return a===2&&(e+=60),e};rr.hsv.ansi16=function(r){return rr.rgb.ansi16(rr.hsv.rgb(r),r[2])};rr.rgb.ansi256=function(r){const t=r[0],s=r[1],i=r[2];return t===s&&s===i?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(s/255*5)+Math.round(i/255*5)};rr.ansi16.rgb=function(r){let t=r%10;if(t===0||t===7)return r>50&&(t+=3.5),t=t/10.5*255,[t,t,t];const s=(~~(r>50)+1)*.5,i=(t&1)*s*255,n=(t>>1&1)*s*255,a=(t>>2&1)*s*255;return[i,n,a]};rr.ansi256.rgb=function(r){if(r>=232){const a=(r-232)*10+8;return[a,a,a]}r-=16;let t;const s=Math.floor(r/36)/5*255,i=Math.floor((t=r%36)/6)/5*255,n=t%6/5*255;return[s,i,n]};rr.rgb.hex=function(r){const s=(((Math.round(r[0])&255)<<16)+((Math.round(r[1])&255)<<8)+(Math.round(r[2])&255)).toString(16).toUpperCase();return"000000".substring(s.length)+s};rr.hex.rgb=function(r){const t=r.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];let s=t[0];t[0].length===3&&(s=s.split("").map(p=>p+p).join(""));const i=parseInt(s,16),n=i>>16&255,a=i>>8&255,e=i&255;return[n,a,e]};rr.rgb.hcg=function(r){const t=r[0]/255,s=r[1]/255,i=r[2]/255,n=Math.max(Math.max(t,s),i),a=Math.min(Math.min(t,s),i),e=n-a;let p,b;return e<1?p=a/(1-e):p=0,e<=0?b=0:n===t?b=(s-i)/e%6:n===s?b=2+(i-t)/e:b=4+(t-s)/e,b/=6,b%=1,[b*360,e*100,p*100]};rr.hsl.hcg=function(r){const t=r[1]/100,s=r[2]/100,i=s<.5?2*t*s:2*t*(1-s);let n=0;return i<1&&(n=(s-.5*i)/(1-i)),[r[0],i*100,n*100]};rr.hsv.hcg=function(r){const t=r[1]/100,s=r[2]/100,i=t*s;let n=0;return i<1&&(n=(s-i)/(1-i)),[r[0],i*100,n*100]};rr.hcg.rgb=function(r){const t=r[0]/360,s=r[1]/100,i=r[2]/100;if(s===0)return[i*255,i*255,i*255];const n=[0,0,0],a=t%1*6,e=a%1,p=1-e;let b=0;switch(Math.floor(a)){case 0:n[0]=1,n[1]=e,n[2]=0;break;case 1:n[0]=p,n[1]=1,n[2]=0;break;case 2:n[0]=0,n[1]=1,n[2]=e;break;case 3:n[0]=0,n[1]=p,n[2]=1;break;case 4:n[0]=e,n[1]=0,n[2]=1;break;default:n[0]=1,n[1]=0,n[2]=p}return b=(1-s)*i,[(s*n[0]+b)*255,(s*n[1]+b)*255,(s*n[2]+b)*255]};rr.hcg.hsv=function(r){const t=r[1]/100,s=r[2]/100,i=t+s*(1-t);let n=0;return i>0&&(n=t/i),[r[0],n*100,i*100]};rr.hcg.hsl=function(r){const t=r[1]/100,i=r[2]/100*(1-t)+.5*t;let n=0;return i>0&&i<.5?n=t/(2*i):i>=.5&&i<1&&(n=t/(2*(1-i))),[r[0],n*100,i*100]};rr.hcg.hwb=function(r){const t=r[1]/100,s=r[2]/100,i=t+s*(1-t);return[r[0],(i-t)*100,(1-i)*100]};rr.hwb.hcg=function(r){const t=r[1]/100,i=1-r[2]/100,n=i-t;let a=0;return n<1&&(a=(i-n)/(1-n)),[r[0],n*100,a*100]};rr.apple.rgb=function(r){return[r[0]/65535*255,r[1]/65535*255,r[2]/65535*255]};rr.rgb.apple=function(r){return[r[0]/255*65535,r[1]/255*65535,r[2]/255*65535]};rr.gray.rgb=function(r){return[r[0]/100*255,r[0]/100*255,r[0]/100*255]};rr.gray.hsl=function(r){return[0,0,r[0]]};rr.gray.hsv=rr.gray.hsl;rr.gray.hwb=function(r){return[0,100,r[0]]};rr.gray.cmyk=function(r){return[0,0,0,r[0]]};rr.gray.lab=function(r){return[r[0],0,0]};rr.gray.hex=function(r){const t=Math.round(r[0]/100*255)&255,i=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(i.length)+i};rr.rgb.gray=function(r){return[(r[0]+r[1]+r[2])/3/255*100]};const Ti=Wo;function Qc(){const r={},t=Object.keys(Ti);for(let s=t.length,i=0;i<s;i++)r[t[i]]={distance:-1,parent:null};return r}function Wc(r){const t=Qc(),s=[r];for(t[r].distance=0;s.length;){const i=s.pop(),n=Object.keys(Ti[i]);for(let a=n.length,e=0;e<a;e++){const p=n[e],b=t[p];b.distance===-1&&(b.distance=t[i].distance+1,b.parent=i,s.unshift(p))}}return t}function Yc(r,t){return function(s){return t(r(s))}}function Uc(r,t){const s=[t[r].parent,r];let i=Ti[t[r].parent][r],n=t[r].parent;for(;t[n].parent;)s.unshift(t[n].parent),i=Yc(Ti[t[n].parent][n],i),n=t[n].parent;return i.conversion=s,i}var Vc=function(r){const t=Wc(r),s={},i=Object.keys(t);for(let n=i.length,a=0;a<n;a++){const e=i[a];t[e].parent!==null&&(s[e]=Uc(e,t))}return s};const Ws=Wo,Xc=Vc,On={},Kc=Object.keys(Ws);function Zc(r){const t=function(...s){const i=s[0];return i==null?i:(i.length>1&&(s=i),r(s))};return"conversion"in r&&(t.conversion=r.conversion),t}function Jc(r){const t=function(...s){const i=s[0];if(i==null)return i;i.length>1&&(s=i);const n=r(s);if(typeof n=="object")for(let a=n.length,e=0;e<a;e++)n[e]=Math.round(n[e]);return n};return"conversion"in r&&(t.conversion=r.conversion),t}Kc.forEach(r=>{On[r]={},Object.defineProperty(On[r],"channels",{value:Ws[r].channels}),Object.defineProperty(On[r],"labels",{value:Ws[r].labels});const t=Xc(r);Object.keys(t).forEach(i=>{const n=t[i];On[r][i]=Jc(n),On[r][i].raw=Zc(n)})});var ef=On;const Rn=Gc,zt=ef,Yo=["keyword","gray","hex"],Ys={};for(const r of Object.keys(zt))Ys[[...zt[r].labels].sort().join("")]=r;const Pi={};function Ct(r,t){if(!(this instanceof Ct))return new Ct(r,t);if(t&&t in Yo&&(t=null),t&&!(t in zt))throw new Error("Unknown model: "+t);let s,i;if(r==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(r instanceof Ct)this.model=r.model,this.color=[...r.color],this.valpha=r.valpha;else if(typeof r=="string"){const n=Rn.get(r);if(n===null)throw new Error("Unable to parse color from string: "+r);this.model=n.model,i=zt[this.model].channels,this.color=n.value.slice(0,i),this.valpha=typeof n.value[i]=="number"?n.value[i]:1}else if(r.length>0){this.model=t||"rgb",i=zt[this.model].channels;const n=Array.prototype.slice.call(r,0,i);this.color=Us(n,i),this.valpha=typeof r[i]=="number"?r[i]:1}else if(typeof r=="number")this.model="rgb",this.color=[r>>16&255,r>>8&255,r&255],this.valpha=1;else{this.valpha=1;const n=Object.keys(r);"alpha"in r&&(n.splice(n.indexOf("alpha"),1),this.valpha=typeof r.alpha=="number"?r.alpha:0);const a=n.sort().join("");if(!(a in Ys))throw new Error("Unable to parse color from object: "+JSON.stringify(r));this.model=Ys[a];const{labels:e}=zt[this.model],p=[];for(s=0;s<e.length;s++)p.push(r[e[s]]);this.color=Us(p)}if(Pi[this.model])for(i=zt[this.model].channels,s=0;s<i;s++){const n=Pi[this.model][s];n&&(this.color[s]=n(this.color[s]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}Ct.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(r){let t=this.model in Rn.to?this:this.rgb();t=t.round(typeof r=="number"?r:1);const s=t.valpha===1?t.color:[...t.color,this.valpha];return Rn.to[t.model](s)},percentString(r){const t=this.rgb().round(typeof r=="number"?r:1),s=t.valpha===1?t.color:[...t.color,this.valpha];return Rn.to.rgb.percent(s)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const r={},{channels:t}=zt[this.model],{labels:s}=zt[this.model];for(let i=0;i<t;i++)r[s[i]]=this.color[i];return this.valpha!==1&&(r.alpha=this.valpha),r},unitArray(){const r=this.rgb().color;return r[0]/=255,r[1]/=255,r[2]/=255,this.valpha!==1&&r.push(this.valpha),r},unitObject(){const r=this.rgb().object();return r.r/=255,r.g/=255,r.b/=255,this.valpha!==1&&(r.alpha=this.valpha),r},round(r){return r=Math.max(r||0,0),new Ct([...this.color.map(tf(r)),this.valpha],this.model)},alpha(r){return r!==void 0?new Ct([...this.color,Math.max(0,Math.min(1,r))],this.model):this.valpha},red:ct("rgb",0,yt(255)),green:ct("rgb",1,yt(255)),blue:ct("rgb",2,yt(255)),hue:ct(["hsl","hsv","hsl","hwb","hcg"],0,r=>(r%360+360)%360),saturationl:ct("hsl",1,yt(100)),lightness:ct("hsl",2,yt(100)),saturationv:ct("hsv",1,yt(100)),value:ct("hsv",2,yt(100)),chroma:ct("hcg",1,yt(100)),gray:ct("hcg",2,yt(100)),white:ct("hwb",1,yt(100)),wblack:ct("hwb",2,yt(100)),cyan:ct("cmyk",0,yt(100)),magenta:ct("cmyk",1,yt(100)),yellow:ct("cmyk",2,yt(100)),black:ct("cmyk",3,yt(100)),x:ct("xyz",0,yt(95.047)),y:ct("xyz",1,yt(100)),z:ct("xyz",2,yt(108.833)),l:ct("lab",0,yt(100)),a:ct("lab",1),b:ct("lab",2),keyword(r){return r!==void 0?new Ct(r):zt[this.model].keyword(this.color)},hex(r){return r!==void 0?new Ct(r):Rn.to.hex(this.rgb().round().color)},hexa(r){if(r!==void 0)return new Ct(r);const t=this.rgb().round().color;let s=Math.round(this.valpha*255).toString(16).toUpperCase();return s.length===1&&(s="0"+s),Rn.to.hex(t)+s},rgbNumber(){const r=this.rgb().color;return(r[0]&255)<<16|(r[1]&255)<<8|r[2]&255},luminosity(){const r=this.rgb().color,t=[];for(const[s,i]of r.entries()){const n=i/255;t[s]=n<=.04045?n/12.92:((n+.055)/1.055)**2.4}return .2126*t[0]+.7152*t[1]+.0722*t[2]},contrast(r){const t=this.luminosity(),s=r.luminosity();return t>s?(t+.05)/(s+.05):(s+.05)/(t+.05)},level(r){const t=this.contrast(r);return t>=7?"AAA":t>=4.5?"AA":""},isDark(){const r=this.rgb().color;return(r[0]*2126+r[1]*7152+r[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const r=this.rgb();for(let t=0;t<3;t++)r.color[t]=255-r.color[t];return r},lighten(r){const t=this.hsl();return t.color[2]+=t.color[2]*r,t},darken(r){const t=this.hsl();return t.color[2]-=t.color[2]*r,t},saturate(r){const t=this.hsl();return t.color[1]+=t.color[1]*r,t},desaturate(r){const t=this.hsl();return t.color[1]-=t.color[1]*r,t},whiten(r){const t=this.hwb();return t.color[1]+=t.color[1]*r,t},blacken(r){const t=this.hwb();return t.color[2]+=t.color[2]*r,t},grayscale(){const r=this.rgb().color,t=r[0]*.3+r[1]*.59+r[2]*.11;return Ct.rgb(t,t,t)},fade(r){return this.alpha(this.valpha-this.valpha*r)},opaquer(r){return this.alpha(this.valpha+this.valpha*r)},rotate(r){const t=this.hsl();let s=t.color[0];return s=(s+r)%360,s=s<0?360+s:s,t.color[0]=s,t},mix(r,t){if(!r||!r.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof r);const s=r.rgb(),i=this.rgb(),n=t===void 0?.5:t,a=2*n-1,e=s.alpha()-i.alpha(),p=((a*e===-1?a:(a+e)/(1+a*e))+1)/2,b=1-p;return Ct.rgb(p*s.red()+b*i.red(),p*s.green()+b*i.green(),p*s.blue()+b*i.blue(),s.alpha()*n+i.alpha()*(1-n))}};for(const r of Object.keys(zt)){if(Yo.includes(r))continue;const{channels:t}=zt[r];Ct.prototype[r]=function(...s){return this.model===r?new Ct(this):s.length>0?new Ct(s,r):new Ct([...nf(zt[this.model][r].raw(this.color)),this.valpha],r)},Ct[r]=function(...s){let i=s[0];return typeof i=="number"&&(i=Us(s,t)),new Ct(i,r)}}function rf(r,t){return Number(r.toFixed(t))}function tf(r){return function(t){return rf(t,r)}}function ct(r,t,s){r=Array.isArray(r)?r:[r];for(const i of r)(Pi[i]||(Pi[i]=[]))[t]=s;return r=r[0],function(i){let n;return i!==void 0?(s&&(i=s(i)),n=this[r](),n.color[t]=i,n):(n=this[r]().color[t],s&&(n=s(n)),n)}}function yt(r){return function(t){return Math.max(0,Math.min(r,t))}}function nf(r){return Array.isArray(r)?r:[r]}function Us(r,t){for(let s=0;s<t;s++)typeof r[s]!="number"&&(r[s]=0);return r}var sf=Ct;const Ge=zi(sf),af={substitutecolormodel:{signature:"m m",renderInfo:{breakAround:!0}},selectcolormodel:{signature:"m",renderInfo:{breakAround:!0}},definecolor:{signature:"o m m m",renderInfo:{breakAround:!0}},providecolor:{signature:"o m m m",renderInfo:{breakAround:!0}},colorlet:{signature:"o m o m",renderInfo:{breakAround:!0}},definecolorset:{signature:"o m m m",renderInfo:{breakAround:!0}},providecolorset:{signature:"o m m m m",renderInfo:{breakAround:!0}},preparecolor:{signature:"o m m m",renderInfo:{breakAround:!0}},preparecolorset:{signature:"o m m m m",renderInfo:{breakAround:!0}},DefineNamedColor:{signature:"m m m m",renderInfo:{breakAround:!0}},definecolors:{signature:"m",renderInfo:{breakAround:!0}},providecolors:{signature:"m",renderInfo:{breakAround:!0}},color:{signature:"o m",renderInfo:{breakAround:!0}},textcolor:{signature:"o m m",renderInfo:{inParMode:!0}},pagecolor:{signature:"o m"},colorbox:{signature:"o m m"},fcolorbox:{signature:"o m o m m"},boxframe:{signature:"o m"},testcolor:{signature:"o m"},blendcolors:{signature:"s m"},maskcolors:{signature:"o m"},definecolorseries:{signature:"m m m o m o m",renderInfo:{breakAround:!0}},resetcolorseries:{signature:"o m",renderInfo:{breakAround:!0}},rowcolors:{signature:"s o m m m"},extractcolorspec:{signature:"m m"},extractcolorspecs:{signature:"m m m"},convertcolorspec:{signature:"m m m m"}},of={testcolors:{signature:"o",renderInfo:{pgfkeysArgs:!0}}},x=([r,t,s])=>Ge([r*255,t*255,s*255],"rgb"),lf={Apricot:Ge("#FBB982"),Aquamarine:Ge("#00B5BE"),Bittersweet:Ge("#C04F17"),Black:Ge("#221E1F"),Blue:Ge("#2D2F92"),BlueGreen:Ge("#00B3B8"),BlueViolet:Ge("#473992"),BrickRed:Ge("#B6321C"),Brown:Ge("#792500"),BurntOrange:Ge("#F7921D"),CadetBlue:Ge("#74729A"),CarnationPink:Ge("#F282B4"),Cerulean:Ge("#00A2E3"),CornflowerBlue:Ge("#41B0E4"),Cyan:Ge("#00AEEF"),Dandelion:Ge("#FDBC42"),DarkOrchid:Ge("#A4538A"),Emerald:Ge("#00A99D"),ForestGreen:Ge("#009B55"),Fuchsia:Ge("#8C368C"),Goldenrod:Ge("#FFDF42"),Gray:Ge("#949698"),Green:Ge("#00A64F"),GreenYellow:Ge("#DFE674"),JungleGreen:Ge("#00A99A"),Lavender:Ge("#F49EC4"),LimeGreen:Ge("#8DC73E"),Magenta:Ge("#EC008C"),Mahogany:Ge("#A9341F"),Maroon:Ge("#AF3235"),Melon:Ge("#F89E7B"),MidnightBlue:Ge("#006795"),Mulberry:Ge("#A93C93"),NavyBlue:Ge("#006EB8"),OliveGreen:Ge("#3C8031"),Orange:Ge("#F58137"),OrangeRed:Ge("#ED135A"),Orchid:Ge("#AF72B0"),Peach:Ge("#F7965A"),Periwinkle:Ge("#7977B8"),PineGreen:Ge("#008B72"),Plum:Ge("#92268F"),ProcessBlue:Ge("#00B0F0"),Purple:Ge("#99479B"),RawSienna:Ge("#974006"),Red:Ge("#ED1B23"),RedOrange:Ge("#F26035"),RedViolet:Ge("#A1246B"),Rhodamine:Ge("#EF559F"),RoyalBlue:Ge("#0071BC"),RoyalPurple:Ge("#613F99"),RubineRed:Ge("#ED017D"),Salmon:Ge("#F69289"),SeaGreen:Ge("#3FBC9D"),Sepia:Ge("#671800"),SkyBlue:Ge("#46C5DD"),SpringGreen:Ge("#C6DC67"),Tan:Ge("#DA9D76"),TealBlue:Ge("#00AEB3"),Thistle:Ge("#D883B7"),Turquoise:Ge("#00B4CE"),Violet:Ge("#58429B"),VioletRed:Ge("#EF58A0"),White:Ge("#FFFFFF"),WildStrawberry:Ge("#EE2967"),Yellow:Ge("#FFF200"),YellowGreen:Ge("#98CC70"),YellowOrange:Ge("#FAA21A")},uf={AliceBlue:x([.94,.972,1]),AntiqueWhite:x([.98,.92,.844]),Aqua:x([0,1,1]),Aquamarine:x([.498,1,.83]),Azure:x([.94,1,1]),Beige:x([.96,.96,.864]),Bisque:x([1,.894,.77]),Black:x([0,0,0]),BlanchedAlmond:x([1,.92,.804]),Blue:x([0,0,1]),BlueViolet:x([.54,.17,.888]),Brown:x([.648,.165,.165]),BurlyWood:x([.87,.72,.53]),CadetBlue:x([.372,.62,.628]),Chartreuse:x([.498,1,0]),Chocolate:x([.824,.41,.116]),Coral:x([1,.498,.312]),CornflowerBlue:x([.392,.585,.93]),Cornsilk:x([1,.972,.864]),Crimson:x([.864,.08,.235]),Cyan:x([0,1,1]),DarkBlue:x([0,0,.545]),DarkCyan:x([0,.545,.545]),DarkGoldenrod:x([.72,.525,.044]),DarkGray:x([.664,.664,.664]),DarkGreen:x([0,.392,0]),DarkGrey:x([.664,.664,.664]),DarkKhaki:x([.74,.716,.42]),DarkMagenta:x([.545,0,.545]),DarkOliveGreen:x([.332,.42,.185]),DarkOrange:x([1,.55,0]),DarkOrchid:x([.6,.196,.8]),DarkRed:x([.545,0,0]),DarkSalmon:x([.912,.59,.48]),DarkSeaGreen:x([.56,.736,.56]),DarkSlateBlue:x([.284,.24,.545]),DarkSlateGray:x([.185,.31,.31]),DarkSlateGrey:x([.185,.31,.31]),DarkTurquoise:x([0,.808,.82]),DarkViolet:x([.58,0,.828]),DeepPink:x([1,.08,.576]),DeepSkyBlue:x([0,.75,1]),DimGray:x([.41,.41,.41]),DimGrey:x([.41,.41,.41]),DodgerBlue:x([.116,.565,1]),FireBrick:x([.698,.132,.132]),FloralWhite:x([1,.98,.94]),ForestGreen:x([.132,.545,.132]),Fuchsia:x([1,0,1]),Gainsboro:x([.864,.864,.864]),GhostWhite:x([.972,.972,1]),Gold:x([1,.844,0]),Goldenrod:x([.855,.648,.125]),Gray:x([.5,.5,.5]),Green:x([0,.5,0]),GreenYellow:x([.68,1,.185]),Grey:x([.5,.5,.5]),Honeydew:x([.94,1,.94]),HotPink:x([1,.41,.705]),IndianRed:x([.804,.36,.36]),Indigo:x([.294,0,.51]),Ivory:x([1,1,.94]),Khaki:x([.94,.9,.55]),Lavender:x([.9,.9,.98]),LavenderBlush:x([1,.94,.96]),LawnGreen:x([.488,.99,0]),LemonChiffon:x([1,.98,.804]),LightBlue:x([.68,.848,.9]),LightCoral:x([.94,.5,.5]),LightCyan:x([.88,1,1]),LightGoldenrod:x([.933,.867,.51]),LightGoldenrodYellow:x([.98,.98,.824]),LightGray:x([.828,.828,.828]),LightGreen:x([.565,.932,.565]),LightGrey:x([.828,.828,.828]),LightPink:x([1,.712,.756]),LightSalmon:x([1,.628,.48]),LightSeaGreen:x([.125,.698,.668]),LightSkyBlue:x([.53,.808,.98]),LightSlateBlue:x([.518,.44,1]),LightSlateGray:x([.468,.532,.6]),LightSlateGrey:x([.468,.532,.6]),LightSteelBlue:x([.69,.77,.87]),LightYellow:x([1,1,.88]),Lime:x([0,1,0]),LimeGreen:x([.196,.804,.196]),Linen:x([.98,.94,.9]),Magenta:x([1,0,1]),Maroon:x([.5,0,0]),MediumAquamarine:x([.4,.804,.668]),MediumBlue:x([0,0,.804]),MediumOrchid:x([.73,.332,.828]),MediumPurple:x([.576,.44,.86]),MediumSeaGreen:x([.235,.7,.444]),MediumSlateBlue:x([.484,.408,.932]),MediumSpringGreen:x([0,.98,.604]),MediumTurquoise:x([.284,.82,.8]),MediumVioletRed:x([.78,.084,.52]),MidnightBlue:x([.098,.098,.44]),MintCream:x([.96,1,.98]),MistyRose:x([1,.894,.884]),Moccasin:x([1,.894,.71]),NavajoWhite:x([1,.87,.68]),Navy:x([0,0,.5]),NavyBlue:x([0,0,.5]),OldLace:x([.992,.96,.9]),Olive:x([.5,.5,0]),OliveDrab:x([.42,.556,.136]),Orange:x([1,.648,0]),OrangeRed:x([1,.27,0]),Orchid:x([.855,.44,.84]),PaleGoldenrod:x([.932,.91,.668]),PaleGreen:x([.596,.985,.596]),PaleTurquoise:x([.688,.932,.932]),PaleVioletRed:x([.86,.44,.576]),PapayaWhip:x([1,.936,.835]),PeachPuff:x([1,.855,.725]),Peru:x([.804,.52,.248]),Pink:x([1,.752,.796]),Plum:x([.868,.628,.868]),PowderBlue:x([.69,.88,.9]),Purple:x([.5,0,.5]),Red:x([1,0,0]),RosyBrown:x([.736,.56,.56]),RoyalBlue:x([.255,.41,.884]),SaddleBrown:x([.545,.27,.075]),Salmon:x([.98,.5,.448]),SandyBrown:x([.956,.644,.376]),SeaGreen:x([.18,.545,.34]),Seashell:x([1,.96,.932]),Sienna:x([.628,.32,.176]),Silver:x([.752,.752,.752]),SkyBlue:x([.53,.808,.92]),SlateBlue:x([.415,.352,.804]),SlateGray:x([.44,.5,.565]),SlateGrey:x([.44,.5,.565]),Snow:x([1,.98,.98]),SpringGreen:x([0,1,.498]),SteelBlue:x([.275,.51,.705]),Tan:x([.824,.705,.55]),Teal:x([0,.5,.5]),Thistle:x([.848,.75,.848]),Tomato:x([1,.39,.28]),Turquoise:x([.25,.88,.815]),Violet:x([.932,.51,.932]),VioletRed:x([.816,.125,.565]),Wheat:x([.96,.87,.7]),White:x([1,1,1]),WhiteSmoke:x([.96,.96,.96]),Yellow:x([1,1,0]),YellowGreen:x([.604,.804,.196])},cf={AntiqueWhite1:x([1,.936,.86]),AntiqueWhite2:x([.932,.875,.8]),AntiqueWhite3:x([.804,.752,.69]),AntiqueWhite4:x([.545,.512,.47]),Aquamarine1:x([.498,1,.83]),Aquamarine2:x([.464,.932,.776]),Aquamarine3:x([.4,.804,.668]),Aquamarine4:x([.27,.545,.455]),Azure1:x([.94,1,1]),Azure2:x([.88,.932,.932]),Azure3:x([.756,.804,.804]),Azure4:x([.512,.545,.545]),Bisque1:x([1,.894,.77]),Bisque2:x([.932,.835,.716]),Bisque3:x([.804,.716,.62]),Bisque4:x([.545,.49,.42]),Blue1:x([0,0,1]),Blue2:x([0,0,.932]),Blue3:x([0,0,.804]),Blue4:x([0,0,.545]),Brown1:x([1,.25,.25]),Brown2:x([.932,.23,.23]),Brown3:x([.804,.2,.2]),Brown4:x([.545,.136,.136]),Burlywood1:x([1,.828,.608]),Burlywood2:x([.932,.772,.57]),Burlywood3:x([.804,.668,.49]),Burlywood4:x([.545,.45,.332]),CadetBlue1:x([.596,.96,1]),CadetBlue2:x([.556,.898,.932]),CadetBlue3:x([.48,.772,.804]),CadetBlue4:x([.325,.525,.545]),Chartreuse1:x([.498,1,0]),Chartreuse2:x([.464,.932,0]),Chartreuse3:x([.4,.804,0]),Chartreuse4:x([.27,.545,0]),Chocolate1:x([1,.498,.14]),Chocolate2:x([.932,.464,.13]),Chocolate3:x([.804,.4,.112]),Chocolate4:x([.545,.27,.075]),Coral1:x([1,.448,.336]),Coral2:x([.932,.415,.312]),Coral3:x([.804,.356,.27]),Coral4:x([.545,.244,.185]),Cornsilk1:x([1,.972,.864]),Cornsilk2:x([.932,.91,.804]),Cornsilk3:x([.804,.785,.694]),Cornsilk4:x([.545,.532,.47]),Cyan1:x([0,1,1]),Cyan2:x([0,.932,.932]),Cyan3:x([0,.804,.804]),Cyan4:x([0,.545,.545]),DarkGoldenrod1:x([1,.725,.06]),DarkGoldenrod2:x([.932,.68,.055]),DarkGoldenrod3:x([.804,.585,.048]),DarkGoldenrod4:x([.545,.396,.03]),DarkOliveGreen1:x([.792,1,.44]),DarkOliveGreen2:x([.736,.932,.408]),DarkOliveGreen3:x([.635,.804,.352]),DarkOliveGreen4:x([.43,.545,.24]),DarkOrange1:x([1,.498,0]),DarkOrange2:x([.932,.464,0]),DarkOrange3:x([.804,.4,0]),DarkOrange4:x([.545,.27,0]),DarkOrchid1:x([.75,.244,1]),DarkOrchid2:x([.698,.228,.932]),DarkOrchid3:x([.604,.196,.804]),DarkOrchid4:x([.408,.132,.545]),DarkSeaGreen1:x([.756,1,.756]),DarkSeaGreen2:x([.705,.932,.705]),DarkSeaGreen3:x([.608,.804,.608]),DarkSeaGreen4:x([.41,.545,.41]),DarkSlateGray1:x([.592,1,1]),DarkSlateGray2:x([.552,.932,.932]),DarkSlateGray3:x([.475,.804,.804]),DarkSlateGray4:x([.32,.545,.545]),DeepPink1:x([1,.08,.576]),DeepPink2:x([.932,.07,.536]),DeepPink3:x([.804,.064,.464]),DeepPink4:x([.545,.04,.312]),DeepSkyBlue1:x([0,.75,1]),DeepSkyBlue2:x([0,.698,.932]),DeepSkyBlue3:x([0,.604,.804]),DeepSkyBlue4:x([0,.408,.545]),DodgerBlue1:x([.116,.565,1]),DodgerBlue2:x([.11,.525,.932]),DodgerBlue3:x([.094,.455,.804]),DodgerBlue4:x([.064,.305,.545]),Firebrick1:x([1,.19,.19]),Firebrick2:x([.932,.172,.172]),Firebrick3:x([.804,.15,.15]),Firebrick4:x([.545,.1,.1]),Gold1:x([1,.844,0]),Gold2:x([.932,.79,0]),Gold3:x([.804,.68,0]),Gold4:x([.545,.46,0]),Goldenrod1:x([1,.756,.145]),Goldenrod2:x([.932,.705,.132]),Goldenrod3:x([.804,.608,.112]),Goldenrod4:x([.545,.41,.08]),Green1:x([0,1,0]),Green2:x([0,.932,0]),Green3:x([0,.804,0]),Green4:x([0,.545,0]),Honeydew1:x([.94,1,.94]),Honeydew2:x([.88,.932,.88]),Honeydew3:x([.756,.804,.756]),Honeydew4:x([.512,.545,.512]),HotPink1:x([1,.43,.705]),HotPink2:x([.932,.415,.655]),HotPink3:x([.804,.376,.565]),HotPink4:x([.545,.228,.385]),IndianRed1:x([1,.415,.415]),IndianRed2:x([.932,.39,.39]),IndianRed3:x([.804,.332,.332]),IndianRed4:x([.545,.228,.228]),Ivory1:x([1,1,.94]),Ivory2:x([.932,.932,.88]),Ivory3:x([.804,.804,.756]),Ivory4:x([.545,.545,.512]),Khaki1:x([1,.965,.56]),Khaki2:x([.932,.9,.52]),Khaki3:x([.804,.776,.45]),Khaki4:x([.545,.525,.305]),LavenderBlush1:x([1,.94,.96]),LavenderBlush2:x([.932,.88,.898]),LavenderBlush3:x([.804,.756,.772]),LavenderBlush4:x([.545,.512,.525]),LemonChiffon1:x([1,.98,.804]),LemonChiffon2:x([.932,.912,.75]),LemonChiffon3:x([.804,.79,.648]),LemonChiffon4:x([.545,.536,.44]),LightBlue1:x([.75,.936,1]),LightBlue2:x([.698,.875,.932]),LightBlue3:x([.604,.752,.804]),LightBlue4:x([.408,.512,.545]),LightCyan1:x([.88,1,1]),LightCyan2:x([.82,.932,.932]),LightCyan3:x([.705,.804,.804]),LightCyan4:x([.48,.545,.545]),LightGoldenrod1:x([1,.925,.545]),LightGoldenrod2:x([.932,.864,.51]),LightGoldenrod3:x([.804,.745,.44]),LightGoldenrod4:x([.545,.505,.298]),LightPink1:x([1,.684,.725]),LightPink2:x([.932,.635,.68]),LightPink3:x([.804,.55,.585]),LightPink4:x([.545,.372,.396]),LightSalmon1:x([1,.628,.48]),LightSalmon2:x([.932,.585,.448]),LightSalmon3:x([.804,.505,.385]),LightSalmon4:x([.545,.34,.26]),LightSkyBlue1:x([.69,.888,1]),LightSkyBlue2:x([.644,.828,.932]),LightSkyBlue3:x([.552,.712,.804]),LightSkyBlue4:x([.376,.484,.545]),LightSteelBlue1:x([.792,.884,1]),LightSteelBlue2:x([.736,.824,.932]),LightSteelBlue3:x([.635,.71,.804]),LightSteelBlue4:x([.43,.484,.545]),LightYellow1:x([1,1,.88]),LightYellow2:x([.932,.932,.82]),LightYellow3:x([.804,.804,.705]),LightYellow4:x([.545,.545,.48]),Magenta1:x([1,0,1]),Magenta2:x([.932,0,.932]),Magenta3:x([.804,0,.804]),Magenta4:x([.545,0,.545]),Maroon1:x([1,.204,.7]),Maroon2:x([.932,.19,.655]),Maroon3:x([.804,.16,.565]),Maroon4:x([.545,.11,.385]),MediumOrchid1:x([.88,.4,1]),MediumOrchid2:x([.82,.372,.932]),MediumOrchid3:x([.705,.32,.804]),MediumOrchid4:x([.48,.215,.545]),MediumPurple1:x([.67,.51,1]),MediumPurple2:x([.624,.475,.932]),MediumPurple3:x([.536,.408,.804]),MediumPurple4:x([.365,.28,.545]),MistyRose1:x([1,.894,.884]),MistyRose2:x([.932,.835,.824]),MistyRose3:x([.804,.716,.71]),MistyRose4:x([.545,.49,.484]),NavajoWhite1:x([1,.87,.68]),NavajoWhite2:x([.932,.81,.63]),NavajoWhite3:x([.804,.7,.545]),NavajoWhite4:x([.545,.475,.37]),OliveDrab1:x([.752,1,.244]),OliveDrab2:x([.7,.932,.228]),OliveDrab3:x([.604,.804,.196]),OliveDrab4:x([.41,.545,.132]),Orange1:x([1,.648,0]),Orange2:x([.932,.604,0]),Orange3:x([.804,.52,0]),Orange4:x([.545,.352,0]),OrangeRed1:x([1,.27,0]),OrangeRed2:x([.932,.25,0]),OrangeRed3:x([.804,.215,0]),OrangeRed4:x([.545,.145,0]),Orchid1:x([1,.512,.98]),Orchid2:x([.932,.48,.912]),Orchid3:x([.804,.41,.79]),Orchid4:x([.545,.28,.536]),PaleGreen1:x([.604,1,.604]),PaleGreen2:x([.565,.932,.565]),PaleGreen3:x([.488,.804,.488]),PaleGreen4:x([.33,.545,.33]),PaleTurquoise1:x([.732,1,1]),PaleTurquoise2:x([.684,.932,.932]),PaleTurquoise3:x([.59,.804,.804]),PaleTurquoise4:x([.4,.545,.545]),PaleVioletRed1:x([1,.51,.67]),PaleVioletRed2:x([.932,.475,.624]),PaleVioletRed3:x([.804,.408,.536]),PaleVioletRed4:x([.545,.28,.365]),PeachPuff1:x([1,.855,.725]),PeachPuff2:x([.932,.796,.68]),PeachPuff3:x([.804,.688,.585]),PeachPuff4:x([.545,.468,.396]),Pink1:x([1,.71,.772]),Pink2:x([.932,.664,.72]),Pink3:x([.804,.57,.62]),Pink4:x([.545,.39,.424]),Plum1:x([1,.732,1]),Plum2:x([.932,.684,.932]),Plum3:x([.804,.59,.804]),Plum4:x([.545,.4,.545]),Purple1:x([.608,.19,1]),Purple2:x([.57,.172,.932]),Purple3:x([.49,.15,.804]),Purple4:x([.332,.1,.545]),Red1:x([1,0,0]),Red2:x([.932,0,0]),Red3:x([.804,0,0]),Red4:x([.545,0,0]),RosyBrown1:x([1,.756,.756]),RosyBrown2:x([.932,.705,.705]),RosyBrown3:x([.804,.608,.608]),RosyBrown4:x([.545,.41,.41]),RoyalBlue1:x([.284,.464,1]),RoyalBlue2:x([.264,.43,.932]),RoyalBlue3:x([.228,.372,.804]),RoyalBlue4:x([.152,.25,.545]),Salmon1:x([1,.55,.41]),Salmon2:x([.932,.51,.385]),Salmon3:x([.804,.44,.33]),Salmon4:x([.545,.298,.224]),SeaGreen1:x([.33,1,.624]),SeaGreen2:x([.305,.932,.58]),SeaGreen3:x([.264,.804,.5]),SeaGreen4:x([.18,.545,.34]),Seashell1:x([1,.96,.932]),Seashell2:x([.932,.898,.87]),Seashell3:x([.804,.772,.75]),Seashell4:x([.545,.525,.51]),Sienna1:x([1,.51,.28]),Sienna2:x([.932,.475,.26]),Sienna3:x([.804,.408,.224]),Sienna4:x([.545,.28,.15]),SkyBlue1:x([.53,.808,1]),SkyBlue2:x([.494,.752,.932]),SkyBlue3:x([.424,.65,.804]),SkyBlue4:x([.29,.44,.545]),SlateBlue1:x([.512,.435,1]),SlateBlue2:x([.48,.404,.932]),SlateBlue3:x([.41,.35,.804]),SlateBlue4:x([.28,.235,.545]),SlateGray1:x([.776,.888,1]),SlateGray2:x([.725,.828,.932]),SlateGray3:x([.624,.712,.804]),SlateGray4:x([.424,.484,.545]),Snow1:x([1,.98,.98]),Snow2:x([.932,.912,.912]),Snow3:x([.804,.79,.79]),Snow4:x([.545,.536,.536]),SpringGreen1:x([0,1,.498]),SpringGreen2:x([0,.932,.464]),SpringGreen3:x([0,.804,.4]),SpringGreen4:x([0,.545,.27]),SteelBlue1:x([.39,.72,1]),SteelBlue2:x([.36,.675,.932]),SteelBlue3:x([.31,.58,.804]),SteelBlue4:x([.21,.392,.545]),Tan1:x([1,.648,.31]),Tan2:x([.932,.604,.288]),Tan3:x([.804,.52,.248]),Tan4:x([.545,.352,.17]),Thistle1:x([1,.884,1]),Thistle2:x([.932,.824,.932]),Thistle3:x([.804,.71,.804]),Thistle4:x([.545,.484,.545]),Tomato1:x([1,.39,.28]),Tomato2:x([.932,.36,.26]),Tomato3:x([.804,.31,.224]),Tomato4:x([.545,.21,.15]),Turquoise1:x([0,.96,1]),Turquoise2:x([0,.898,.932]),Turquoise3:x([0,.772,.804]),Turquoise4:x([0,.525,.545]),VioletRed1:x([1,.244,.59]),VioletRed2:x([.932,.228,.55]),VioletRed3:x([.804,.196,.47]),VioletRed4:x([.545,.132,.32]),Wheat1:x([1,.905,.73]),Wheat2:x([.932,.848,.684]),Wheat3:x([.804,.73,.59]),Wheat4:x([.545,.494,.4]),Yellow1:x([1,1,0]),Yellow2:x([.932,.932,0]),Yellow3:x([.804,.804,0]),Yellow4:x([.545,.545,0]),Gray0:x([.745,.745,.745]),Green0:x([0,1,0]),Grey0:x([.745,.745,.745]),Maroon0:x([.69,.19,.376]),Purple0:x([.628,.125,.94])},dt={rgb:([r,t,s])=>Ge([r*255,t*255,s*255],"rgb"),cmy:([r,t,s])=>dt.rgb([1-r,1-t,1-s]),cmyk:([r,t,s,i])=>Ge([r*255,t*255,s*255,i*100],"cmyk"),hsb:([r,t,s])=>Ge([r*360,t*100,s*100],"hsv"),gray:([r])=>Ge([r*255,r*255,r*255],"rgb")};({red:dt.rgb([1,0,0]),green:dt.rgb([0,1,0]),blue:dt.rgb([0,0,1]),brown:dt.rgb([.75,.5,.25]),lime:dt.rgb([.75,1,0]),orange:dt.rgb([1,.5,0]),pink:dt.rgb([1,.75,.75]),purple:dt.rgb([.75,0,.25]),teal:dt.rgb([0,.5,.5]),violet:dt.rgb([.5,0,.5]),cyan:dt.rgb([0,1,1]),magenta:dt.rgb([1,0,1]),yellow:dt.rgb([1,1,0]),olive:dt.rgb([.5,.5,0]),black:dt.rgb([0,0,0]),darkgray:dt.rgb([.25,.25,.25]),gray:dt.rgb([.5,.5,.5]),lightgray:dt.rgb([.75,.75,.75]),white:dt.rgb([1,1,1]),...lf,...uf,...cf});const ff={NewDocumentCommand:{signature:"m m m",renderInfo:{breakAround:!0}},RenewDocumentCommand:{signature:"m m m",renderInfo:{breakAround:!0}},ProvideDocumentCommand:{signature:"m m m",renderInfo:{breakAround:!0}},DeclareDocumentCommand:{signature:"m m m",renderInfo:{breakAround:!0}},NewDocumentEnvironment:{signature:"m m m m",renderInfo:{breakAround:!0}},RenewDocumentEnvironment:{signature:"m m m m",renderInfo:{breakAround:!0}},ProvideDocumentEnvironment:{signature:"m m m m",renderInfo:{breakAround:!0}},DeclareDocumentEnvironment:{signature:"m m m m",renderInfo:{breakAround:!0}},NewExpandableDocumentCommand:{signature:"m m m",renderInfo:{breakAround:!0}},RenewExpandableDocumentCommand:{signature:"m m m",renderInfo:{breakAround:!0}},ProvideExpandableDocumentCommand:{signature:"m m m",renderInfo:{breakAround:!0}},DeclareExpandableDocumentCommand:{signature:"m m m",renderInfo:{breakAround:!0}},RequirePackage:{signature:"o m",renderInfo:{pgfkeysArgs:!0,breakAround:!0}},DeclareOption:{signature:"m m",renderInfo:{breakAround:!0}}},hf={},pf={mode:{signature:"s d<> d{}",renderInfo:{breakAround:!0}},insertnavigation:{signature:"m",renderInfo:{breakAround:!0}},insertsectionnavigation:{signature:"m",renderInfo:{breakAround:!0}},insertsectionnavigationhorizontal:{signature:"m m m",renderInfo:{breakAround:!0}},insertauthor:{signature:"o",renderInfo:{breakAround:!0}},insertshortauthor:{signature:"o",renderInfo:{breakAround:!0}},insertshortdate:{signature:"o",renderInfo:{breakAround:!0}},insertshortinstitute:{signature:"o",renderInfo:{breakAround:!0}},insertshortpart:{signature:"o",renderInfo:{breakAround:!0}},insertshorttitle:{signature:"o",renderInfo:{breakAround:!0}},insertsubsectionnavigation:{signature:"m",renderInfo:{breakAround:!0}},insertsubsectionnavigationhorizontal:{signature:"m m m",renderInfo:{breakAround:!0}},insertverticalnavigation:{signature:"m",renderInfo:{breakAround:!0}},usebeamercolor:{signature:"s m",renderInfo:{breakAround:!0}},usebeamertemplate:{signature:"s m",renderInfo:{breakAround:!0}},setbeamercolor:{signature:"m m",renderInfo:{breakAround:!0,pgfkeysArgs:!0}},setbeamersize:{signature:"m o o",renderInfo:{breakAround:!0,pgfkeysArgs:!0}},setbeamertemplate:{signature:"m o o d{}",renderInfo:{breakAround:!0,pgfkeysArgs:!0}},newcommand:{signature:"s d<> +m o +o +m",renderInfo:{breakAround:!0,namedArguments:["starred",null,"name","numArgs","default","body"]}},renewcommand:{signature:"s d<> +m o +o +m",renderInfo:{breakAround:!0,namedArguments:["starred",null,"name","numArgs","default","body"]}},newenvironment:{signature:"s d<> m o o m m",renderInfo:{breakAround:!0}},renewenvironment:{signature:"s d<> m o o m m",renderInfo:{breakAround:!0}},resetcounteronoverlays:{signature:"m",renderInfo:{breakAround:!0}},resetcountonoverlays:{signature:"m",renderInfo:{breakAround:!0}},logo:{signature:"m",renderInfo:{breakAround:!0}},frametitle:{signature:"d<> o m",renderInfo:{breakAround:!0}},framesubtitle:{signature:"d<> m",renderInfo:{breakAround:!0}},pause:{signature:"o"},onslide:{signature:"t+ t* d<> d{}"},only:{signature:"d<> m d<>"},uncover:{signature:"d<> m"},visible:{signature:"d<> m"},invisible:{signature:"d<> m"},alt:{signature:"d<> m m d<>"},temporal:{signature:"r<> m m m"},item:{signature:"d<> o d<>",renderInfo:{hangingIndent:!0,namedArguments:[null,"label",null]}},label:{signature:"d<> o m"},action:{signature:"d<> m"},beamerdefaultoverlayspecification:{signature:"m"},titlegraphic:{signature:"m",renderInfo:{breakAround:!0}},subject:{signature:"m",renderInfo:{breakAround:!0}},keywords:{signature:"m",renderInfo:{breakAround:!0}},lecture:{signature:"o m m",renderInfo:{breakAround:!0}},partpage:{renderInfo:{breakAround:!0}},sectionpage:{renderInfo:{breakAround:!0}},subsectionpage:{renderInfo:{breakAround:!0}},AtBeginLecture:{signature:"m",renderInfo:{breakAround:!0}},AtBeginPart:{signature:"m",renderInfo:{breakAround:!0}},tableofcontents:{signature:"o",renderInfo:{breakAround:!0,pgfkeysArgs:!0}},againframe:{signature:"d<> o o m",renderInfo:{breakAround:!0}},framezoom:{signature:"r<> r<> o r() r()",renderInfo:{breakAround:!0}},column:{signature:"d<> o m",renderInfo:{breakAround:!0}},animate:{signature:"r<>",renderInfo:{breakAround:!0}},animatevalue:{signature:"r<> m m m",renderInfo:{breakAround:!0}},sound:{signature:"o m m",renderInfo:{breakAround:!0,pgfkeysArgs:!0}},hyperlinksound:{signature:"o m m",renderInfo:{breakAround:!0,pgfkeysArgs:!0}},hyperlinkmute:{signature:"m",renderInfo:{breakAround:!0}},section:{signature:"s d<> o m",renderInfo:{breakAround:!0,namedArguments:["starred",null,"tocTitle","title"]}},subsection:{signature:"s d<> o m",renderInfo:{breakAround:!0,namedArguments:["starred",null,"tocTitle","title"]}},subsubsection:{signature:"s d<> o m",renderInfo:{breakAround:!0,namedArguments:["starred",null,"tocTitle","title"]}},part:{signature:"s d<> o m",renderInfo:{breakAround:!0,namedArguments:["starred",null,"tocTitle","title"]}},bibitem:{signature:"s d<> o m",renderInfo:{hangingIndent:!0,namedArguments:["starred",null,"tocTitle","title"]}}},gf={frame:{signature:"!d<> !o !o !d{} !d{}"},block:{signature:"!d<> !d{} !d<>"},alertblock:{signature:"!d<> !d{} !d<>"},exampleblock:{signature:"!d<> !d{} !d<>"},onlyenv:{signature:"!d<>"},altenv:{signature:"!d<> m m m m !d<>"},overlayarea:{signature:"m m"},overprint:{signature:"o"},actionenv:{signature:"!d<>"},columns:{signature:"d<> o"},column:{signature:"d<> o m"}},df={columnbreak:{renderInfo:{breakAround:!0}}},mf={multicols:{signature:"m o o"},"multicols*":{signature:"m o o"}},vf={cleveref:Pu,exam:Ju,geometry:rc,hyperref:nc,latex2e:sc,listings:bc,makeidx:Ac,mathtools:wc,minted:kc,nicematrix:Mc,systeme:Ic,tikz:Oc,xcolor:af,xparse:ff,beamer:pf,multicol:df},bf={cleveref:qu,exam:ec,geometry:tc,hyperref:ic,latex2e:ac,listings:yc,makeidx:$c,mathtools:xc,minted:Cc,nicematrix:Sc,systeme:Fc,tikz:Rc,xcolor:of,xparse:hf,beamer:gf,multicol:mf};function po(r,t){if(t.signature&&r.args==null){const{args:s}=qo(r.content,t.signature);r.args=s}Qi(r,t.renderInfo),typeof t.processContent=="function"&&(r.content=t.processContent(r.content))}function go(r,t,s){const i=[];let n={start:void 0,end:r.length};for(let a=0;a<r.length;a++){const e=r[a];t(e)&&(n.start=a),s(e)&&(n.end=a+1,i.push(n),n={start:void 0,end:r.length})}return n.start!=null&&i.push(n),i}function yf(r){const t=[...r];t.sort((p,b)=>p.start-b.start);const s=new Set(t.flatMap(p=>[p.start,p.end])),i=Array.from(s);i.sort((p,b)=>p-b);const n=[],a=[];let e=0;for(let p=0;p<i.length-1;p++){const b=i[p],v=i[p+1],$={start:b,end:v},L=new Set;let R=!1;for(let A=e;A<t.length;A++){const E=t[A];if(E.end>=$.start&&(R=!0),!R&&E.end<$.start){e=A+1;continue}if(E.start>v)break;E.start<=$.start&&E.end>=$.end&&(R=!0,L.add(E))}L.size>0&&(n.push($),a.push(L))}return{regions:n,regionsContainedIn:a}}function Af(r,t){const s=[],i=[0,r.length],n={};for(const[a,e]of Object.entries(t))i.push(...e.flatMap(p=>(n[""+[p.start,p.end]]=a,[p.start,p.end])));i.sort((a,e)=>a-e);for(let a=0;a<i.length-1;a++){const e=i[a],p=i[a+1];if(e===p)continue;const b=n[""+[e,p]];s.push([b||null,r.slice(e,p)])}return s}function $f(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function wf(r){const t=`^(${["\\p{L}"].concat(Array.from(r).map($f)).join("|")})*`;return new RegExp(t,"u")}function xf(r,t){for(let s=0;s<r.length;s++){const i=r[s],n=r[s+1];if(Ue.anyMacro(i)&&Ue.anyString(n)&&(t.has(i.content.charAt(i.content.length-1))||t.has(n.content.charAt(0))))return!0}return!1}function mo(r,t){typeof t=="string"&&(t=new Set(t.split("")));const s=t;for(const n of s)if(n.length>1)throw new Error(`Only single characters are allowed as \`allowedTokens\` when reparsing macro names, not \`${n}\`.`);let i=!1;return Sn(r,n=>{if(xf(n,s))return i=!0,Ri},{includeArrays:!0,test:Array.isArray}),i}function Ef(r,t){var s,i,n;const a=wf(t);let e=0;for(;e<r.length;){const p=r[e],b=r[e+1];if(Ue.anyMacro(p)&&(p.escapeToken==null||p.escapeToken==="\\")&&Ue.anyString(b)&&(t.has(p.content.charAt(p.content.length-1))||t.has(b.content.charAt(0)))){const v=b.content.match(a),$=v?v[0]:"";$.length>0?$.length===b.content.length?(p.content+=b.content,r.splice(e+1,1),p.position&&((s=b.position)!=null&&s.end)&&(p.position.end=b.position.end)):(p.content+=$,b.content=b.content.slice($.length),(i=p.position)!=null&&i.end&&(p.position.end.offset+=$.length,p.position.end.column+=$.length),(n=b.position)!=null&&n.start&&(b.position.start.offset+=$.length,b.position.start.column+=$.length)):e++}else++e}}function Di(r,t){typeof t=="string"&&(t=new Set(t.split("")));const s=t;for(const i of s)if(i.length>1)throw new Error(`Only single characters are allowed as \`allowedTokens\` when reparsing macro names, not \`${i}\`.`);Sn(r,i=>{Ef(i,s)},{includeArrays:!0,test:Array.isArray})}const vo={start:Ue.createMacroMatcher(["ExplSyntaxOn"]),end:Ue.createMacroMatcher(["ExplSyntaxOff"])},bo={start:Ue.createMacroMatcher(["makeatletter"]),end:Ue.createMacroMatcher(["makeatother"])};function kf(r){const t=go(r,vo.start,vo.end),s=go(r,bo.start,bo.end),i=new Map([...t.map(e=>[e,"expl"]),...s.map(e=>[e,"atLetter"])]),n=yf([...t,...s]),a={explOnly:[],atLetterOnly:[],both:[]};for(let e=0;e<n.regions.length;e++){const p=n.regions[e],b=n.regionsContainedIn[e];if(b.size===2){a.both.push(p);continue}for(const v of b.values())i.get(v)==="expl"&&a.explOnly.push(p),i.get(v)==="atLetter"&&a.atLetterOnly.push(p)}return a.explOnly=a.explOnly.filter(e=>e.end-e.start>1),a.atLetterOnly=a.atLetterOnly.filter(e=>e.end-e.start>1),a.both=a.both.filter(e=>e.end-e.start>1),a}const Cf=new Set(["@"]),Mf=new Set(["_",":"]),Sf=new Set(["_",":","@"]);function If(r){Sn(r,{leave:t=>{const s=kf(t);if(s.both.length+s.atLetterOnly.length+s.explOnly.length===0)return;const n=Af(t,s),a=[];for(const[e,p]of n)switch(e){case null:a.push(...p);continue;case"atLetterOnly":Di(p,Cf),a.push(...p);continue;case"explOnly":Di(p,Mf),a.push(...p);continue;case"both":Di(p,Sf),a.push(...p);continue;default:throw new Error(`Unexpected case when splitting ${e}`)}return t.length=0,t.push(...a),Oo}},{includeArrays:!0,test:Array.isArray})}const Uo=function(){Object.assign(this,{Compiler:t=>t})};function Ff(r){return Bo.parse(r)}function Vs(r){return Bo.parse(r,{startRule:"math"})}const _f=function(t){Object.assign(this,{Parser:i=>(t==null?void 0:t.mode)==="math"?{type:"root",content:Vs(i),_renderInfo:{inMathMode:!0}}:Ff(i)})};function Lf({mathEnvs:r,mathMacros:t}){const s=Ue.createEnvironmentMatcher(r),i=Ue.createMacroMatcher(t);return n=>{Sn(n,a=>{if(Ue.anyMacro(a))for(const e of a.args||[])e.content.length>0&&!yo(e.content)&&(e.content=Vs(hn(e.content)));Ue.anyEnvironment(a)&&(yo(a.content)||(a.content=Vs(hn(a.content))))},{test:a=>s(a)||i(a)})}}function yo(r){return!r.some(t=>Ue.anyString(t)&&t.content.length>1||Ue.string(t,"^")||Ue.string(t,"_"))}const Of=function(t){const{environments:s={},macros:i={}}=t||{},n=Object.fromEntries(Object.entries(i).filter(([v,$])=>{var L;return((L=$.renderInfo)==null?void 0:L.inMathMode)===!0})),a=Object.fromEntries(Object.entries(s).filter(([v,$])=>{var L;return((L=$.renderInfo)==null?void 0:L.inMathMode)===!0})),e=Lf({mathEnvs:Object.keys(a),mathMacros:Object.keys(n)}),p=Ue.createEnvironmentMatcher(s),b=Ue.createEnvironmentMatcher(a);return v=>{Sn(v,{enter:$=>{Array.isArray($)&&Qs($,n)},leave:$=>{if(!b($))return;const L=hn($.env),R=s[L];if(!R)throw new Error(`Could not find environment info for environment "${L}"`);po($,R)}},{includeArrays:!0}),e(v),Sn(v,{enter:$=>{Array.isArray($)&&Qs($,i)},leave:$=>{if(!p($))return;const L=hn($.env),R=s[L];if(!R)throw new Error(`Could not find environment info for environment "${L}"`);po($,R)}},{includeArrays:!0})}},Rf=function(t){let{atLetter:s=!1,expl3:i=!1,autodetectExpl3AndAtLetter:n=!1}=t||{};return a=>{If(a),(s||i)&&(n=!1),n&&(s=mo(a,"@"),i=mo(a,"_"));const e=new Set;s&&e.add("@"),i&&(e.add(":"),e.add("_")),e.size>0&&Di(a,e)}},Vo=function(t){const{mode:s="regular",macros:i={},environments:n={},flags:{atLetter:a=!1,expl3:e=!1,autodetectExpl3AndAtLetter:p=!1}={}}=t||{},b=Object.assign({},...Object.values(vf),i),v=Object.assign({},...Object.values(bf),n),$=na().use(_f,{mode:s}).use(Rf,{atLetter:a,expl3:e,autodetectExpl3AndAtLetter:p}).use(Of,{macros:b,environments:v}).use(Yu).use(Uu).use(Uo);Object.assign(this,{Parser:R=>$.processSync({value:R}).result})};na().use(Vo).freeze();function Df(r){return typeof r!="string"&&(r=hn(r)),na().use(Vo,{mode:"math"}).use(Uo).processSync({value:r}).result.content}function Tt(r){return{type:"constant",value:r}}function Bf(r){return{type:"variable",name:r}}function Tf(r){return{type:"unknown",name:r}}function ln(r,t){return{type:"unary",op:r,child:t}}function rn(r,t,s){return{type:"binary",op:r,left:t,right:s}}function gt(r,t){return{type:"nary",op:r,children:t}}const Pf=1e3;var Vr=(r=>(r[r.Minus=1e3]="Minus",r[r.Sin=1001]="Sin",r[r.Cos=1002]="Cos",r[r.Tan=1003]="Tan",r[r.Floor=1004]="Floor",r[r.Abs=1005]="Abs",r[r.Ceil=1006]="Ceil",r[r.Log=1007]="Log",r[r.Ln=1008]="Ln",r[r.Sqrt=1009]="Sqrt",r))(Vr||{}),Ir=(r=>(r[r.Add=0]="Add",r[r.Multiply=1]="Multiply",r[r.Division=2]="Division",r[r.Power=3]="Power",r[r.Equal=4]="Equal",r))(Ir||{});const qf=new Map([["+",0],["-",1e3],["?",3],["frac",2],["sin",1001],["cos",1002],["tan",1003],["floor",1004],["abs",1005],["ceil",1006],["log",1007],["ln",1008],["sqrt",1009]]),jf=new Map([[1e3,r=>-r],[1001,r=>Math.sin(r)],[1002,r=>Math.cos(r)],[1003,r=>Math.tan(r)],[1004,r=>Math.floor(r)],[1005,r=>Math.abs(r)],[1006,r=>Math.ceil(r)],[1007,r=>Math.log10(r)],[1008,r=>Math.log(r)],[1009,r=>Math.sqrt(r)]]),Ao=new Map([[0,(r,t)=>r+t],[1,(r,t)=>r*t],[2,(r,t)=>r/t],[3,(r,t)=>Math.pow(r,t)]]);function Wi(r){console.log(ri("",r,!0,`-Root
`))}function ri(r,t,s,i){i+=`${r}${s?"└──":"├──"} ${Nf(t)}
`;const n=r+(s?"    ":"|   ");switch(t.type){case"unary":i=ri(n,t.child,!0,i);break;case"binary":i=ri(n,t.left,!1,i),i=ri(n,t.right,!0,i);break;case"nary":for(let a=0;a<t.children.length;a++)i=ri(n,t.children[a],a==t.children.length-1,i);break}return i}function Nf(r){switch(r.type){case"nary":case"binary":return`${r.type}: ${Ir[r.op]}`;case"unary":return`unary: ${Vr[r.op]}`;case"constant":return`constant: ${r.value}`;case"variable":case"unknown":return`${r.type}: ${r.name}`}}function Bn(r){switch(r.type){case"unknown":return[r,void 0];case"constant":return[r,r.value];case"variable":return[r,Jo(r.name)];case"unary":const[t,s]=Bn(r.child);if(r.child=t,s!==void 0){const $=jf.get(r.op);return r=Tt($(s)),[r,$(s)]}else return[r,void 0];case"binary":const[i,n]=Bn(r.left);r.left=i;const[a,e]=Bn(r.right);if(r.right=a,n!==void 0&&e!==void 0){const $=Ao.get(r.op);return r=Tt($(n,e)),[r,$(n,e)]}else return e!==void 0&&r.op===Ir.Power?e===0?[Tt(1),1]:e===1?[r.left,void 0]:[r,void 0]:[r,void 0];case"nary":const p=r.children.flatMap($=>$.type==="nary"&&$.op===r.op?$.children:[$]).map($=>Bn($)),b=p.map($=>$[1]).filter($=>$!==void 0);let v=p.filter($=>$[1]===void 0).map($=>$[0]);if(b.length>0){const $=Ao.get(r.op),L=b.reduce((R,A,E,O)=>$(R,A));v.push(Tt(L))}return r.op===Ir.Add?v=v.filter($=>!($.type==="constant"&&$.value===0)):r.op===Ir.Multiply&&(v.some($=>$.type==="constant"&&$.value===0)&&(v=[]),v=v.filter($=>!($.type==="constant"&&$.value===1))),v.length===0?(r=Tt(0),[r,0]):v.length===1?(r=v[0],r.type==="constant"?[r,r.value]:[r,void 0]):(r=gt(r.op,v),[r,void 0])}}function ti(r,t){switch(r.type){case"unknown":return t;case"unary":const s=ti(r.child,t);return ln(r.op,s);case"binary":const i=ti(r.left,t),n=ti(r.right,t);return rn(r.op,i,n);case"nary":const a=gt(r.op,[]);for(let e of r.children)a.children.push(ti(e,t));return a;case"constant":case"variable":return r}}function Ht(r){switch(r.type){case"unknown":return Tt(1);case"constant":case"variable":return Tt(0);case"unary":return Gf(r);case"binary":switch(r.op){case Ir.Power:if(r.right.type==="constant")return gt(Ir.Multiply,[Tt(r.right.value),rn(Ir.Power,r.left,Tt(r.right.value-1)),Ht(r.left)]);{const s=gt(Ir.Add,[gt(Ir.Multiply,[Ht(r.right),ln(Vr.Ln,r.left)]),gt(Ir.Multiply,[r.right,rn(Ir.Division,Ht(r.left),r.left)])]);return gt(Ir.Multiply,[r,s])}case Ir.Division:const t=gt(Ir.Add,[gt(Ir.Multiply,[Ht(r.left),r.right]),ln(Vr.Minus,gt(Ir.Multiply,[r.left,Ht(r.right)]))]);return rn(Ir.Division,t,gt(Ir.Multiply,[r.right,r.right]));default:throw Error("You can't derive an equal sign")}case"nary":if(r.op===Ir.Add){const t=r.children.map(s=>Ht(s));return gt(r.op,t)}else if(r.op===Ir.Multiply){const t=[];for(let s=0;s<r.children.length;s++){const i=[];for(let n=0;n<r.children.length;n++)s===n?i.push(Ht(r.children[n])):i.push(r.children[n]);t.push(gt(Ir.Multiply,i))}return gt(Ir.Add,t)}else throw Error(`${r.op} is not a conmutative operation`)}}function Gf(r){switch(r.op){case Vr.Minus:return r;case Vr.Ln:return rn(Ir.Division,Ht(r.child),r.child);case Vr.Sin:return gt(Ir.Multiply,[ln(Vr.Cos,r.child),Ht(r.child)]);case Vr.Cos:return gt(Ir.Multiply,[ln(Vr.Minus,ln(Vr.Sin,r.child)),Ht(r.child)]);case Vr.Tan:return rn(Ir.Division,Tt(1),gt(Ir.Multiply,[r.child,r.child]));case Vr.Sqrt:return rn(Ir.Division,Ht(r.child),gt(Ir.Multiply,[Tt(2),ln(Vr.Sqrt,r.child)]));case Vr.Log:return rn(Ir.Division,Ht(r.child),gt(Ir.Multiply,[Tt(Math.LN10),ln(Vr.Sqrt,r.child)]));case Vr.Floor:case Vr.Abs:case Vr.Ceil:throw Error(`Function ${r.op} is not derivable in R`)}}function li(r){if(r.includes("=")){const t=r.split("=");if(t.length>2)throw Error("There can't be more than one equal sign");const s=li(t[0]),i=li(t[1]);return rn(Ir.Equal,s,i)}else{const t=zf(r);return console.log(t),Xo(t)}}function Xo(r){const t=Hf(r);if(t.length===0)throw Error("Empty error");const s=t.map(i=>i[0].type==="string"&&i[0].content==="-"?ln(Vr.Minus,$o(i.slice(1))):$o(i));return s.length===1?s[0]:gt(Ir.Add,s)}function $o(r){let t=[],s=0;for(;s<r.length;){const[i,n]=Dn(r,s);t.push(i),s=n}switch(t.length){case 0:throw Error("Empty error");case 1:return t[0];default:return gt(Ir.Multiply,t)}}function Dn(r,t){const s=r[t];t++;let i;switch(s.type){case"group":i=Xo(s.content);break;case"macro":if(s.content=="pi"){i=Tt(Math.PI);break}const a=qf.get(s.content);if(a<Pf){const[e,p]=Dn(r,t);t=p;const[b,v]=Dn(r,t);t=v,i=rn(a,e,b)}else{const[e,p]=Dn(r,t);t=p,i=ln(a,e)}break;case"string":if(!isNaN(parseFloat(s.content)))i=Tt(parseFloat(s.content));else if(s.content==="e")i=Tt(Math.E);else if(s.content==="x"||s.content==="y")i=Tf(s.content);else if(qn.has(s.content)){let e=0;for(;r[t].type=="string";)r[t].content=="'"&&(e++,t++);let[p,b]=Dn(r,t);t=b;let v=qn.get(s.content);if(!v)throw Error(`The aren't any functions called ${s.content}`);let $=v;for(let L=0;L<e;++L){const[R,A]=Bn(Ht($));$=R,Wi($)}console.log(`function ${s.content}`),console.log(p),i=ti($,p)}else i=Bf(s.content);break;default:throw Error(`Unknown type ${s.type}`)}let n=i;if(r[t]!==void 0){const a=r[t];if(a.type==="string"&&a.content===Ko){t++;const[e,p]=Dn(r,t);t=p,n=rn(Ir.Power,i,e)}}return[n,t]}function Hf(r){const t=r.map((n,a)=>[n,a]).filter(n=>n[0].type==="string"?n[0].content=="+"||n[0].content=="-":!1);let s=[],i=0;for(let n of t)r[i].content=="+"&&i++,s.push(r.slice(i,n[1])),i=n[1];return r[i].content=="+"&&i++,s.push(r.slice(i)),s.filter(n=>n[0]!=null)}const Ko="?";function zf(r){r=Qf(r);const t=Df(r);return console.log(t),Zo(t)}function Zo(r){let t=r.filter(i=>i.type!=="whitespace").filter(i=>i.type==="macro"?i.content!=="cdot":!0);for(let i of t)i.type==="group"&&(i.content=Zo(i.content));const s=[];for(let i of t)if(i.type==="string"&&isNaN(parseFloat(i.content)))for(let n=0;n<i.content.length;n++){const a={type:"string",content:i.content[n]};s.push(a)}else s.push(i);return s}function Qf(r){for(r=r.replace(/\^/g,Ko);r.includes("operatorname{");){const t=r.indexOf("operatorname{");if(r.includes("}")){const s=r.indexOf("}"),i=r.substring(t+13,s);r=r.substring(0,t)+i+r.substring(s+1)}else throw Error("Missing '}'")}r=r.replace(/\\left\(/g,"{"),r=r.replace(/\\right\)/g,"}");for(let t=1;t<r.length;t++)"0"<=r[t-1]&&r[t-1]<="9"&&r[t].match(/[a-zA-Z]/i)&&(r=r.slice(0,t)+"\\cdot "+r.slice(t));return`{${r}}`}function Wf(r,t){const s=Tn(r);if(s[0]===!1&&s[1]===!1)throw Error("This equation doesn't have any unknowns");const i=[];let n="";if(r.type==="binary"&&r.op===Ir.Equal){console.log("The equation has an equal sign");const a=$n(r.left,i,t),e=$n(r.right,i,t);n=`${a} - ${e}`}else{const a=$n(r,i,t);s[0]===!1&&(n=`${a} - x`),s[1]===!1&&(n=`${a} - y`)}return Yf(n,i,t)}function $n(r,t,s){switch(r.type){case"constant":return`float(${r.value})`;case"variable":const i=Jo(r.name);if(!i)throw Error(`There are no variables called ${r.name}`);return`float(${i})`;case"unknown":return r.name;case"unary":const n=$n(r.child,t,s);switch(r.op){case Vr.Minus:return`-${n}`;case Vr.Sin:return`sin(${n})`;case Vr.Cos:return`cos(${n})`;case Vr.Floor:return`floor(${n})`;case Vr.Abs:return`abs(${n})`;case Vr.Ceil:return`ceil(${n})`;case Vr.Log:return`log10(${n})`;case Vr.Ln:return`ln(${n})`;case Vr.Sqrt:return`sqrtf(${n})`;case Vr.Tan:return Xs(`sin(${n})`,`cos(${n})`,t,s)}case"binary":const a=$n(r.left,t,s),e=$n(r.right,t,s);switch(r.op){case Ir.Division:return Xs(a,e,t,s);case Ir.Power:return r.right.type==="constant"&&Number.isInteger(r.right.value)?Ks(a,r.right.value,t,s):`pow(${a}, ${e})`;case Ir.Equal:throw Error("Equal is not an operation in this context");default:throw Error("wtf?")}case"nary":const p=r.op===Ir.Add?"+":"*";if(r.children.length<2)throw Error(`A ${r.op} cannot be of less than two terms`);let b=$n(r.children[0],t,s);for(let v=1;v<r.children.length;v++)b+=` ${p} ${$n(r.children[v],t,s)}`;return`(${b})`}}function Xs(r,t,s,i){return s.push(t),`(${r} / var_${i}_${s.length-1})`}function Ks(r,t,s,i){return t===0?"1.0":t<0?Xs("1.0",Ks(r,Math.abs(t),s,i),s,i):t===1?r:t===2?`${r} * ${r}`:`${r} * ${Ks(r,t-1,s,i)}`}function Yf(r,t,s){if(t.length>32)throw Error("A function can't have more than 32 denominators");return`${t.length>0?t.reduce((n,a,e,p)=>n+`
        float var_${s}_${e} = ${a};
        ret.y <<= 1;
        ret.y |= int(fneg(var_${s}_${e}));`):""}
        ret.x = int(fneg(${r}));`}function Tn(r){switch(r.type){case"unknown":return[r.name==="x",r.name==="y"];case"unary":return Tn(r.child);case"binary":const t=Tn(r.left),s=Tn(r.right);return[t[0]||s[0],t[1]||s[1]];case"nary":let i=[!1,!1];for(let n of r.children){const a=Tn(n);i=[i[0]||a[0],i[1]||a[1]]}return i;default:return[!1,!1]}}const qn=new Map,ii=new Map;function Uf(r,t){const s=li(r);Wi(s);const i=sa(s,t);return i.num!==void 0?console.log(`Expression ${r} evaluates to ${i.num}`):console.log(`Expression ${r} has been compiled to ${i.code}`),i}function Vf(r,t,s){ii.delete(r);const i=li(t);Wi(i);const n=sa(i,s).num;if(n===void 0)throw Error(`The variable ${r} couldn't be evaluated to a value: ${t}`);return ii.set(r,n),console.log(ii),n}function Xf(r,t,s){const i=r[0],n=r[1];qn.delete(r);const a=li(t),[e,p]=Tn(a);if(!(e&&n==="x"||p&&n==="y"))throw Error(`The function ${i} does not match its unknowns`);const b=sa(a,s);return b.num!==void 0?console.log(`Expression ${t} evaluates to ${b.num}`):console.log(`Expression ${t} has been compiled to ${b.code}`),qn.set(i,a),console.log(qn),b}function Kf(r){if(!qn.delete(r))throw Error(`Function ${r} wasn't deleted`)}function Zf(r){if(!ii.delete(r))throw Error(`Variable ${r} wasn't deleted`)}function Jo(r){return ii.get(r)}function sa(r,t){const[s,i]=Bn(r);r=s,Wi(r);let n;return i!==void 0?n={code:"",num:i}:n={code:Wf(r,t)},n}var fn,Gi,el;class Jf{constructor(t){ki(this,Gi);ki(this,fn,void 0);Ft(this,"html");this.html=document.createElement("div"),this.html.className="expr-variable-bar",Ha(this,fn,new Map),this.ofArray(t)}ofArray(t){const s=[...Fn(this,fn).keys()].filter(n=>!t.includes(n)),i=t.filter(n=>!Fn(this,fn).has(n));for(const n of s)this.delete(n);for(const n of i)this.add(n)}delete(t){const s=Fn(this,fn).get(t);s==null||s.remove(),Fn(this,fn).delete(t)}add(t){const s=cs(this,Gi,el).call(this,t);Fn(this,fn).set(t,s),this.html.appendChild(s)}}fn=new WeakMap,Gi=new WeakSet,el=function(t){const s=document.createElement("button");return s.className="expr-variable-btn",s.textContent=t,s.onclick=()=>{this.delete(t);const i=qi.createNew();i.mathField.write(`${t}=`);const n=document.getElementById("sidebar");n==null||n.appendChild(i.htmlElement),i.focus()},s};const eh=MathQuill.getInterface(2),Lt=new Map,jn=new Map,Nn=new Map;var Yi=(r=>(r[r.ADD=0]="ADD",r[r.REMOVE=1]="REMOVE",r[r.REFRESH=2]="REFRESH",r))(Yi||{});const rh="sin cos tan sec csc cosec cotan floor abs ceil log ln",th="pi theta sqrt sum rho phi lambda",nh={spaceBehavesLikeTab:!0,autoCommands:th,autoOperatorNames:rh,handlers:null};var Hi,rl;const ai=class ai{constructor(t,s){ki(this,Hi);Ft(this,"number");Ft(this,"color");Ft(this,"drawable",!1);Ft(this,"visible",!0);Ft(this,"error",!1);Ft(this,"htmlElement");Ft(this,"mathField");Ft(this,"oldLatex");Ft(this,"solutionBox");Ft(this,"undefVarsBar");Ft(this,"code");Ft(this,"close",async()=>{const t=this.functionCharacter(),s=this.variableCharacter();t&&(Oh(t,this),jn.delete(t)),s&&(Dh(s,this),Nn.delete(s)),this.htmlElement.remove(),Lt.delete(this.number)});Ft(this,"refresh",async()=>{const t=this.mathField.latex();let s;this.oldLatex.length<t.length?s=0:this.oldLatex==t?s=2:s=1,this.oldLatex=t,_h(this.number,t,s)});this.number=t,this.color=`hsl(${s} 69% 69%)`,this.oldLatex="",this.undefVarsBar=new Jf([]),this.htmlElement=cs(this,Hi,rl).call(this)}static createNew(){const t=new ai(this.currNumber,this.currHue);Lt.set(this.currNumber,t);const s=nh;return s.handlers={edit:t.refresh},t.mathField.config(s),this.currNumber++,this.currHue=(this.currHue+49)%360,t}focus(){this.mathField.focus()}toggleError(){const t=this.htmlElement.querySelector(".expr-button"),s=t==null?void 0:t.getElementsByTagName("i");if(s)for(let i of s)i.remove();this.error&&(t==null||t.insertAdjacentHTML("beforeend",`<i class="fa-solid fa-triangle-exclamation ${this.visible?"error-box":"error-box-inverted"}"></i>`))}writeError(t){const s=this.htmlElement.querySelector(".expr-button");this.error=!0;const i=s==null?void 0:s.getElementsByTagName("i");if(i)for(let n of i)n.remove();s==null||s.insertAdjacentHTML("beforeend",`<i class="fa-solid fa-triangle-exclamation ${this.visible?"error-box":"error-box-inverted"}" title="${t}"></i>`)}functionCharacter(){const t=this.mathField.latex().match("[A-Za-z]\\\\left\\([x-y]\\\\right\\)=");if(!t)return null;const s=t[0][0];if("xye".includes(s))throw Error(`A function can't be named ${s}, it's a reserved character`);if(Nn.has(s))throw Error(`There is already a variable with that name: ${s}`);return s}variableCharacter(){const t=this.mathField.latex().match("[A-Za-z]=");if(!t)return null;const s=t[0][0];if("xy".includes(s))return null;if(s=="e")throw Error("A variable can't be named e");if(jn.has(s))throw Error(`There's already a function with that name ${s}`);return s}getVariables(){const t=this.functionCharacter(),s=this.variableCharacter(),i=Array.from(this.htmlElement.getElementsByTagName("var")).filter(n=>!n.classList.contains("mq-operator-name")).map(n=>n.textContent).flatMap(n=>n||[]).filter(n=>!jn.has(n));return(t||s)&&i.splice(0,1),new Set(i)}writeFunctionBrackets(){var i;const t=this.htmlElement.querySelector(".mq-cursor"),s=t==null?void 0:t.previousElementSibling;s&&s.classList.contains("mq-operator-name")&&((i=this.mathField)==null||i.typedText("("))}setSolutionValue(t){if(!this.solutionBox)throw Error("No solution box");this.solutionBox.style.display="inline",t>0&&t<1e-6&&(t=0),this.solutionBox.textContent=Fs(t).format("0[.][000000]")}hideSolutionBox(){if(!this.solutionBox)throw Error("No solution box");this.solutionBox.style.display="none"}showUndefinedVariables(t){const s=[...t].filter(i=>!Nn.has(i)).filter(i=>!"xye".includes(i));return this.undefVarsBar.ofArray(s),s.length}setDrawable(t){const s=this.htmlElement.querySelector(".expr-button");t?(s.style.background=this.color,s.style.boxShadow="0px 0px 5px 3px "+this.color,s.addEventListener("click",()=>{this.visible=!this.visible,s.style.background=this.visible?this.color:"#1d1d1d",this.toggleError()})):(this.visible=!1,s.onclick=()=>{},s.style.background="transparent",s.style.boxShadow="none"),this.drawable=t}};Hi=new WeakSet,rl=function(){this.htmlElement=document.createElement("div"),this.htmlElement.className="expr",this.htmlElement.id="eq-bar-"+this.number;const t=document.createElement("div");t.className="expr-container";const s=document.createElement("div");s.className="expr-button",s.id="expr-button-"+this.number,t.append(s);const i=document.createElement("span");i.className="math-field",this.mathField=eh.MathField(i),t.append(i);const n=document.createElement("button");n.insertAdjacentHTML("beforeend",'<span><i class="fa-solid fa-xmark"></i></span>'),n.className="close-button",n.addEventListener("click",this.close),t.append(n),this.htmlElement.append(t);const a=document.createElement("div");return a.className="expr-bottom",this.solutionBox=document.createElement("span"),this.solutionBox.className="solution-box",a==null||a.appendChild(this.solutionBox),this.hideSolutionBox(),a.append(this.undefVarsBar.html),this.htmlElement.append(a),this.htmlElement},Ft(ai,"currNumber",0),Ft(ai,"currHue",0);let qi=ai;var lr,Jt,nt,ji;(function(r){r.HEX="HEX",r.RGB="RGB",r.HSL="HSL",r.CIELab="CIELab",r.CMYK="CMYK"})(lr||(lr={})),function(r){r.ANALOGOUS="ANALOGOUS",r.COMPLEMENTARY="COMPLEMENTARY",r.SPLIT_COMPLEMENTARY="SPLIT_COMPLEMENTARY",r.TRIADIC="TRIADIC",r.TETRADIC="TETRADIC",r.SQUARE="SQUARE"}(Jt||(Jt={})),function(r){r.ADDITIVE="ADDITIVE",r.SUBTRACTIVE="SUBTRACTIVE"}(nt||(nt={})),function(r){r.black="#000000",r.silver="#C0C0C0",r.gray="#808080",r.white="#FFFFFF",r.maroon="#800000",r.red="#FF0000",r.purple="#800080",r.fuchsia="#FF00FF",r.green="#008000",r.lime="#00FF00",r.olive="#808000",r.yellow="#FFFF00",r.navy="#000080",r.blue="#0000FF",r.teal="#008080",r.aqua="#00FFFF",r.orange="#FFA500",r.aliceblue="#F0F8FF",r.antiquewhite="#FAEBD7",r.aquamarine="#7FFFD4",r.azure="#F0FFFF",r.beige="#F5F5DC",r.bisque="#FFE4C4",r.blanchedalmond="#FFEBCD",r.blueviolet="#8A2BE2",r.brown="#A52A2A",r.burlywood="#DEB887",r.cadetblue="#5F9EA0",r.chartreuse="#7FFF00",r.chocolate="#D2691E",r.coral="#FF7F50",r.cornflowerblue="#6495ED",r.cornsilk="#FFF8DC",r.crimson="#DC143C",r.cyan="#00FFFF",r.darkblue="#00008B",r.darkcyan="#008B8B",r.darkgoldenrod="#B8860B",r.darkgray="#A9A9A9",r.darkgreen="#006400",r.darkgrey="#A9A9A9",r.darkkhaki="#BDB76B",r.darkmagenta="#8B008B",r.darkolivegreen="#556B2F",r.darkorange="#FF8C00",r.darkorchid="#9932CC",r.darkred="#8B0000",r.darksalmon="#E9967A",r.darkseagreen="#8FBC8F",r.darkslateblue="#483D8B",r.darkslategray="#2F4F4F",r.darkslategrey="#2F4F4F",r.darkturquoise="#00CED1",r.darkviolet="#9400D3",r.deeppink="#FF1493",r.deepskyblue="#00BFFF",r.dimgray="#696969",r.dimgrey="#696969",r.dodgerblue="#1E90FF",r.firebrick="#B22222",r.floralwhite="#FFFAF0",r.forestgreen="#228B22",r.gainsboro="#DCDCDC",r.ghostwhite="#F8F8FF",r.gold="#FFD700",r.goldenrod="#DAA520",r.greenyellow="#ADFF2F",r.grey="#808080",r.honeydew="#F0FFF0",r.hotpink="#FF69B4",r.indianred="#CD5C5C",r.indigo="#4B0082",r.ivory="#FFFFF0",r.khaki="#F0E68C",r.lavender="#E6E6FA",r.lavenderblush="#FFF0F5",r.lawngreen="#7CFC00",r.lemonchiffon="#FFFACD",r.lightblue="#ADD8E6",r.lightcoral="#F08080",r.lightcyan="#E0FFFF",r.lightgoldenrodyellow="#FAFAD2",r.lightgray="#D3D3D3",r.lightgreen="#90EE90",r.lightgrey="#D3D3D3",r.lightpink="#FFB6C1",r.lightsalmon="#FFA07A",r.lightseagreen="#20B2AA",r.lightskyblue="#87CEFA",r.lightslategray="#778899",r.lightslategrey="#778899",r.lightsteelblue="#B0C4DE",r.lightyellow="#FFFFE0",r.limegreen="#32CD32",r.linen="#FAF0E6",r.magenta="#FF00FF",r.mediumaquamarine="#66CDAA",r.mediumblue="#0000CD",r.mediumorchid="#BA55D3",r.mediumpurple="#9370DB",r.mediumseagreen="#3CB371",r.mediumslateblue="#7B68EE",r.mediumspringgreen="#00FA9A",r.mediumturquoise="#48D1CC",r.mediumvioletred="#C71585",r.midnightblue="#191970",r.mintcream="#F5FFFA",r.mistyrose="#FFE4E1",r.moccasin="#FFE4B5",r.navajowhite="#FFDEAD",r.oldlace="#FDF5E6",r.olivedrab="#6B8E23",r.orangered="#FF4500",r.orchid="#DA70D6",r.palegoldenrod="#EEE8AA",r.palegreen="#98FB98",r.paleturquoise="#AFEEEE",r.palevioletred="#DB7093",r.papayawhip="#FFEFD5",r.peachpuff="#FFDAB9",r.peru="#CD853F",r.pink="#FFC0CB",r.plum="#DDA0DD",r.powderblue="#B0E0E6",r.rosybrown="#BC8F8F",r.royalblue="#4169E1",r.saddlebrown="#8B4513",r.salmon="#FA8072",r.sandybrown="#F4A460",r.seagreen="#2E8B57",r.seashell="#FFF5EE",r.sienna="#A0522D",r.skyblue="#87CEEB",r.slateblue="#6A5ACD",r.slategray="#708090",r.slategrey="#708090",r.snow="#FFFAFA",r.springgreen="#00FF7F",r.steelblue="#4682B4",r.tan="#D2B48C",r.thistle="#D8BFD8",r.tomato="#FF6347",r.turquoise="#40E0D0",r.violet="#EE82EE",r.wheat="#F5DEB3",r.whitesmoke="#F5F5F5",r.yellowgreen="#9ACD32",r.rebeccapurple="#663399"}(ji||(ji={}));const tl=Object.keys(ji),ih={HEX:["R","G","B","A"],RGB:["R","G","B","A"],HSL:["H","S","L","A"],CIELab:["L","a","b","A"],CMYK:["C","M","Y","K","A"]},Zs={BGR:lr.RGB,ABGR:lr.RGB,HLS:lr.HSL,AHLS:lr.HSL,LAB:lr.CIELab,ALAB:lr.CIELab,CKMY:lr.CMYK,ACKMY:lr.CMYK};var si;(function(r){r.NUMBER="number",r.BOOLEAN="boolean"})(si||(si={}));const Gt={[lr.HEX]:/^#(?:([a-f\d])([a-f\d])([a-f\d])([a-f\d])?|([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?)$/i,[lr.RGB]:/^rgba?\s*\(\s*(?:((?:\d*\.)?\d+%?)\s*,\s*((?:\d*\.)?\d+%?)\s*,\s*((?:\d*\.)?\d+%?)(?:\s*,\s*((?:\d*\.)?\d+))?|((?:\d*\.)?\d+%?)\s*((?:\d*\.)?\d+%?)\s*((?:\d*\.)?\d+%?)(?:\s*\/\s*((?:\d*\.)?\d+%?))?)\s*\)$/,[lr.HSL]:/^hsla?\s*\(\s*(?:(-?(?:\d*\.)?\d+(?:deg|grad|rad|turn)?)\s*,\s*((?:\d*\.)?\d+)%\s*,\s*((?:\d*\.)?\d+)%(?:\s*,\s*((?:\d*\.)?\d+))?|(-?(?:\d*\.)?\d+(?:deg|grad|rad|turn)?)\s*((?:\d*\.)?\d+)%\s*((?:\d*\.)?\d+)%(?:\s*\/\s*((?:\d*\.)?\d+%?))?)\s*\)$/,[lr.CIELab]:/^lab\s*\(\s*(?:((?:\d*\.)?\d+%?)\s*(-?(?:\d*\.)?\d+%?)\s*(-?(?:\d*\.)?\d+%?)(?:\s*\/\s*((?:\d*\.)?\d+%?))?)\s*\)$/,[lr.CMYK]:/^(?:device-cmyk|cmyk)\s*\(\s*(?:((?:\d*\.)?\d+%?)\s*,\s*((?:\d*\.)?\d+%?)\s*,\s*((?:\d*\.)?\d+%?)\s*,\s*((?:\d*\.)?\d+%?)(?:\s*,\s*((?:\d*\.)?\d+))?|((?:\d*\.)?\d+%?)\s*((?:\d*\.)?\d+%?)\s*((?:\d*\.)?\d+%?)\s*((?:\d*\.)?\d+%?)(?:\s*\/\s*((?:\d*\.)?\d+%?))?)\s*\)$/},nl=/^(-?(?:\d*\.)?\d+)((?:deg|grad|rad|turn)?)$/,pt=/^(-?\d+(?:\.\d+)?|-?\.\d+)%$/,Js=/^0x([a-f\d]{1,2})$/i,sh=/\{(\d+)\}/g,ah=/,( +|\d+)/g,oh=/ +/,lh="The provided string color doesn't have a correct format",uh="The provided color object doesn't have the proper keys or format";var Pt,Ot,ui;(function(r){r.NONE="none",r.DEGREES="deg",r.GRADIANS="grad",r.RADIANS="rad",r.TURNS="turn"})(Pt||(Pt={})),function(r){r.NONE="none",r.PERCENT="percent"}(Ot||(Ot={})),function(r){r.DEVICE_CMYK="device-cmyk",r.CMYK="cmyk"}(ui||(ui={}));const cn={decimals:6,legacyCSS:!1,spacesAfterCommas:!1,anglesUnit:Pt.NONE,rgbUnit:Ot.NONE,labUnit:Ot.NONE,cmykUnit:Ot.PERCENT,alphaUnit:Ot.NONE,cmykFunction:ui.DEVICE_CMYK},xt=(r,t)=>Object.prototype.hasOwnProperty.call(r,t),gi=r=>+`${r}`.replace(pt,"$1"),Mn=r=>pt.test(`${r}`)?gi(r):Math.min(+r,100),Ii=r=>(r.length===1&&(r+=r),parseInt(r,16)),Fi=r=>{const t=je(r,0).toString(16).toUpperCase();return t.length===1?`0x0${t}`:`0x${t}`},Cn=(r,t=!1)=>!t&&pt.test(r)?Math.min(255*gi(r)/100,255):Js.test(r)?(r.length===3&&(r+=r.slice(-1)),t?je(r)/255:je(r)):Math.min(+r,t?1:255),Ni=r=>pt.test(r)?At(125*gi(r)/100,-125,125):At(+r,-125,125),wn=r=>Math.min(pt.test(r)?gi(r)/100:+r,1),il=r=>[...r].sort().join("").toUpperCase(),je=(r,t=6)=>{const s=Math.pow(10,t);return Math.round(+r*s)/s},At=(r,t,s)=>Math.max(t,Math.min(r,s)),ci=r=>{if(typeof r=="string"){const t=r.match(nl),s=+t[1];switch(t[2]){case Pt.RADIANS:r=je(180*s/Math.PI);break;case Pt.TURNS:r=je(360*s);break;case Pt.GRADIANS:r=je(.9*s);break;case Pt.DEGREES:default:r=s}}return(r>360||r<0)&&(r-=360*Math.floor(r/360)),r},ch=(r,t)=>{let s;switch(t){case Pt.RADIANS:s=je((i=>i*Math.PI/180)(r));break;case Pt.TURNS:s=je(r/360);break;case Pt.GRADIANS:s=je(10/9*r);break;case Pt.DEGREES:case Pt.NONE:default:s=r}return s},fr=(r,...t)=>{const s=[],i=[],n=[],a=[],e=[],p=[],b=Object.values(Pt),v=Object.values(Ot),$=Object.values(ui),L={legacyCSS:0,spacesAfterCommas:0,cmykFunction:0};for(const R of t)if(typeof R=="string"){if(s.push(R),R.includes(",")){L.legacyCSS++;const A=R.match(ah);new Set(A).size===1&&oh.test(A[0].slice(1))&&L.spacesAfterCommas++}if(R.match(Gt.HSL)){const A=R.match(Gt.HSL),E=A[1]||A[5],O=A[8],Z=E.match(nl)[2];i.push(Z===""?Pt.NONE:Z),p.push(pt.test(O));continue}if(Gt.RGB.test(R)){const A=R.match(Gt.RGB),E=A[1]||A[5],O=A[2]||A[6],Z=A[3]||A[7],$e=A[8];n.push(pt.test(E)&&pt.test(O)&&pt.test(Z)),p.push(pt.test($e));continue}if(Gt.CIELab.test(R)){const A=R.match(Gt.CIELab),E=A[1],O=A[2],Z=A[3],$e=A[4];a.push(pt.test(E)&&pt.test(O)&&pt.test(Z)),p.push(pt.test($e));continue}if(R.match(Gt.CMYK)){const A=R.match(Gt.CMYK),E=A[1]||A[6],O=A[2]||A[7],Z=A[3]||A[8],$e=A[4]||A[9],le=A[10];e.push(pt.test(E)&&pt.test(O)&&pt.test(Z)&&pt.test($e)),R.startsWith("cmyk")&&L.cmykFunction++,p.push(pt.test(le))}}return{decimals:typeof r.decimals===si.NUMBER?r.decimals:cn.decimals,legacyCSS:typeof r.legacyCSS===si.BOOLEAN?r.legacyCSS:!!(s.length&&L.legacyCSS===s.length)||cn.legacyCSS,spacesAfterCommas:typeof r.spacesAfterCommas===si.BOOLEAN?r.spacesAfterCommas:!!(s.length&&L.spacesAfterCommas===s.length)||cn.spacesAfterCommas,anglesUnit:r.anglesUnit&&b.includes(r.anglesUnit)?r.anglesUnit:new Set(i).size===1?i[0]:cn.anglesUnit,rgbUnit:r.rgbUnit&&v.includes(r.rgbUnit)?r.rgbUnit:new Set(n).size===1&&n[0]?Ot.PERCENT:cn.rgbUnit,labUnit:r.labUnit&&v.includes(r.labUnit)?r.labUnit:new Set(a).size===1&&a[0]?Ot.PERCENT:cn.labUnit,cmykUnit:r.cmykUnit&&v.includes(r.cmykUnit)?r.cmykUnit:new Set(e).size!==1||e[0]?cn.cmykUnit:Ot.NONE,alphaUnit:r.alphaUnit&&v.includes(r.alphaUnit)?r.alphaUnit:new Set(p).size===1&&p[0]?Ot.PERCENT:cn.alphaUnit,cmykFunction:r.cmykFunction&&$.includes(r.cmykFunction)?r.cmykFunction:e.length&&e.length===L.cmykFunction?ui.CMYK:cn.cmykFunction}},xs=r=>`${r}`in nt,sl=[[.4360747,.3850649,.1430804],[.2225045,.7168786,.0606169],[.0139322,.0971045,.7141733]],fh=[[3.1338561,-1.6168667,-.4906146],[-.9787684,1.9161415,.033454],[.0719453,-.2289914,1.4052427]],Gn=sl.map(r=>r.reduce((t,s)=>t+s,0)),Es=(r,t,s)=>(s<0&&(s+=6),s>=6&&(s-=6),je(s<1?255*((t-r)*s+r):s<3?255*t:s<4?255*((t-r)*(4-s)+r):255*r)),hh=r=>r<=.04045?r/12.92:((r+.055)/1.055)**2.4,ph=r=>r<=.0031308?12.92*r:1.055*r**(1/2.4)-.055,al=(r,t,s,i)=>{const n=[0,0,0],a=[r,t,s];return i.forEach((e,p)=>{e.forEach((b,v)=>{n[p]+=b*a[v]})}),n},mt=(r,t,s)=>{t/=100;const i=(s/=100)<=.5?s*(t+1):s+t-s*t,n=2*s-i;return{R:Es(n,i,(r/=60)+2),G:Es(n,i,r),B:Es(n,i,r-2)}},zn=(r,t,s,i=1)=>{r/=255,t/=255,s/=255,i=Math.min(i,1);const n=Math.max(r,t,s),a=Math.min(r,t,s),e=n-a;let p=0,b=0;const v=(n+a)/2;if(e!==0){switch(n){case r:p=(t-s)/e%6;break;case t:p=(s-r)/e+2;break;case s:p=(r-t)/e+4}p=je(60*p),p<0&&(p+=360),b=e/(1-Math.abs(2*v-1))}return{H:p,S:je(100*b),L:je(100*v),A:i}},Qn=(r,t,s)=>{const i=[r/255,t/255,s/255].map(hh),n=al(i[0],i[1],i[2],sl),a=((e,p,b)=>{const v=R=>R>.008856451679035631?Math.cbrt(R):R/.12841854934601665+.13793103448275862,$=v(e/Gn[0]),L=v(p/Gn[1]);return[116*L-16,500*($-L),200*(L-v(b/Gn[2]))]})(n[0],n[1],n[2]);return{L:a[0],a:a[1],b:a[2]}},aa=(r,t,s)=>{const i=((a,e,p)=>{const b=R=>R>.20689655172413793?R**3:.12841854934601665*(R-.13793103448275862),v=(a+16)/116,$=e/500,L=p/200;return[Gn[0]*b(v+$),Gn[1]*b(v),Gn[2]*b(v-L)]})(r,t,s),n=al(i[0],i[1],i[2],fh).map(ph);return{R:At(255*n[0],0,255),G:At(255*n[1],0,255),B:At(255*n[2],0,255)}},oa=(r,t,s,i)=>({R:je(255*(1-r)*(i=1-i)),G:je(255*(1-t)*i),B:je(255*(1-s)*i)}),ol=(r,t,s)=>{r/=255,t/=255,s/=255;const i=1-Math.max(r,t,s),n=1-i,a=n&&(n-t)/n,e=n&&(n-s)/n;return{C:je(100*(n&&(n-r)/n)),M:je(100*a),Y:je(100*e),K:je(100*i)}},wo=(r,t)=>{if(r<0&&(r+=360),r>360&&(r-=360),r===360||r===0)return r;const s=[[0,120],[120,180],[180,240],[240,360]],i=[[0,60],[60,120],[120,240],[240,360]],n=t?i:s;let a=0,e=0,p=0,b=0;return(t?s:i).find((v,$)=>r>=v[0]&&r<v[1]&&(a=v[0],e=v[1],p=n[$][0],b=n[$][1],!0)),p+(b-p)/(e-a)*(r-a)},ks=r=>r?", ":",",Zn=(r,t)=>{const s=il(Object.keys(r));return ih[Zs[s]].reduce((i,n,a)=>{const e=r[n];return e!==void 0&&i.push(t(e,a)),i},[])},Jn=(r,t)=>r.replace(sh,(s,i)=>`${t[+i-1]}`),_i=(r,t,s=!1)=>{const{alphaUnit:i,legacyCSS:n,decimals:a}=t;return i!==Ot.PERCENT||n&&!s?je(r,a):`${je(100*r,a)}%`},or={[lr.HEX]:r=>{const t=Zn(r,i=>(n=>{let a=je(n,0).toString(16).toUpperCase();return a.length===1&&(a=`0${a}`),a})(je(i))),s=t.length===4?"#{1}{2}{3}{4}":"#{1}{2}{3}";return Jn(s,t)},[lr.RGB]:(r,t)=>{const{decimals:s,legacyCSS:i,spacesAfterCommas:n,rgbUnit:a}=t,e=ks(n),p=Zn(r,(v,$)=>a===Ot.PERCENT&&$<3?`${((L,R)=>je(L/255*100,R))(v,s)}%`:$===3?_i(v,t):je(v,s)),b=i?p.length===4?`rgba({1}${e}{2}${e}{3}${e}{4})`:`rgb({1}${e}{2}${e}{3})`:p.length===4?"rgb({1} {2} {3} / {4})":"rgb({1} {2} {3})";return Jn(b,p)},[lr.HSL]:(r,t)=>{const{decimals:s,legacyCSS:i,spacesAfterCommas:n,anglesUnit:a}=t,e=ks(n),p=Zn(r,(v,$)=>$===0&&a!==Pt.NONE?`${je(ch(v,a),s)}${a}`:$===3?_i(v,t):je(v,s)),b=i?p.length===4?`hsla({1}${e}{2}%${e}{3}%${e}{4})`:`hsl({1}${e}{2}%${e}{3}%)`:p.length===4?"hsl({1} {2}% {3}% / {4})":"hsl({1} {2}% {3}%)";return Jn(b,p)},[lr.CIELab]:(r,t)=>{const{decimals:s,labUnit:i}=t,n=Zn(r,(e,p)=>{if(p===0){const b=je(Mn(e),s);return i===Ot.PERCENT?`${b}%`:`${b}`}return p<3?i===Ot.PERCENT?`${((b,v)=>je(b/125*100,v))(e,s)}%`:je(e,s):_i(e,t,!0)}),a=n.length===4?"lab({1} {2} {3} / {4})":"lab({1} {2} {3})";return Jn(a,n)},[lr.CMYK]:(r,t)=>{const{decimals:s,legacyCSS:i,spacesAfterCommas:n,cmykUnit:a,cmykFunction:e}=t,p=ks(n),b=Zn(r,($,L)=>a===Ot.PERCENT&&L<4?`${je($,s)}%`:L===4?_i($,t):je($/100,s)),v=i?b.length===5?`${e}({1}${p}{2}${p}{3}${p}{4}${p}{5})`:`${e}({1}${p}{2}${p}{3}${p}{4})`:b.length===5?`${e}({1} {2} {3} {4} / {5})`:`${e}({1} {2} {3} {4})`;return Jn(v,b)}},$t=r=>(typeof r=="string"&&(r=pt.test(r)?gi(r)/100:+r),isNaN(+r)||r>1?1:je(r)),Wn=(r,t,s)=>t.reduce((i,n)=>[...i,{...r,H:s===nt.ADDITIVE?ci(r.H+n):ci(wo(wo(r.H,!1)+n,!0))}],[{...r}]),gh=(r,t)=>Wn(r,[30,-30],t),dh=(r,t)=>Wn(r,[180],t),mh=(r,t)=>Wn(r,[150,-150],t),vh=(r,t)=>Wn(r,[120,-120],t),bh=(r,t)=>Wn(r,[60,-120,180],t),yh=(r,t)=>Wn(r,[90,-90,180],t),ft=r=>typeof r=="string"?(t=>{let s;if(Object.keys(lr).some(i=>{if(Gt[i].test(t))return s=i,!0}),!s&&~tl.indexOf(t)&&(s=lr.HEX),!s)throw new Error(lh);return s})(r):(t=>{let s,i=!1;const n=il(Object.keys(t));if(Zs[n]&&(s=Zs[n]),s&&s===lr.RGB){const a=Object.entries(t).some(p=>!Js.test(`${p[1]}`)),e=Object.entries(t).some(p=>!(pt.test(`${p[1]}`)||!Js.test(`${p[1]}`)&&!isNaN(+p[1])&&+p[1]<=255));a&&e&&(i=!0),a||(s=lr.HEX)}if(!s||i)throw new Error(uh);return s})(r),Ah={[lr.HEX](r){const t=(~tl.indexOf(r)?ji[r]:r).match(Gt.HEX),s={R:Ii(t[1]||t[5]),G:Ii(t[2]||t[6]),B:Ii(t[3]||t[7])},i=t[4]||t[8];return i!==void 0&&(s.A=Ii(i)/255),s},[lr.RGB](r){const t=r.match(Gt.RGB),s=Cn(t[1]||t[5]),i=Cn(t[2]||t[6]),n=Cn(t[3]||t[7]),a=t[4]||t[8],e={R:Math.min(s,255),G:Math.min(i,255),B:Math.min(n,255)};return a!==void 0&&(e.A=$t(a)),e},[lr.HSL](r){const t=r.match(Gt.HSL),s=ci(t[1]||t[5]),i=Mn(t[2]||t[6]),n=Mn(t[3]||t[7]),a=t[4]||t[8],e=mt(s,i,n);return a!==void 0&&(e.A=$t(a)),e},[lr.CIELab](r){const t=r.match(Gt.CIELab),s=Mn(t[1]),i=Ni(t[2]),n=Ni(t[3]),a=t[4],e=aa(s,i,n);return a!==void 0&&(e.A=$t(a)),e},[lr.CMYK](r){const t=r.match(Gt.CMYK),s=wn(t[1]||t[6]),i=wn(t[2]||t[7]),n=wn(t[3]||t[8]),a=wn(t[4]||t[9]),e=t[5]||t[10],p=oa(s,i,n,a);return e!==void 0&&(p.A=$t(e)),p}},$h={[lr.HEX](r){const t={R:Cn(`${r.R}`),G:Cn(`${r.G}`),B:Cn(`${r.B}`)};return xt(r,"A")&&(t.A=Math.min(Cn(`${r.A}`,!0),1)),t},[lr.RGB](r){return this.HEX(r)},[lr.HSL](r){const t=Mn(`${r.S}`),s=Mn(`${r.L}`),i=mt(ci(r.H),t,s);return xt(r,"A")&&(i.A=$t(r.A)),i},[lr.CIELab](r){const t=Mn(`${r.L}`),s=Ni(`${r.a}`),i=Ni(`${r.b}`),n=aa(t,s,i);return xt(r,"A")&&(n.A=$t(r.A)),n},[lr.CMYK](r){const t=wn(`${r.C}`),s=wn(`${r.M}`),i=wn(`${r.Y}`),n=wn(`${r.K}`),a=oa(t,s,i,n);return xt(r,"A")&&(a.A=$t(r.A)),a}},In=(r,t=ft(r))=>typeof r=="string"?Ah[t](r):$h[t](r),qe={[lr.HEX]:r=>({R:Fi(r.R),G:Fi(r.G),B:Fi(r.B)}),HEXA(r){const t=qe.HEX(r);return t.A=xt(r,"A")?Fi(255*r.A):"0xFF",t},[lr.RGB](r,t){const s=wh(r,t);return xt(s,"A")&&delete s.A,s},RGBA(r,t){const s=qe.RGB(r,t);return s.A=xt(r,"A")?je(r.A):1,s},[lr.HSL](r,t){const s=zn(r.R,r.G,r.B);return delete s.A,ea(s,t)},HSLA(r,t){const s=qe.HSL(r,t);return s.A=xt(r,"A")?je(r.A,t):1,s},[lr.CIELab](r,t){const s=Qn(r.R,r.G,r.B);return xh(s,t)},CIELabA(r,t){const s=qe.CIELab(r,t);return s.A=xt(r,"A")?je(r.A,t):1,s},[lr.CMYK]:(r,t)=>Eh(ol(r.R,r.G,r.B),t),CMYKA(r,t){const s=qe.CMYK(r,t);return s.A=xt(r,"A")?je(r.A,t):1,s}},Li=(r,t,s,i)=>{const n=ft(r),a=typeof r=="string",e=In(r,n),p=typeof r=="string"&&xt(e,"A")||typeof r!="string"&&xt(r,"A"),b=zn(e.R,e.G,e.B,e.A);p||delete b.A;const v=s?b.L/(t+1):(100-b.L)/(t+1),$=Array(t).fill(null).map((L,R)=>({...b,L:b.L+v*(R+1)*(1-2*+s)}));switch(n){case lr.HEX:default:return $.map(L=>{const R=mt(L.H,L.S,L.L);return p&&(R.A=L.A),a?p?or.HEX({...R,A:je(255*R.A)}):or.HEX(R):p?qe.HEXA(R):qe.HEX(R)});case lr.RGB:return $.map(L=>{const R=mt(L.H,L.S,L.L);return p&&(R.A=L.A),a?or.RGB(R,i):p?qe.RGBA(R,i.decimals):qe.RGB(R,i.decimals)});case lr.HSL:return $.map(L=>a?or.HSL(L,i):p?qe.HSLA({...mt(L.H,L.S,L.L),A:L.A},i.decimals):qe.HSL(mt(L.H,L.S,L.L),i.decimals));case lr.CIELab:return $.map(L=>{const R=mt(L.H,L.S,L.L);return a?or.CIELab(p?qe.CIELabA(R,i.decimals):qe.CIELab(R,i.decimals),i):p?qe.CIELabA({...R,A:L.A},i.decimals):qe.CIELab(R,i.decimals)})}},Ln={buildHarmony(r,t,s,i){const n=ft(r),a=In(r,n),e=zn(a.R,a.G,a.B,a.A),p=typeof r=="string"&&xt(a,"A")||typeof r!="string"&&xt(r,"A"),b=typeof r=="string";switch(n){case lr.HEX:default:return p?this.HEXA(ea(e,0),t,s,b):this.HEX(ea(e,0),t,s,b);case lr.HSL:return p?this.HSLA(e,t,s,b,i):this.HSL(e,t,s,b,i);case lr.RGB:return p?this.RGBA(e,t,s,b,i):this.RGB(e,t,s,b,i);case lr.CIELab:return p?this.CIELabA(e,t,s,b,i):this.CIELab(e,t,s,b,i)}},[lr.HEX]:(r,t,s,i)=>t(r,s).map(n=>i?or.HEX(mt(n.H,n.S,n.L)):qe.HEX(mt(n.H,n.S,n.L))),HEXA:(r,t,s,i)=>t(r,s).map(n=>i?or.HEX({...mt(n.H,n.S,n.L),A:255*$t(n.A)}):qe.HEXA({...mt(n.H,n.S,n.L),A:$t(n.A)})),[lr.RGB]:(r,t,s,i,n)=>t(r,s).map(a=>i?or.RGB(mt(a.H,a.S,a.L),n):qe.RGB(mt(a.H,a.S,a.L),n.decimals)),RGBA:(r,t,s,i,n)=>t(r,s).map(a=>i?or.RGB({...mt(a.H,a.S,a.L),A:$t(a.A)},n):qe.RGBA({...mt(a.H,a.S,a.L),A:$t(a.A)},n.decimals)),[lr.HSL]:(r,t,s,i,n)=>t(r,s).map(a=>i?or.HSL({H:a.H,S:a.S,L:a.L},n):qe.HSL(mt(a.H,a.S,a.L),n.decimals)),HSLA:(r,t,s,i,n)=>t(r,s).map(a=>i?or.HSL({...a,A:$t(a.A)},n):qe.HSLA({...mt(a.H,a.S,a.L),A:$t(a.A)},n.decimals)),[lr.CIELab]:(r,t,s,i,n)=>t(r,s).map(a=>{const e=mt(a.H,a.S,a.L);return i?or.CIELab(Qn(e.R,e.G,e.B),n):qe.CIELab(e,n.decimals)}),CIELabA:(r,t,s,i,n)=>t(r,s).map(a=>{const e=mt(a.H,a.S,a.L);return i?or.CIELab({...Qn(e.R,e.G,e.B),A:$t(a.A)},n):qe.CIELabA({...e,A:$t(a.A)},n.decimals)})},et={mix(r,t){const s=r.map(e=>{const p=ft(e);return In(e,p)}),i=t===nt.SUBTRACTIVE?s.map(e=>{const p=((b,v,$)=>{const L=Math.min(b,v,$),R=Math.min(255-b,255-v,255-$),A=b-L,E=v-L,O=$-L,Z=Math.min(A,E),$e=A-Z,le=(E+Z)/2,M=(O+E-Z)/2,j=Math.max($e,le,M)/Math.max(A,E,O),Se=isNaN(j)||j===1/0||j<=0?1:j;return{R:$e/Se+R,Y:le/Se+R,B:M/Se+R}})(e.R,e.G,e.B);return xt(e,"A")&&(p.A=e.A),p}):null;function n(e){const p=t===nt.ADDITIVE?{R:0,G:0,B:0,A:0}:{R:0,Y:0,B:0,A:0};return e.reduce((b,v)=>{const $=xt(v,"A")?v.A:1,L={R:Math.min(b.R+v.R*$,255),B:Math.min(b.B+v.B*$,255),A:1-(1-$)*(1-b.A)},R="G"in b?b.G:b.Y,A="G"in v?v.G:v.Y;return{...L,...t===nt.ADDITIVE?{G:Math.min(R+A*$,255)}:{Y:Math.min(R+A*$,255)}}},p)}let a;if(t===nt.ADDITIVE)a=n(s);else{const e=n(i);a=((p,b,v)=>{const $=Math.min(p,b,v),L=Math.min(255-p,255-b,255-v),R=p-$,A=b-$,E=v-$,O=Math.min(A,E),Z=R+A-O,$e=A+O,le=2*(E-O),M=Math.max(Z,$e,le)/Math.max(R,A,E),j=isNaN(M)||M===1/0||M<=0?1:M;return{R:Z/j+L,G:$e/j+L,B:le/j+L}})(e.R,e.Y,e.B),a.A=e.A}return{R:je(a.R),G:je(a.G),B:je(a.B),A:At(a.A,0,1)}},[lr.HEX](r,t,s){const i=this.mix(r,t);return delete i.A,s?or.HEX(i):qe.HEX(i)},HEXA(r,t,s){const i=this.mix(r,t);return i.A=s?255*$t(i.A):$t(i.A),s?or.HEX(i):qe.HEXA(i)},[lr.RGB](r,t,s,i){const n=this.mix(r,t);return delete n.A,s?or.RGB(n,i):qe.RGB(n,i.decimals)},RGBA(r,t,s,i){const n=this.mix(r,t);return s?or.RGB(n,i):qe.RGBA(n,i.decimals)},[lr.HSL](r,t,s,i){const n=this.mix(r,t),a=zn(n.R,n.G,n.B);return delete n.A,delete a.A,s?or.HSL(a,i):qe.HSL(n,i.decimals)},HSLA(r,t,s,i){const n=this.mix(r,t),a=zn(n.R,n.G,n.B,n.A);return s?or.HSL(a,i):qe.HSLA(n,i.decimals)},[lr.CIELab](r,t,s,i){const n=this.mix(r,t),a=Qn(n.R,n.G,n.B);return delete n.A,s?or.CIELab(a,i):qe.CIELabA(n,i.decimals)},CIELabA(r,t,s,i){const n=this.mix(r,t),a=Qn(n.R,n.G,n.B);return xt(n,"A")&&(a.A=n.A),s?or.CIELab(a,i):qe.CIELabA(n,i.decimals)}},wh=(r,t)=>({R:je(r.R,t),G:je(r.G,t),B:je(r.B,t),...xt(r,"A")?{A:je(r.A,t)}:{}}),ea=(r,t)=>({H:je(r.H,t),S:je(r.S,t),L:je(r.L,t),...xt(r,"A")?{A:je(r.A,t)}:{}}),xh=(r,t)=>({L:je(r.L,t),a:je(r.a,t),b:je(r.b,t)}),Eh=(r,t)=>({C:je(r.C,t),M:je(r.M,t),Y:je(r.Y,t),K:je(r.K,t)}),kt=(r,t,s,i)=>i(In(r,t),s),lt=(r,t,s,i,n)=>(s<1&&(s=5),((e,p,b)=>{const v=b-1,$=(p.R-e.R)/v,L=(p.G-e.G)/v,R=(p.B-e.B)/v,A=$t(e.A),E=($t(p.A)-A)/v;return Array(b).fill(null).map((O,Z)=>Z===0?e:Z===v?p:{R:je(e.R+$*Z),G:je(e.G+L*Z),B:je(e.B+R*Z),A:je(A+E*Z)})})(In(r),In(t),s).map(e=>n(e,i))),Cs=(r,t,s,i)=>({[Jt.ANALOGOUS]:Ln.buildHarmony(t,gh,s,i),[Jt.COMPLEMENTARY]:Ln.buildHarmony(t,dh,s,i),[Jt.SPLIT_COMPLEMENTARY]:Ln.buildHarmony(t,mh,s,i),[Jt.TRIADIC]:Ln.buildHarmony(t,vh,s,i),[Jt.TETRADIC]:Ln.buildHarmony(t,bh,s,i),[Jt.SQUARE]:Ln.buildHarmony(t,yh,s,i)})[r];class Pn{constructor(t,s={}){this._options=fr(s,t),this.rgb=In(t),this.updateHSL(),this.updateLab(),this.updateCMYK()}updateRGB(){this.rgb={...mt(this.hsl.H,this.hsl.S,this.hsl.L),A:this.hsl.A}}updateRGBFromCMYK(){this.rgb={...oa(this.cmyk.C,this.cmyk.M,this.cmyk.Y,this.cmyk.K),A:this.rgb.A}}updateRGBFromLab(){this.rgb={...aa(this.lab.L,this.lab.a,this.lab.b),A:this.rgb.A}}updateHSL(){this.hsl=zn(this.rgb.R,this.rgb.G,this.rgb.B,this.rgb.A)}updateLab(){this.lab={...Qn(this.rgb.R,this.rgb.G,this.rgb.B),A:this.rgb.A}}updateCMYK(){this.cmyk=ol(this.rgb.R,this.rgb.G,this.rgb.B)}setOptions(t={}){return this._options={...this._options,...t},this}setH(t){return this.hsl.H=ci(t),this.updateRGB(),this.updateLab(),this.updateCMYK(),this}setS(t){return this.hsl.S=At(t,0,100),this.updateRGB(),this.updateLab(),this.updateCMYK(),this}setL(t){return this.hsl.L=At(t,0,100),this.updateRGB(),this.updateLab(),this.updateCMYK(),this}setR(t){this.rgb.R=At(t,0,255),this.updateHSL(),this.updateLab(),this.updateCMYK()}setG(t){return this.rgb.G=At(t,0,255),this.updateHSL(),this.updateLab(),this.updateCMYK(),this}setB(t){return this.rgb.B=At(t,0,255),this.updateHSL(),this.updateLab(),this.updateCMYK(),this}setCIEL(t){return this.lab.L=At(t,0,100),this.updateRGBFromLab(),this.updateHSL(),this.updateCMYK(),this}setCIEa(t){return this.lab.a=At(t,-125,125),this.updateRGBFromLab(),this.updateHSL(),this.updateCMYK(),this}setCIEb(t){return this.lab.b=At(t,-125,125),this.updateRGBFromLab(),this.updateHSL(),this.updateCMYK(),this}setA(t){return this.hsl.A=this.rgb.A=At(t,0,1),this}setC(t){return this.cmyk.C=At(t,0,100),this.updateRGBFromCMYK(),this.updateHSL(),this.updateLab(),this}setM(t){return this.cmyk.M=At(t,0,100),this.updateRGBFromCMYK(),this.updateHSL(),this.updateLab(),this}setY(t){return this.cmyk.Y=At(t,0,100),this.updateRGBFromCMYK(),this.updateHSL(),this.updateLab(),this}setK(t){return this.cmyk.K=At(t,0,100),this.updateRGBFromCMYK(),this.updateHSL(),this.updateLab(),this}get options(){return this._options}get H(){return je(this.hsl.H,this.options.decimals)}get S(){return je(this.hsl.S,this.options.decimals)}get L(){return je(this.hsl.L,this.options.decimals)}get CIEL(){return je(this.lab.L,this.options.decimals)}get CIEa(){return je(this.lab.a,this.options.decimals)}get CIEb(){return je(this.lab.b,this.options.decimals)}get R(){return je(this.rgb.R,this.options.decimals)}get G(){return je(this.rgb.G,this.options.decimals)}get B(){return je(this.rgb.B,this.options.decimals)}get A(){return je(this.hsl.A,this.options.decimals)}get C(){return je(this.cmyk.C,this.options.decimals)}get M(){return je(this.cmyk.M,this.options.decimals)}get Y(){return je(this.cmyk.Y,this.options.decimals)}get K(){return je(this.cmyk.K,this.options.decimals)}get HEXObject(){return qe.HEX(this.rgb)}get HEXAObject(){return qe.HEXA(this.rgb)}get RGBObject(){return{R:this.R,G:this.G,B:this.B}}get RGBAObject(){return{...this.RGBObject,A:this.A}}get HSLObject(){return{H:this.H,S:this.S,L:this.L}}get HSLAObject(){return{...this.HSLObject,A:this.A}}get CIELabObject(){return{L:this.CIEL,a:this.CIEa,b:this.CIEb}}get CIELabAObject(){return{...this.CIELabObject,A:this.A}}get CMYKObject(){return{C:this.C,M:this.M,Y:this.Y,K:this.K}}get CMYKAObject(){return{...this.CMYKObject,A:this.A}}get HEX(){return or.HEX({R:this.R,G:this.G,B:this.B})}get HEXA(){return or.HEX({R:this.R,G:this.G,B:this.B,A:255*this.A})}get RGB(){return or.RGB({R:this.R,G:this.G,B:this.B},this.options)}get RGBA(){return or.RGB({R:this.R,G:this.G,B:this.B,A:this.A},this.options)}get HSL(){return or.HSL({H:this.H,S:this.S,L:this.L},this.options)}get HSLA(){return or.HSL({H:this.H,S:this.S,L:this.L,A:this.A},this.options)}get CIELab(){return or.CIELab({L:this.CIEL,a:this.CIEa,b:this.CIEb},this.options)}get CIELabA(){return or.CIELab({L:this.CIEL,a:this.CIEa,b:this.CIEb,A:this.A},this.options)}get CMYK(){return or.CMYK({C:this.C,M:this.M,Y:this.Y,K:this.K},this.options)}get CMYKA(){return or.CMYK({C:this.C,M:this.M,Y:this.Y,K:this.K,A:this.A},this.options)}static toHEXObject(t){const s=ft(t);return kt(t,s,0,qe.HEX)}static toHEX(t){return or.HEX(Pn.toHEXObject(t))}static toHEXAObject(t){const s=ft(t);return kt(t,s,0,qe.HEXA)}static toHEXA(t){return or.HEX(Pn.toHEXAObject(t))}static toRGBObject(t,s={}){const i=ft(t);return kt(t,i,s.decimals,qe.RGB)}static toRGB(t,s={}){const i=ft(t),n=fr(s,t),a=kt(t,i,s.decimals,qe.RGB);return or.RGB(a,n)}static toRGBAObject(t,s={}){const i=ft(t);return kt(t,i,s.decimals,qe.RGBA)}static toRGBA(t,s={}){const i=ft(t),n=fr(s,t),a=kt(t,i,s.decimals,qe.RGBA);return or.RGB(a,n)}static toHSLObject(t,s={}){const i=ft(t);return kt(t,i,s.decimals,qe.HSL)}static toHSL(t,s={}){const i=ft(t),n=fr(s,t),a=kt(t,i,s.decimals,qe.HSL);return or.HSL(a,n)}static toHSLAObject(t,s={}){const i=ft(t);return kt(t,i,s.decimals,qe.HSLA)}static toHSLA(t,s={}){const i=ft(t),n=fr(s,t),a=kt(t,i,s.decimals,qe.HSLA);return or.HSL(a,n)}static toCIELabObject(t,s={}){const i=ft(t);return kt(t,i,s.decimals,qe.CIELab)}static toCIELab(t,s={}){const i=ft(t),n=fr(s,t),a=kt(t,i,s.decimals,qe.CIELab);return or.CIELab(a,n)}static toCIELabAObject(t,s={}){const i=ft(t);return kt(t,i,s.decimals,qe.CIELabA)}static toCIELabA(t,s={}){const i=ft(t),n=fr(s,t),a=kt(t,i,s.decimals,qe.CIELabA);return or.CIELab(a,n)}static toCMYKObject(t,s={}){const i=ft(t);return kt(t,i,s.decimals,qe.CMYK)}static toCMYK(t,s={}){const i=ft(t),n=fr(s,t),a=kt(t,i,s.decimals,qe.CMYK);return or.CMYK(a,n)}static toCMYKAObject(t,s={}){const i=ft(t);return kt(t,i,s.decimals,qe.CMYKA)}static toCMYKA(t,s={}){const i=ft(t),n=fr(s,t),a=kt(t,i,s.decimals,qe.CMYKA);return or.CMYK(a,n)}static getBlendHEXObject(t,s,i=5){return lt(t,s,i,0,qe.HEX)}static getBlendHEX(t,s,i=5){return Pn.getBlendHEXObject(t,s,i).map(n=>or.HEX(n))}static getBlendHEXAObject(t,s,i=5){return lt(t,s,i,0,qe.HEXA)}static getBlendHEXA(t,s,i=5){return Pn.getBlendHEXAObject(t,s,i).map(n=>or.HEX(n))}static getBlendRGBObject(t,s,i,n){return typeof i=="number"?lt(t,s,i,n==null?void 0:n.decimals,qe.RGB):lt(t,s,5,i==null?void 0:i.decimals,qe.RGB)}static getBlendRGB(t,s,i,n){return typeof i=="number"?lt(t,s,i,n==null?void 0:n.decimals,qe.RGB).map(a=>or.RGB(a,fr(n||{},t,s))):lt(t,s,5,i==null?void 0:i.decimals,qe.RGB).map(a=>or.RGB(a,fr(i||{},t,s)))}static getBlendRGBAObject(t,s,i,n){return typeof i=="number"?lt(t,s,i,n==null?void 0:n.decimals,qe.RGBA):lt(t,s,5,i==null?void 0:i.decimals,qe.RGBA)}static getBlendRGBA(t,s,i,n){return typeof i=="number"?lt(t,s,i,n==null?void 0:n.decimals,qe.RGBA).map(a=>or.RGB(a,fr(n||{},t,s))):lt(t,s,5,i==null?void 0:i.decimals,qe.RGBA).map(a=>or.RGB(a,fr(i||{},t,s)))}static getBlendHSLObject(t,s,i,n){return lt(t,s,typeof i=="number"?i:5,n==null?void 0:n.decimals,qe.HSL)}static getBlendHSL(t,s,i,n){return typeof i=="number"?lt(t,s,i,n==null?void 0:n.decimals,qe.HSL).map(a=>or.HSL(a,fr(n||{},t,s))):lt(t,s,5,i==null?void 0:i.decimals,qe.HSL).map(a=>or.HSL(a,fr(i||{},t,s)))}static getBlendHSLAObject(t,s,i,n){return typeof i=="number"?lt(t,s,i,n==null?void 0:n.decimals,qe.HSLA):lt(t,s,5,i==null?void 0:i.decimals,qe.HSLA)}static getBlendHSLA(t,s,i,n){return typeof i=="number"?lt(t,s,i,n==null?void 0:n.decimals,qe.HSLA).map(a=>or.HSL(a,fr(n||{},t,s))):lt(t,s,5,i==null?void 0:i.decimals,qe.HSLA).map(a=>or.HSL(a,fr(i||{},t,s)))}static getBlendCIELabObject(t,s,i,n){return typeof i=="number"?lt(t,s,i,n==null?void 0:n.decimals,qe.CIELab):lt(t,s,5,i==null?void 0:i.decimals,qe.CIELab)}static getBlendCIELab(t,s,i,n){return typeof i=="number"?lt(t,s,i,n==null?void 0:n.decimals,qe.CIELab).map(a=>or.CIELab(a,fr(n||{},t,s))):lt(t,s,5,i==null?void 0:i.decimals,qe.CIELab).map(a=>or.CIELab(a,fr(i||{},t,s)))}static getBlendCIELabAObject(t,s,i,n){return typeof i=="number"?lt(t,s,i,n==null?void 0:n.decimals,qe.CIELabA):lt(t,s,5,i==null?void 0:i.decimals,qe.CIELabA)}static getBlendCIELabA(t,s,i,n){return typeof i=="number"?lt(t,s,i,n==null?void 0:n.decimals,qe.CIELabA).map(a=>or.CIELab(a,fr(n||{},t,s))):lt(t,s,5,i==null?void 0:i.decimals,qe.CIELabA).map(a=>or.CIELab(a,fr(i||{},t,s)))}static getMixHEXObject(t,s=nt.ADDITIVE){return et.HEX(t,s,!1)}static getMixHEX(t,s=nt.ADDITIVE){return et.HEX(t,s,!0)}static getMixHEXAObject(t,s=nt.ADDITIVE){return et.HEXA(t,s,!1)}static getMixHEXA(t,s=nt.ADDITIVE){return et.HEXA(t,s,!0)}static getMixRGBObject(t,s,i){return typeof s=="string"?et.RGB(t,s,!1,fr(i||{},...t)):et.RGB(t,nt.ADDITIVE,!1,fr(s||{},...t))}static getMixRGB(t,s,i){return typeof s=="string"?et.RGB(t,s,!0,fr(i||{},...t)):et.RGB(t,nt.ADDITIVE,!0,fr(s||{},...t))}static getMixRGBAObject(t,s,i){return typeof s=="string"?et.RGBA(t,s,!1,fr(i||{},...t)):et.RGBA(t,nt.ADDITIVE,!1,fr(s||{},...t))}static getMixRGBA(t,s,i){return typeof s=="string"?et.RGBA(t,s,!0,fr(i||{},...t)):et.RGBA(t,nt.ADDITIVE,!0,fr(s||{},...t))}static getMixHSLObject(t,s,i){return typeof s=="string"?et.HSL(t,s,!1,fr(i||{},...t)):et.HSL(t,nt.ADDITIVE,!1,fr(s||{},...t))}static getMixHSL(t,s,i){return typeof s=="string"?et.HSL(t,s,!0,fr(i||{},...t)):et.HSL(t,nt.ADDITIVE,!0,fr(s||{},...t))}static getMixHSLAObject(t,s,i){return typeof s=="string"?et.HSLA(t,s,!1,fr(i||{},...t)):et.HSLA(t,nt.ADDITIVE,!1,fr(s||{},...t))}static getMixHSLA(t,s,i){return typeof s=="string"?et.HSLA(t,s,!0,fr(i||{},...t)):et.HSLA(t,nt.ADDITIVE,!0,fr(s||{},...t))}static getMixCIELabObject(t,s,i){return typeof s=="string"?et.CIELab(t,s,!1,fr(i||{},...t)):et.CIELab(t,nt.ADDITIVE,!1,fr(s||{},...t))}static getMixCIELab(t,s,i){return typeof s=="string"?et.CIELab(t,s,!0,fr(i||{},...t)):et.CIELab(t,nt.ADDITIVE,!0,fr(s||{},...t))}static getMixCIELabAObject(t,s,i){return typeof s=="string"?et.CIELabA(t,s,!1,fr(i||{},...t)):et.CIELabA(t,nt.ADDITIVE,!1,fr(s||{},...t))}static getMixCIELabA(t,s,i){return typeof s=="string"?et.CIELabA(t,s,!0,fr(i||{},...t)):et.CIELabA(t,nt.ADDITIVE,!0,fr(s||{},...t))}static getShades(t,s,i){return typeof s=="number"?Li(t,s,!0,fr(i||{},t)):Li(t,5,!0,fr(s||{},t))}static getTints(t,s,i){return typeof s=="number"?Li(t,s,!1,fr(i||{},t)):Li(t,5,!1,fr(s||{},t))}static getHarmony(t,s,i,n){return`${s}`in Jt?Cs(s,t,xs(i)?i:nt.ADDITIVE,fr(xs(i)?n||{}:i||{},t)):xs(s)?Cs(Jt.COMPLEMENTARY,t,s,fr(i||{},t)):Cs(Jt.COMPLEMENTARY,t,nt.ADDITIVE,fr(s||{},t))}}const kh=`#version 300 es

precision highp float;
precision highp int;

#define TEO_WIDTH 1.0
#define AA 4
#define SIDE %side%
#define MAX_EXPR 256

#define INV_LN10 0.4342944819

#define FLT_MAX 3.402823466e+38
#define FLT_MIN 1.175494351e-38

uniform ivec2 origin;
uniform int squareMant, squareExp, squareSize;
uniform int maxExpr;
uniform vec4 expressions[MAX_EXPR];

const int WIDTH = int(TEO_WIDTH*float(AA)); 

int fneg(float x) { return (x < 0.0)? 1:0; }

float ln(float x) { return (x <= 0.0)? FLT_MIN : log(x); }

float log10(float x) { return (x <= 0.0)? FLT_MIN : (INV_LN10 * log(x)) ; }

float sqrtf(float x) { return (x <= 0.0)? FLT_MIN : sqrt(x); }

//To change dinamically the eval function
ivec2 eval(ivec2 p, int opt) {
    float pixel = (float(squareMant) * pow(10.0, float(squareExp))) / float(squareSize); 
    float unit = pixel/float(AA);
    float x = float(p.x)*unit, y = float(p.y)*unit;

    ivec2 ret;

    switch(opt) {
        %REPLACE_CODE%
        
    default:
        break;
    }

    return ret;
}

bool line(ivec2 p, int opt) {
    ivec2 a = eval(p + ivec2(-WIDTH, -WIDTH), opt);
    ivec2 b = eval(p + ivec2(WIDTH+1, WIDTH+1), opt);
    ivec2 c = eval(p + ivec2(-WIDTH, WIDTH+1), opt);
    ivec2 d = eval(p + ivec2(WIDTH+1, -WIDTH), opt);

    int g = a.x + b.x + c.x + d.x;
    bool denominators = a.y == b.y && b.y == c.y && c.y == d.y;

    return 0 < g && g < 4 && denominators;
}

vec4 lineColor(ivec2 p, int opt, vec3 rgb) {
    int count = 0;
    for(int i=0; i<AA; ++i) {
        for(int j=0; j<AA; ++j) {
            ivec2 np = p + ivec2(i, j);
            count += int(line(np, opt));
        }
    }

    float alpha = float(count)/float(AA*AA);
    return vec4(rgb*alpha, alpha);
}


vec4 blend(vec4 a, vec4 b) {
    float p = a.a, q = 1.0-p;
    return vec4(
        a.r*p + b.r*q,
        a.g*p + b.g*q,
        a.b*p + b.b*q,
        a.a*p + b.a*q
    );
}

out vec4 fragColor;

void main() {
    ivec2 p = ivec2(
        int(gl_FragCoord.x) - origin.x, 
        int(gl_FragCoord.y) + origin.y - SIDE
    ) * AA;
    vec4 color = vec4(0.0, 0.0, 0.0, 0.0);

    for(int i=0; i<MAX_EXPR; i++) {
        if(i >= maxExpr) break;
        if(expressions[i].a < 0.9) continue;
        
        vec3 rgbColor = expressions[i].rgb;
        color = blend(color, lineColor(p, i, rgbColor));
    }

    fragColor = color;
}

`;let Bt;const Ch=document.getElementById("calculator"),Hr=Ch.getContext("webgl2",{premultipliedAlpha:!1});let ra=!0;function Ui(){ra=!0}Mh();function Mh(){let r,t,s,i=performance.now(),n=0;(function p(){if(ra&&(console.time("update"),a(),console.timeEnd("update"),ra=!1),window.requestAnimationFrame(p),e(),Hr.clearColor(1,1,0,1),Hr.viewport(0,0,Hr.canvas.width,Hr.canvas.height),Hr.clear(Hr.COLOR_BUFFER_BIT),Hr.bindBuffer(Hr.ARRAY_BUFFER,t),Hr.enableVertexAttribArray(r),Hr.vertexAttribPointer(r,2,Hr.FLOAT,!1,0,0),!Bt)throw Error("There is no webgl shader program");const b=Hr.getUniformLocation(Bt,"origin");Hr.uniform2i(b,zr.x,zr.y);const v=Hr.getUniformLocation(Bt,"squareMant"),$=Hr.getUniformLocation(Bt,"squareExp"),L=Hr.getUniformLocation(Bt,"squareSize");Hr.uniform1i(v,zr.mant),Hr.uniform1i($,zr.exp),Hr.uniform1i(L,zr.size);const R=Array.from(Lt,([O,Z])=>{const $e=new Pn(Z.color);return[$e.R/255,$e.G/255,$e.B/255,Z.visible?1:0]}),A=Hr.getUniformLocation(Bt,"maxExpr"),E=Hr.getUniformLocation(Bt,"expressions");Hr.uniform1i(A,R.length),R.length>0&&Hr.uniform4fv(E,R.flat(1)),Hr.drawArrays(Hr.TRIANGLES,0,6),pu()})();function a(){s=Ih(),Sh(Hr,s),r=Hr.getAttribLocation(Bt,"a_position"),t=Hr.createBuffer(),Hr.bindBuffer(Hr.ARRAY_BUFFER,t),Hr.bufferData(Hr.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),Hr.STATIC_DRAW)}function e(){let p=performance.now();if(p-i>1e3){const v=document.getElementById("fps");v.innerHTML=`FPS: ${n}`,i=p,n=0}n++}}function xo(r,t,s){const i=r.createShader(t);return r.shaderSource(i,s),r.compileShader(i),r.getShaderParameter(i,r.COMPILE_STATUS)?i:(console.error("Error compiling shader:",r.getShaderInfoLog(i)),r.deleteShader(i),null)}function Sh(r,t){const s=`#version 300 es
    in vec4 a_position;
    void main() { gl_Position = a_position; }`,i=xo(r,r.FRAGMENT_SHADER,t),n=xo(r,r.VERTEX_SHADER,s);if(Bt=r.createProgram(),r.attachShader(Bt,n),r.attachShader(Bt,i),r.linkProgram(Bt),r.useProgram(Bt),!r.getProgramParameter(Bt,r.LINK_STATUS))return console.error(`Unable to initialize the shader program: ${r.getProgramInfoLog(Bt)}`),null}function Ih(){let r=kh;r=r.replace("%side%",wt.toString());const t=Fh();return r=r.replace("%REPLACE_CODE%",t),r}function Fh(){const r=Array.from(Lt,([s,i])=>i.code);let t="";for(let s in r)r[s]&&(t+=`
            case ${s}:
                ${r[s]}
                break;
            `);return console.log(t),t}const Ms=document.getElementById("more"),Ss=document.getElementById("sidebar");Ms==null||Ms.addEventListener("click",()=>{const r=qi.createNew();Ss==null||Ss.appendChild(r.htmlElement),r.htmlElement.addEventListener("keydown",t=>{var s,i;if(t.key=="ArrowUp"){const n=[...Lt.keys()].indexOf(r.number)-1;n>=0&&((s=[...Lt.values()][n])==null||s.focus())}else if(t.key=="ArrowDown"){const n=[...Lt.keys()].indexOf(r.number)+1;n<Lt.size&&((i=[...Lt.values()][n])==null||i.focus())}}),r.focus(),Ui()});const Is=document.getElementById("home");Is==null||Is.addEventListener("click",hu);window.addEventListener("DOMContentLoaded",()=>{Ui()});function _h(r,t,s){const i=Lt.get(r);if(!i)throw Error("There isn't any equations to edit");i.error=!1,i.code=void 0,s==Yi.ADD&&i.writeFunctionBrackets();let n=Array.from(Lt,([e,p])=>p.number).findIndex(e=>e==r),a;try{const e=i.variableCharacter(),p=i.functionCharacter();if(a=i.getVariables(),i.showUndefinedVariables(a)>0){i.toggleError();return}if(e){if(i.hideSolutionBox(),Nn.has(e)&&Nn.get(e)!==r)throw Error("There's already a function with this name");i.setDrawable(!1),Nn.set(e,r);const b=Rh(e,i,t.substring(2),s,n);i.setSolutionValue(b),i.toggleError();return}else i.setDrawable(!0);if(p){if(jn.has(p)&&jn.get(p)!==r)throw Error("There's already a function with this name");if([...a].some(b=>b==p))throw Error("A variable can't be called like a function");a.delete(p),i.showUndefinedVariables(a),jn.set(p,r),Lh(p,t,i,s,n),i.toggleError();return}}catch(e){console.warn(e),i.writeError(e);return}try{const e=Uf(t,n);e.num!==null&&e.num!==void 0?i.setSolutionValue(e.num):(i.hideSolutionBox(),i.code=e.code),Ui()}catch(e){console.warn(e),i.writeError(e);return}i.toggleError()}function Lh(r,t,s,i,n){var p;const a=t.substring(t.indexOf("=")+1),e=Math.min(t.indexOf("x")>0?t.indexOf("x"):1e9,t.indexOf("y")>0?t.indexOf("y"):1e9);try{r+=t[e];const b=Xf(r,a,n);if(i!=Yi.REFRESH)for(let v of Lt.keys())v!=s.number&&((p=Lt.get(v))==null||p.refresh());s.code=b.code,Ui()}catch(b){console.warn(b),s.writeError(b);return}}function Oh(r,t){try{Kf(r),Lt.forEach(s=>s.refresh())}catch(s){console.warn(s),t.writeError(s)}}function Rh(r,t,s,i,n){const a=t.getVariables();if(a.has("x")||a.has("y")){t.writeError(new Error("A variable can't have x nor y because it has to be constant"));return}try{const e=Vf(r,s,n);return i!=Yi.REFRESH&&Lt.forEach(p=>p.refresh()),e}catch(e){console.warn(e),t.writeError(e)}}function Dh(r,t){try{Zf(r),Lt.forEach(s=>s.refresh())}catch(s){console.warn(s),t.writeError(s)}}
